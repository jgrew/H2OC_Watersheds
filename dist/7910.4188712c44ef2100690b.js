(self.webpackChunkh2oc=self.webpackChunkh2oc||[]).push([[7910,7030],{47910:(e,n,t)=>{var r,o;r=[n,t(9720),t(23084),t(27572),t(35558),t(12997),t(54668),t(50257),t(11446),t(64665),t(23354),t(93521),t(86003),t(17880),t(84176),t(41916),t(86856),t(39199),t(36074),t(23376),t(84930),t(91110),t(58240),t(80015),t(68007),t(37030)],void 0===(o=function(e,t,r,o,a,i,c,u,s,l,f,d,h,p,g,m,y,w,E,v,N,A,I,b,T,S){"use strict";const C=100;function R(e){return e instanceof Error?t.reject(e):t.reject(new Error(e))}function F(e){return t.resolve(e)}function O(e,n){const r=[];for(let t=0;t<n.arguments.length;t++)r.push(x(e,n.arguments[t]));return t.all(r)}function U(e,n,r){return t.create(((t,o)=>{O(e,n).then((a=>{try{t(r(e,n,a))}catch(e){o(e)}}),o)}))}function M(e,n,r){try{return O(e,n).then((o=>{try{const i=r(e,n,o);return(a=i)&&"function"==typeof a.then?i:t.resolve(i)}catch(e){return R(e)}var a}))}catch(e){return R(e)}}function x(e,n){try{switch(n.type){case"VariableDeclarator":return function(e,n){try{let r=null;return r=null===n.init?t.resolve(null):x(e,n.init),null!==e.localScope?r.then((r=>t.create((t=>{if(r===h.voidOperation&&(r=null),"Identifier"!==n.id.type)throw new Error("Can only assign a regular variable");const o=n.id.name.toLowerCase();e.localScope[o]={value:r,valueset:!0,node:n.init},t(h.voidOperation)})))):r.then((r=>t.create((t=>{if("Identifier"!==n.id.type)throw new Error("Can only assign a regular variable");const o=n.id.name.toLowerCase();r===h.voidOperation&&(r=null),e.globalScope[o]={value:r,valueset:!0,node:n.init},t(h.voidOperation)}))))}catch(e){return R(e)}}(e,n);case"VariableDeclaration":return V(e,n,0);case"BlockStatement":return function(e,n){try{return B(e,n,0)}catch(e){return R(e)}}(e,n);case"FunctionDeclaration":return function(e,n){try{const r=n.id.name.toLowerCase();return e.globalScope[r]={valueset:!0,node:null,value:new l(n,e)},t.resolve(h.voidOperation)}catch(e){return R(e)}}(e,n);case"ReturnStatement":return function(e,n){return t.create(((t,r)=>{null===n.argument?t(new h.ReturnResult(h.voidOperation)):x(e,n.argument).then((e=>{try{t(new h.ReturnResult(e))}catch(e){r(e)}}),r)}))}(e,n);case"IfStatement":return function(e,n){return t.create(((t,r)=>{"AssignmentExpression"!==n.test.type&&"UpdateExpression"!==n.test.type?x(e,n.test).then((o=>{try{!0===o?x(e,n.consequent).then(t,r):!1===o?null!==n.alternate?x(e,n.alternate).then(t,r):t(h.voidOperation):r(new Error(E.nodeErrorMessage(n.test,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION")))}catch(e){r(e)}}),r):r(new Error(E.nodeErrorMessage(n.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,n);case"ExpressionStatement":return function(e,n){try{return"AssignmentExpression"===n.expression.type?x(e,n.expression):(n.expression.type,x(e,n.expression).then((e=>t.create((n=>{e===h.voidOperation?n(h.voidOperation):n(new h.ImplicitResult(e))})))))}catch(e){return t.reject(e)}}(e,n);case"UpdateExpression":return function(e,n){try{const r=n.argument;if("MemberExpression"===r.type){const o={t:null};return x(e,r.object).then((n=>{let a=null;return o.t=n,!0===r.computed?a=x(e,r.property):"Identifier"===r.property.type&&(a=t.resolve(r.property.name)),a})).then((e=>t.create((t=>{const r=o.t;let a;if(h.isArray(r)){if(!h.isNumber(e))throw new Error("Invalid Parameter");if(e<0&&(e=r.length+e),e<0||e>=r.length)throw new Error("Assignment outside of array bounds");a=h.toNumber(r[e]),r[e]="++"===n.operator?a+1:a-1}else if(r instanceof p){if(!1===h.isString(e))throw new Error("Dictionary accessor must be a string");if(!0!==r.hasField(e))throw new Error("Invalid Parameter");a=h.toNumber(r.field(e)),r.setField(e,"++"===n.operator?a+1:a-1)}else{if(!(r instanceof w))throw h.isImmutableArray(r)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===h.isString(e))throw new Error("Feature accessor must be a string");if(!0!==r.hasField(e))throw new Error("Invalid Parameter");a=h.toNumber(r.field(e)),r.setField(e,"++"===n.operator?a+1:a-1)}!1===n.prefix?t(a):t("++"===n.operator?a+1:a-1)}))))}return t.create(((t,r)=>{const o="Identifier"===n.argument.type?n.argument.name.toLowerCase():"";if(!o)throw new Error("Invalid identifier");let a;return null!==e.localScope&&void 0!==e.localScope[o]?(a=h.toNumber(e.localScope[o].value),e.localScope[o]={value:"++"===n.operator?a+1:a-1,valueset:!0,node:n},void(!1===n.prefix?t(a):t("++"===n.operator?a+1:a-1))):void 0!==e.globalScope[o]?(a=h.toNumber(e.globalScope[o].value),e.globalScope[o]={value:"++"===n.operator?a+1:a-1,valueset:!0,node:n},void(!1===n.prefix?t(a):t("++"===n.operator?a+1:a-1))):void r(new Error("Variable not recognised"))}))}catch(e){return t.reject(e)}}(e,n);case"AssignmentExpression":return function(e,n){return t.create(((r,o)=>{const a=n.left;if("MemberExpression"===a.type)x(e,n.right).then((i=>{try{x(e,a.object).then((c=>{try{let u=null;if(!0===a.computed)u=x(e,a.property);else{if("Identifier"!==a.property.type)throw new Error("Expected computed or identifier for assignemnt target");u=t.resolve(a.property.name)}u.then((e=>{try{if(h.isArray(c)){if(!h.isNumber(e))throw new Error("Invalid Parameter");if(e<0&&(e=c.length+e),e<0||e>c.length)throw new Error("Assignment outside of array bounds");if(e===c.length){if("="!==n.operator)throw new Error("Invalid Parameter");c[e]=_(i,n.operator,c[e],n)}else c[e]=_(i,n.operator,c[e],n)}else if(c instanceof p){if(!1===h.isString(e))throw new Error("Dictionary accessor must be a string");if(!0===c.hasField(e))c.setField(e,_(i,n.operator,c.field(e),n));else{if("="!==n.operator)throw new Error("Invalid Parameter");c.setField(e,_(i,n.operator,null,n))}}else{if(!(c instanceof w))throw h.isImmutableArray(c)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===h.isString(e))throw new Error("Feature accessor must be a string");if(!0===c.hasField(e))c.setField(e,_(i,n.operator,c.field(e),n));else{if("="!==n.operator)throw new Error("Invalid Parameter");c.setField(e,_(i,n.operator,null,n))}}r(h.voidOperation)}catch(e){o(e)}}),o)}catch(e){o(e)}}),o)}catch(e){o(e)}}),o);else{const t=a.name.toLowerCase();if(null!==e.localScope&&void 0!==e.localScope[t])return void x(e,n.right).then((a=>{try{e.localScope[t]={value:_(a,n.operator,e.localScope[t].value,n),valueset:!0,node:n.right},r(h.voidOperation)}catch(e){o(e)}}),o);void 0!==e.globalScope[t]?x(e,n.right).then((a=>{try{e.globalScope[t]={value:_(a,n.operator,e.globalScope[t].value,n),valueset:!0,node:n.right},r(h.voidOperation)}catch(e){o(e)}}),o):o(new Error("Cannot assign undeclared variable"))}}))}(e,n);case"ForStatement":return function(e,n){try{return null!==n.init?x(e,n.init).then((()=>t.create(((t,r)=>{const o={testResult:!0,lastAction:h.voidOperation};P(e,n,o,(e=>{t(e)}),(e=>{r(e)}),0)})))):t.create(((t,r)=>{const o={testResult:!0,lastAction:h.voidOperation};P(e,n,o,(e=>{t(e)}),(e=>{r(e)}),0)}))}catch(e){return t.reject(e)}}(e,n);case"ForInStatement":return function(e,n){return t.create(((r,o)=>{x(e,n.right).then((a=>{try{let i=null;i="VariableDeclaration"===n.left.type?x(e,n.left):t.resolve(),i.then((()=>{try{let t="";if("VariableDeclaration"===n.left.type){const e=n.left.declarations[0].id;"Identifier"===e.type&&(t=e.name)}else"Identifier"===n.left.type&&(t=n.left.name);if(!t)throw new Error(E.nodeErrorMessage(n,"RUNTIME","INVALIDVARIABLE"));t=t.toLowerCase();let i=null;if(null!==e.localScope&&void 0!==e.localScope[t]&&(i=e.localScope[t]),null===i&&void 0!==e.globalScope[t]&&(i=e.globalScope[t]),null===i)return void o(new Error(E.nodeErrorMessage(n,"RUNTIME","VARIABLENOTDECLARED")));h.isArray(a)||h.isString(a)?G(e,n,a,{reject:o,resolve:r},i):h.isImmutableArray(a)?function(e,n,t,r,o,a){try{if(void 0===a&&(a="i"),0===t.length)return void r.resolve(h.voidOperation);D(e,n,t,o,0,a,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(e){r.reject(e)}}(e,n,a,{reject:o,resolve:r},i):a instanceof p||a instanceof w?function(e,n,t,r,o){try{G(e,n,t.keys(),r,o,"k")}catch(e){r.reject(e)}}(e,n,a,{reject:o,resolve:r},i):h.isFeatureSet(a)?j(a.iterator(e.abortSignal),e,n,a,i,(e=>{r(e)}),(e=>{o(e)}),0):G(e,n,[],{reject:o,resolve:r},i)}catch(e){o(e)}}),o)}catch(e){o(e)}}),o)}))}(e,n);case"BreakStatement":return t.resolve(h.breakResult);case"EmptyStatement":return t.resolve(h.voidOperation);case"ContinueStatement":return t.resolve(h.continueResult);case"TemplateElement":return function(e,n){return t.resolve(n.value?n.value.cooked:"")}(0,n);case"TemplateLiteral":return function(e,n){return t.create((t=>{const r=[];y.reduceArrayWithPromises(n.expressions,((n,t,o,a)=>x(e,t).then((e=>{r[o]=h.toString(e)})))).then((()=>{let e="",o=0;for(const t of n.quasis)e+=t.value?t.value.cooked:"",!1===t.tail&&(e+=r[o]?r[o]:"",o++);t(e)}))}))}(e,n);case"Identifier":return z(e,n);case"MemberExpression":return function(e,n){try{return x(e,n.object).then((r=>{try{return null===r?t.reject(new Error(E.nodeErrorMessage(n,"RUNTIME","NOTFOUND"))):!1===n.computed?"Identifier"===n.property.type?r instanceof p||r instanceof w?t.resolve(r.field(n.property.name)):r instanceof o?t.resolve(Y(r,n.property.name,0,n)):t.reject(new Error(E.nodeErrorMessage(n,"RUNTIME","INVALIDTYPE"))):t.reject(new Error(E.nodeErrorMessage(n,"RUNTIME","INVALIDTYPE"))):x(e,n.property).then((e=>t.create(((t,a)=>{if(r instanceof p||r instanceof w)h.isString(e)?t(r.field(e)):a(new Error(E.nodeErrorMessage(n,"RUNTIME","INVALIDTYPE")));else if(r instanceof o)h.isString(e)?t(Y(r,e,0,n)):a(new Error(E.nodeErrorMessage(n,"RUNTIME","INVALIDTYPE")));else if(h.isArray(r))if(h.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){if(e<0&&(e=r.length+e),e>=r.length||e<0)throw new Error(E.nodeErrorMessage(n,"RUNTIME","OUTOFBOUNDS"));t(r[e])}else a(new Error(E.nodeErrorMessage(n,"RUNTIME","INVALIDTYPE")));else if(h.isImmutableArray(r))if(h.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){if(e<0&&(e=r.length()+e),e>=r.length()||e<0)throw new Error(E.nodeErrorMessage(n,"RUNTIME","OUTOFBOUNDS"));t(r.get(e))}else a(new Error(E.nodeErrorMessage(n,"RUNTIME","INVALIDTYPE")));else if(h.isString(r))if(h.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){if(e<0&&(e=r.length+e),e>=r.length||e<0)throw new Error(E.nodeErrorMessage(n,"RUNTIME","OUTOFBOUNDS"));t(r[e])}else a(new Error(E.nodeErrorMessage(n,"RUNTIME","INVALIDTYPE")));else a(new Error(E.nodeErrorMessage(n,"RUNTIME","INVALIDTYPE")))}))))}catch(e){return R(e)}}))}catch(e){return R(e)}}(e,n);case"Literal":return F(n.value);case"CallExpression":return function(e,n){try{if("Identifier"!==n.callee.type)return R(E.nodeErrorMessage(n,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==e.localScope&&void 0!==e.localScope[n.callee.name.toLowerCase()]){const t=e.localScope[n.callee.name.toLowerCase()];return t.value instanceof h.NativeFunction?t.value.fn(e,n):t.value instanceof l?ee(e,n,t.value.definition):R(E.nodeErrorMessage(n,"RUNTIME","NOTAFUNCTION"))}if(void 0!==e.globalScope[n.callee.name.toLowerCase()]){const t=e.globalScope[n.callee.name.toLowerCase()];return t.value instanceof h.NativeFunction?t.value.fn(e,n):t.value instanceof l?ee(e,n,t.value.definition):R(E.nodeErrorMessage(n,"RUNTIME","NOTAFUNCTION"))}return R(E.nodeErrorMessage(n,"RUNTIME","NOTFOUND"))}catch(e){return R(e)}}(e,n);case"UnaryExpression":return function(e,n){try{return x(e,n.argument).then((e=>t.create(((t,r)=>{h.isBoolean(e)&&"!"===n.operator?t(!e):"-"===n.operator?t(-1*h.toNumber(e)):"+"===n.operator?t(1*h.toNumber(e)):"~"===n.operator?t(~h.toNumber(e)):r(new Error(E.nodeErrorMessage(n,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR")))}))))}catch(e){return R(e)}}(e,n);case"BinaryExpression":return function(e,n){try{return t.all([x(e,n.left),x(e,n.right)]).then((e=>t.create(((t,r)=>{const o=e[0],a=e[1];switch(n.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":t(h.binaryOperator(h.toNumber(o),h.toNumber(a),n.operator));case"==":t(h.equalityTest(o,a));break;case"!=":t(!h.equalityTest(o,a));break;case"<":case">":case"<=":case">=":t(h.greaterThanLessThan(o,a,n.operator));break;case"+":h.isString(o)||h.isString(a)?t(h.toString(o)+h.toString(a)):t(h.toNumber(o)+h.toNumber(a));break;case"-":t(h.toNumber(o)-h.toNumber(a));break;case"*":t(h.toNumber(o)*h.toNumber(a));break;case"/":t(h.toNumber(o)/h.toNumber(a));break;case"%":t(h.toNumber(o)%h.toNumber(a));break;default:r(new Error(E.nodeErrorMessage(n,"RUNTIME","OPERATORNOTRECOGNISED")))}}))))}catch(e){return R(e)}}(e,n);case"LogicalExpression":return function(e,n){return t.create(((t,r)=>{"AssignmentExpression"!==n.left.type&&"UpdateExpression"!==n.left.type?"AssignmentExpression"!==n.right.type&&"UpdateExpression"!==n.right.type?x(e,n.left).then((o=>{try{if(!h.isBoolean(o))throw new Error(E.nodeErrorMessage(n,"RUNTIME","ONLYBOOLEAN"));switch(n.operator){case"||":!0===o?t(o):x(e,n.right).then((e=>{try{if(!h.isBoolean(e))throw new Error(E.nodeErrorMessage(n,"RUNTIME","ONLYORORAND"));t(e)}catch(e){r(e)}}),r);break;case"&&":!1===o?t(o):x(e,n.right).then((e=>{try{if(!h.isBoolean(e))throw new Error(E.nodeErrorMessage(n,"RUNTIME","ONLYORORAND"));t(e)}catch(e){r(e)}}),r);break;default:throw new Error(E.nodeErrorMessage(n,"RUNTIME","ONLYORORAND"))}}catch(e){r(e)}}),r):r(new Error(E.nodeErrorMessage(n.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"))):r(new Error(E.nodeErrorMessage(n.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION")))}))}(e,n);case"ConditionalExpression":return R(E.nodeErrorMessage(n,"RUNTIME","NOTSUPPORTED"));case"ArrayExpression":return function(e,n){try{const r=[];for(let t=0;t<n.elements.length;t++)r.push(x(e,n.elements[t]));return t.all(r).then((e=>t.create(((t,r)=>{for(let t=0;t<e.length;t++){if(h.isFunctionParameter(e[t]))return void r(new Error(E.nodeErrorMessage(n,"RUNTIME","FUNCTIONCONTEXTILLEGAL")));e[t]===h.voidOperation&&(e[t]=null)}t(e)}))))}catch(e){return R(e)}}(e,n);case"ObjectExpression":return function(e,n){try{const r=[];for(let t=0;t<n.properties.length;t++)r.push(x(e,n.properties[t]));return t.all(r).then((e=>t.create((n=>{const t={};for(let n=0;n<e.length;n++){const r=e[n];if(h.isFunctionParameter(r.value))throw new Error("Illegal Argument");if(!1===h.isString(r.key))throw new Error("Illegal Argument");r.value===h.voidOperation?t[r.key.toString()]=null:t[r.key.toString()]=r.value}const r=new p(t);r.immutable=!1,n(r)}))))}catch(e){return R(e)}}(e,n);case"Property":return function(e,n){try{return x(e,n.value).then((r=>t.create((t=>{"Identifier"===n.key.type?t({key:n.key.name,value:r}):x(e,n.key).then((e=>{t({key:e,value:r})}))}))))}catch(e){return t.reject(e)}}(e,n);default:return R(E.nodeErrorMessage(n,"RUNTIME","UNREOGNISED"))}}catch(e){return R(e)}}function k(e,n,r){try{return x(e,n.body).then((o=>{try{return r.lastAction=o,r.lastAction===h.breakResult||r.lastAction instanceof h.ReturnResult?(r.testResult=!1,t.resolve(r)):null!==n.update?x(e,n.update).then((()=>t.resolve(r))):t.resolve(r)}catch(e){return t.reject(e)}}))}catch(e){return t.reject(e)}}function P(e,n,r,o,a,i){try{(function(e,n,r){try{return null!==n.test?x(e,n.test).then((o=>{try{return!0===e.abortSignal.aborted?t.reject(new Error("Cancelled")):(r.testResult=o,!1===r.testResult?t.resolve(r):!0!==r.testResult?t.reject(new Error(E.nodeErrorMessage(n,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))):k(e,n,r))}catch(e){return t.reject(e)}})):k(e,n,r)}catch(e){return t.reject(e)}})(e,n,r).then((()=>{try{!0===r.testResult?++i>C?(i=0,setTimeout((()=>{P(e,n,r,o,a,i)}),0)):P(e,n,r,o,a,i):r.lastAction instanceof h.ReturnResult?o(r.lastAction):o(h.voidOperation)}catch(e){a(e)}}),(e=>{a(e)}))}catch(e){a(e)}}function L(e,n,t,r,o,a,i,c,u,s){try{if(r<=a)return void c(h.voidOperation);o.value="k"===i?t[a]:a,x(e,n.body).then((l=>{try{l instanceof h.ReturnResult?c(l):l===h.breakResult?c(h.voidOperation):++s>C?(s=0,setTimeout((()=>{L(e,n,t,r,o,a+1,i,c,u,s)}),0)):L(e,n,t,r,o,a+1,i,c,u,s)}catch(e){u(e)}}),(e=>{u(e)}))}catch(e){u(e)}}function D(e,n,t,r,o,a,i,c,u){try{if(t.length()<=o)return void i(h.voidOperation);r.value="k"===a?t.get(o):o,x(e,n.body).then((s=>{s instanceof h.ReturnResult?i(s):s===h.breakResult?i(h.voidOperation):++u>C?(u=0,setTimeout((()=>{D(e,n,t,r,o+1,a,i,c,u)}),0)):D(e,n,t,r,o+1,a,i,c,u)}),(e=>{c(e)}))}catch(e){c(e)}}function G(e,n,t,r,o,a){try{if(void 0===a&&(a="i"),0===t.length)return void r.resolve(h.voidOperation);L(e,n,t,t.length,o,0,a,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(e){r.reject(e)}}function j(e,n,t,r,o,a,i,c){try{e.next().then((u=>{try{if(null===u)a(h.voidOperation);else{const s=w.createFromGraphicLikeObject(u.geometry,u.attributes,r);s._underlyingGraphic=u,o.value=s,x(n,t.body).then((u=>{try{u===h.breakResult?a(h.voidOperation):u instanceof h.ReturnResult?a(u):++c>C?(c=0,setTimeout((()=>{j(e,n,t,r,o,a,i,c)}),0)):j(e,n,t,r,o,a,i,c)}catch(e){i(e)}}),(e=>{i(e)}))}}catch(e){i(e)}}),(e=>{i(e)}))}catch(e){i(e)}}function _(e,n,t,r){switch(n){case"=":return e===h.voidOperation?null:e;case"/=":return h.toNumber(t)/h.toNumber(e);case"*=":return h.toNumber(t)*h.toNumber(e);case"-=":return h.toNumber(t)-h.toNumber(e);case"+=":return h.isString(t)||h.isString(e)?h.toString(t)+h.toString(e):h.toNumber(t)+h.toNumber(e);case"%=":return h.toNumber(t)%h.toNumber(e);default:throw new Error(E.nodeErrorMessage(r,"RUNTIME","OPERATORNOTRECOGNISED"))}}function B(e,n,r){try{return r>=n.body.length?t.resolve(h.voidOperation):t.create(((t,o)=>{x(e,n.body[r]).then((a=>{try{a instanceof h.ReturnResult||a===h.breakResult||a===h.continueResult||r===n.body.length-1?t(a):B(e,n,r+1).then(t,o)}catch(e){o(e)}}),o)}))}catch(e){return R(e)}}function V(e,n,r){return t.create(((t,o)=>{r>=n.declarations.length?t(h.voidOperation):x(e,n.declarations[r]).then((()=>{r===n.declarations.length-1?t(h.voidOperation):V(e,n,r+1).then((()=>{t(h.voidOperation)}),o)}),o)}))}let q=0;function Y(e,n,t,r){let o;switch(n=n.toLowerCase()){case"hasz":{const n=e.hasZ;return void 0!==n&&n}case"hasm":{const n=e.hasM;return void 0!==n&&n}case"spatialreference":{let n=e.spatialReference._arcadeCacheId;if(void 0===n){let t=!0;Object.freeze&&Object.isFrozen(e.spatialReference)&&(t=!1),t&&(q++,e.spatialReference._arcadeCacheId=q,n=q)}const t=new p({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return void 0!==n&&(t._arcadeCacheId="SPREF"+n.toString()),t}}switch(e.type){case"extent":switch(n){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const t=e[n];return void 0!==t?t:null}case"type":return"Extent"}break;case"polygon":switch(n){case"rings":return o=e.cache._arcadeCacheId,void 0===o&&(q++,o=q,e.cache._arcadeCacheId=o),new d(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case"type":return"Polygon"}break;case"point":switch(n){case"x":case"y":case"z":case"m":return void 0!==e[n]?e[n]:null;case"type":return"Point"}break;case"polyline":switch(n){case"paths":return o=e.cache._arcadeCacheId,void 0===o&&(q++,o=q,e.cache._arcadeCacheId=o),new d(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case"type":return"Polyline"}break;case"multipoint":switch(n){case"points":return o=e.cache._arcadeCacheId,void 0===o&&(q++,o=q,e.cache._arcadeCacheId=o),new f(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,o,1);case"type":return"Multipoint"}}throw new Error(E.nodeErrorMessage(r,"RUNTIME","PROPERTYNOTFOUND"))}function z(e,n){return t.create(((t,r)=>{const o=n.name.toLowerCase();if(null===e.localScope||void 0===e.localScope[o])if(void 0===e.globalScope[o])r(new Error(E.nodeErrorMessage(n,"RUNTIME","VARIABLENOTFOUND")));else{const n=e.globalScope[o];!0===n.valueset?t(n.value):null!==n.d?n.d.then(t,r):(n.d=x(e,n.node),n.d.then((e=>{try{n.value=e,n.valueset=!0,t(e)}catch(e){r(e)}}),r))}else{const n=e.localScope[o];!0===n.valueset?t(n.value):null!==n.d?n.d.then(t,r):(n.d=x(e,n.node),n.d.then((e=>{try{n.value=e,n.valueset=!0,t(e)}catch(e){r(e)}}),r))}}))}const J={};function H(e){return null===e?"":h.isArray(e)||h.isImmutableArray(e)?"Array":h.isDate(e)?"Date":h.isString(e)?"String":h.isBoolean(e)?"Boolean":h.isNumber(e)?"Number":e instanceof m?"Attachment":e instanceof g?"Portal":e instanceof p?"Dictionary":e instanceof w?"Feature":e instanceof a?"Point":e instanceof u?"Polygon":e instanceof s?"Polyline":e instanceof c?"Multipoint":e instanceof i?"Extent":h.isFunctionParameter(e)?"Function":h.isFeatureSet(e)?"FeatureSet":h.isFeatureSetCollection(e)?"FeatureSetCollection":e===h.voidOperation?"":"number"==typeof e&&isNaN(e)?"Number":"Unrecognised Type"}function Z(e,n,r,o){return t.create(((t,a)=>{x(e,n.arguments[r]).then((i=>{try{if(h.equalityTest(i,o))return void x(e,n.arguments[r+1]).then(t,a);{const i=n.arguments.length-r;return 1===i?void x(e,n.arguments[r]).then(t,a):(2===i&&t(null),3===i?void x(e,n.arguments[r+2]).then(t,a):void Z(e,n,r+2,o).then(t,a))}}catch(e){a(e)}}),a)}))}function W(e,n,r,o){return t.create(((t,a)=>{!0===o?x(e,n.arguments[r+1]).then(t,a):3==n.arguments.length-r?x(e,n.arguments[r+2]).then(t,a):x(e,n.arguments[r+2]).then((o=>{try{if(!1===h.isBoolean(o))return void a(new Error("WHEN needs boolean test conditions"));W(e,n,r+2,o).then(t,a)}catch(e){a(e)}}))}))}function K(e,n){try{const r=e.length,o=Math.floor(r/2);return 0===r?t.resolve([]):1===r?t.resolve([e[0]]):t.create(((a,i)=>{const c=[K(e.slice(0,o),n),K(e.slice(o,r),n)];t.all(c).then((e=>{try{X(e[0],e[1],n,[]).then(a,i)}catch(e){i(e)}}),i)}))}catch(e){return R(e)}}function X(e,n,r,o){return t.create(((t,a)=>{const i=o;e.length>0||n.length>0?e.length>0&&n.length>0?r(e[0],n[0]).then((c=>{try{isNaN(c)&&(c=1),c<=0?(i.push(e[0]),e=e.slice(1)):(i.push(n[0]),n=n.slice(1)),X(e,n,r,o).then(t,a)}catch(e){a(e)}}),a):e.length>0?(i.push(e[0]),X(e=e.slice(1),n,r,o).then(t,a)):n.length>0&&(i.push(n[0]),n=n.slice(1),X(e,n,r,o).then(t,a)):t(o)}))}function Q(e,n){const t=e.length,r=Math.floor(t/2);return n||(n=function(e,n){return e<n?-1:e===n?0:1}),0===t?[]:1===t?[e[0]]:function(e,n,t){const r=[];for(;e.length>0||n.length>0;)if(e.length>0&&n.length>0){let o=t(e[0],n[0]);isNaN(o)&&(o=1),o<=0?(r.push(e[0]),e=e.slice(1)):(r.push(n[0]),n=n.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):n.length>0&&(r.push(n[0]),n=n.slice(1));return r}(Q(e.slice(0,r),n),Q(e.slice(r,t),n),n)}function $(e,n,r){try{const o=e.body;if(r.length!==e.params.length)return R(new Error("Invalid Parameter calls to function."));for(let t=0;t<r.length;t++){const o=e.params[t];"Identifier"===o.type&&(n.localScope[o.name.toLowerCase()]={d:null,value:r[t],valueset:!0,node:null})}return x(n,o).then((e=>t.create(((n,t)=>{e instanceof h.ReturnResult?n(e.value):e!==h.breakResult?e!==h.continueResult?e instanceof h.ImplicitResult?n(e.value):n(e):t(new Error("Cannot Continue from a Function")):t(new Error("Cannot Break from a Function"))}))))}catch(e){return t.reject(e)}}function ee(e,n,t){return M(e,n,(function(n,r,o){const a={spatialReference:e.spatialReference,services:e.services,console:e.console,lrucache:e.lrucache,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:e.depthCounter+1};if(a.depthCounter>64)throw new Error("Exceeded maximum function depth");return $(t,a,o)}))}function ne(e){return function(){const n={abortSignal:e.context.abortSignal,spatialReference:e.context.spatialReference,console:e.context.console,lrucache:e.context.lrucache,services:e.context.services,localScope:{},globalScope:e.context.globalScope,depthCounter:e.context.depthCounter+1};if(n.depthCounter>64)throw new Error("Exceeded maximum function depth");return $(e.definition,n,arguments)}}v.registerFunctions(J,U),N.registerFunctions(J,U),T.registerFunctions(J,U),I.registerFunctions(J,U),A.registerFunctions(J,U),b.registerFunctions(J,U),S.registerFunctions({functions:J,compiled:!1,signatures:null,failDefferred:null,evaluateIdentifier:null,arcadeCustomFunctionHandler:null,mode:"async",standardFunction:U,standardFunctionAsync:M}),J.typeof=function(e,n){return U(e,n,(function(e,n,t){h.pcCheck(t,1,1);const r=H(t[0]);if("Unrecognised Type"===r)throw new Error("Unrecognised Type");return r}))},J.iif=function(e,n){return t.create(((r,o)=>{h.pcCheck(null===n.arguments?[]:n.arguments,3,3),x(e,n.arguments[0]).then((a=>{try{if(!1===h.isBoolean(a))return void o(new Error("IF Function must have a boolean test condition"));t.all([x(e,n.arguments[1]),x(e,n.arguments[2])]).then((e=>{r(a?e[0]:e[1])}),o)}catch(e){o(e)}}),o)}))},J.decode=function(e,n){return t.create(((t,r)=>{n.arguments.length<2?r(new Error("Missing Parameters")):2!==n.arguments.length?(n.arguments.length-1)%2!=0?x(e,n.arguments[0]).then((o=>{try{Z(e,n,1,o).then(t,r)}catch(e){r(e)}}),r):r(new Error("Must have a default value result.")):x(e,n.arguments[1]).then(t,r)}))},J.when=function(e,n){try{return n.arguments.length<3?R("Missing Parameters"):n.arguments.length%2==0?R("Must have a default value result."):x(e,n.arguments[0]).then((r=>t.create(((t,o)=>{!1!==h.isBoolean(r)?W(e,n,0,r).then(t,o):o(new Error("WHEN needs boolean test conditions"))}))))}catch(e){return R(e)}},J.sort=function(e,n){return M(e,n,(function(e,n,r){h.pcCheck(r,1,2);let o=r[0];if(h.isImmutableArray(o)&&(o=o.toArray()),!1===h.isArray(o))return R(Error("Illegal Argument"));if(r.length>1)return!1===h.isFunctionParameter(r[1])?R(Error("Illegal Argument")):K(o,ne(r[1]));{let e=o;if(0===e.length)return t.resolve([]);const n={};for(let t=0;t<e.length;t++){const r=H(e[t]);""!==r&&(n[r]=!0)}if(!0===n.Array||!0===n.Dictionary||!0===n.Feature||!0===n.Point||!0===n.Polygon||!0===n.Polyline||!0===n.Multipoint||!0===n.Extent||!0===n.Function)return t.resolve(e.slice(0));let r=0,a="";for(const e in n)r++,a=e;return r>1||"String"===a?e=Q(e,(function(e,n){if(null==e||e===h.voidOperation)return null==n||n===h.voidOperation?0:1;if(null==n||n===h.voidOperation)return-1;const t=h.toString(e),r=h.toString(n);return t<r?-1:t===r?0:1})):"Number"===a?e=Q(e,(function(e,n){return e-n})):"Boolean"===a?e=Q(e,(function(e,n){return e===n?0:n?-1:1})):"Date"===a&&(e=Q(e,(function(e,n){return n-e}))),t.resolve(e)}}))};const te={failDefferred:R,resolveDeffered:F,fixSpatialReference:h.fixSpatialReference,parseArguments:O,standardFunction:U,standardFunctionAsync:M,evaluateIdentifier:z,arcadeCustomFunction:ne};for(const e in J)J[e]={value:new h.NativeFunction(J[e]),valueset:!0,node:null};const re=function(){};function oe(e){console.log(e)}(re.prototype=J).infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},re.prototype.pi={value:Math.PI,valueset:!0,node:null};const ae=te;n.executeScript=function(e,n){let o=n.spatialReference;null==o&&(o=new r({wkid:102100}));const a=function(e,n){const t=new re;null==e&&(e={}),null==n&&(n={});const r=new p({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});r.immutable=!1,t.textformatting={value:r,valueset:!0,node:null};for(const e in n)t[e]={value:new h.NativeFunction(n[e]),native:!0,valueset:!0,node:null};for(const n in e)e[n]&&"esri.Graphic"===e[n].declaredClass?t[n]={value:w.createFromGraphic(e[n]),valueset:!0,node:null}:t[n]={value:e[n],valueset:!0,node:null};return t}(n.vars,n.customfunctions);return x({spatialReference:o,services:n.services,abortSignal:void 0===n.abortSignal||null===n.abortSignal?{aborted:!1}:n.abortSignal,globalScope:a,console:n.console?n.console:oe,lrucache:n.lrucache,localScope:null,depthCounter:1},e.body[0].body).then((e=>t.create(((n,t)=>{e instanceof h.ReturnResult&&(e=e.value),e instanceof h.ImplicitResult&&(e=e.value),e===h.voidOperation&&(e=null),e!==h.breakResult?e!==h.continueResult?e instanceof h.NativeFunction||e instanceof l?t(new Error("Cannot return FUNCTION")):n(e):t(new Error("Cannot return CONTINUE")):t(new Error("Cannot return BREAK"))}))))},n.extend=function(e){const n={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:U,standardFunctionAsync:M,failDefferred:R,evaluateIdentifier:z,arcadeCustomFunctionHandler:ne};for(let t=0;t<e.length;t++)e[t].registerFunctions(n);for(const e in n.functions)J[e]={value:new h.NativeFunction(n.functions[e]),valueset:!0,node:null},re.prototype[e]=J[e];for(let e=0;e<n.signatures.length;e++)E.addFunctionDeclaration(n.signatures[e],"async")},n.extractFieldLiterals=function(e,n){return E.findFieldLiterals(e)},n.findFunctionCalls=function(e){return E.findFunctionCalls(e)},n.functionHelper=ae,n.referencesFunction=function(e,n){return E.referencesFunction(e,n)},n.referencesMember=function(e,n){return E.referencesMember(e,n)},n.validateScript=function(e,n){return E.validateScript(e,n,"full")},Object.defineProperty(e,"__esModule",{value:!0})}.apply(n,r))||(e.exports=o)},37030:(e,n,t)=>{var r,o;r=[n,t(27572),t(35558),t(12997),t(54668),t(50257),t(11446),t(57167),t(13032),t(86003),t(48512),t(47431),t(36548)],void 0===(o=function(e,t,r,o,a,i,c,u,s,l,f,d,h){"use strict";function p(e){return 0===s.version.indexOf("4.")?i.fromExtent(e):new i({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}function g(e){if(l.pcCheck(e,2,2),e[0]instanceof t&&e[1]instanceof t);else if(e[0]instanceof t&&null===e[1]);else if(e[1]instanceof t&&null===e[0]);else if(null!==e[0]||null!==e[1])throw new Error("Illegal Argument")}n.registerFunctions=function(e){"async"===e.mode&&(e.functions.disjoint=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return g(t=l.autoCastFeatureToGeometry(t)),null===t[0]||null===t[1]||h.disjoint(t[0],t[1])}))},e.functions.intersects=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return g(t=l.autoCastFeatureToGeometry(t)),null!==t[0]&&null!==t[1]&&h.intersects(t[0],t[1])}))},e.functions.touches=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return g(t=l.autoCastFeatureToGeometry(t)),null!==t[0]&&null!==t[1]&&h.touches(t[0],t[1])}))},e.functions.crosses=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return g(t=l.autoCastFeatureToGeometry(t)),null!==t[0]&&null!==t[1]&&h.crosses(t[0],t[1])}))},e.functions.within=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return g(t=l.autoCastFeatureToGeometry(t)),null!==t[0]&&null!==t[1]&&h.within(t[0],t[1])}))},e.functions.contains=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return g(t=l.autoCastFeatureToGeometry(t)),null!==t[0]&&null!==t[1]&&h.contains(t[0],t[1])}))},e.functions.overlaps=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return g(t=l.autoCastFeatureToGeometry(t)),null!==t[0]&&null!==t[1]&&h.overlaps(t[0],t[1])}))},e.functions.equals=function(n,r){return e.standardFunctionAsync(n,r,(function(e,n,r){return l.pcCheck(r,2,2),r[0]===r[1]||(r[0]instanceof t&&r[1]instanceof t?h.equals(r[0],r[1]):!(!l.isDate(r[0])||!l.isDate(r[1]))&&r[0].getTime()===r[1].getTime())}))},e.functions.relate=function(n,r){return e.standardFunctionAsync(n,r,(function(e,n,r){if(r=l.autoCastFeatureToGeometry(r),l.pcCheck(r,3,3),r[0]instanceof t&&r[1]instanceof t)return h.relate(r[0],r[1],l.toString(r[2]));if(r[0]instanceof t&&null===r[1])return!1;if(r[1]instanceof t&&null===r[0])return!1;if(null===r[0]&&null===r[1])return!1;throw new Error("Illegal Argument")}))},e.functions.intersection=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return g(t=l.autoCastFeatureToGeometry(t)),null===t[0]||null===t[1]?null:h.intersect(t[0],t[1])}))},e.functions.union=function(n,r){return e.standardFunctionAsync(n,r,(function(e,r,o){const a=[];if(0===(o=l.autoCastFeatureToGeometry(o)).length)throw new Error("Function called with wrong number of Parameters");if(1===o.length)if(l.isArray(o[0])){const e=l.autoCastFeatureToGeometry(o[0]);for(let n=0;n<e.length;n++)if(null!==e[n]){if(!(e[n]instanceof t))throw new Error("Illegal Argument");a.push(e[n])}}else{if(!l.isImmutableArray(o[0])){if(o[0]instanceof t)return l.fixSpatialReference(d.cloneGeometry(o[0]),n.spatialReference);if(null===o[0])return null;throw new Error("Illegal Argument")}{const e=l.autoCastFeatureToGeometry(o[0].toArray());for(let n=0;n<e.length;n++)if(null!==e[n]){if(!(e[n]instanceof t))throw new Error("Illegal Argument");a.push(e[n])}}}else for(let e=0;e<o.length;e++)if(null!==o[e]){if(!(o[e]instanceof t))throw new Error("Illegal Argument");a.push(o[e])}return 0===a.length?null:h.union(a)}))},e.functions.difference=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return g(t=l.autoCastFeatureToGeometry(t)),null!==t[0]&&null===t[1]?d.cloneGeometry(t[0]):null===t[0]?null:h.difference(t[0],t[1])}))},e.functions.symmetricdifference=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){return g(t=l.autoCastFeatureToGeometry(t)),null===t[0]&&null===t[1]?null:null===t[0]?d.cloneGeometry(t[1]):null===t[1]?d.cloneGeometry(t[0]):h.symmetricDifference(t[0],t[1])}))},e.functions.clip=function(n,r){return e.standardFunctionAsync(n,r,(function(e,n,r){if(r=l.autoCastFeatureToGeometry(r),l.pcCheck(r,2,2),!(r[1]instanceof o)&&null!==r[1])throw new Error("Illegal Argument");if(null===r[0])return null;if(!(r[0]instanceof t))throw new Error("Illegal Argument");return null===r[1]?null:h.clip(r[0],r[1])}))},e.functions.cut=function(n,r){return e.standardFunctionAsync(n,r,(function(e,n,r){if(r=l.autoCastFeatureToGeometry(r),l.pcCheck(r,2,2),!(r[1]instanceof c)&&null!==r[1])throw new Error("Illegal Argument");if(null===r[0])return[];if(!(r[0]instanceof t))throw new Error("Illegal Argument");return null===r[1]?[d.cloneGeometry(r[0])]:h.cut(r[0],r[1])}))},e.functions.area=function(n,r){return e.standardFunctionAsync(n,r,(function(e,r,o){if(l.pcCheck(o,1,2),null===(o=l.autoCastFeatureToGeometry(o))[0])return 0;if(l.isFeatureSet(o[0]))return o[0].sumArea(d.convertSquareUnitsToCode(l.defaultUndefined(o[1],-1)),!1,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if(l.isArray(o[0])||l.isImmutableArray(o[0])){const e=l.autoCastArrayOfPointsToPolygon(o[0],n.spatialReference);return null===e?0:h.planarArea(e,d.convertSquareUnitsToCode(l.defaultUndefined(o[1],-1)))}if(!(o[0]instanceof t))throw new Error("Illegal Argument");return h.planarArea(o[0],d.convertSquareUnitsToCode(l.defaultUndefined(o[1],-1)))}))},e.functions.areageodetic=function(n,r){return e.standardFunctionAsync(n,r,(function(e,r,o){if(l.pcCheck(o,1,2),null===(o=l.autoCastFeatureToGeometry(o))[0])return 0;if(l.isFeatureSet(o[0]))return o[0].sumArea(d.convertSquareUnitsToCode(l.defaultUndefined(o[1],-1)),!0,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if(l.isArray(o[0])||l.isImmutableArray(o[0])){const e=l.autoCastArrayOfPointsToPolygon(o[0],n.spatialReference);return null===e?0:h.geodesicArea(e,d.convertSquareUnitsToCode(l.defaultUndefined(o[1],-1)))}if(!(o[0]instanceof t))throw new Error("Illegal Argument");return h.geodesicArea(o[0],d.convertSquareUnitsToCode(l.defaultUndefined(o[1],-1)))}))},e.functions.length=function(n,r){return e.standardFunctionAsync(n,r,(function(e,r,o){if(l.pcCheck(o,1,2),null===(o=l.autoCastFeatureToGeometry(o))[0])return 0;if(l.isFeatureSet(o[0]))return o[0].sumLength(d.convertLinearUnitsToCode(l.defaultUndefined(o[1],-1)),!1,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if(l.isArray(o[0])||l.isImmutableArray(o[0])){const e=l.autoCastArrayOfPointsToPolyline(o[0],n.spatialReference);return null===e?0:h.planarLength(e,d.convertLinearUnitsToCode(l.defaultUndefined(o[1],-1)))}if(!(o[0]instanceof t))throw new Error("Illegal Argument");return h.planarLength(o[0],d.convertLinearUnitsToCode(l.defaultUndefined(o[1],-1)))}))},e.functions.lengthgeodetic=function(n,r){return e.standardFunctionAsync(n,r,(function(e,r,o){if(l.pcCheck(o,1,2),null===(o=l.autoCastFeatureToGeometry(o))[0])return 0;if(l.isFeatureSet(o[0]))return o[0].sumLength(d.convertLinearUnitsToCode(l.defaultUndefined(o[1],-1)),!0,n.abortSignal).then((e=>{if(n.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e}));if(l.isArray(o[0])||l.isImmutableArray(o[0])){const e=l.autoCastArrayOfPointsToPolyline(o[0],n.spatialReference);return null===e?0:h.geodesicLength(e,d.convertLinearUnitsToCode(l.defaultUndefined(o[1],-1)))}if(!(o[0]instanceof t))throw new Error("Illegal Argument");return h.geodesicLength(o[0],d.convertLinearUnitsToCode(l.defaultUndefined(o[1],-1)))}))},e.functions.distance=function(n,r){return e.standardFunctionAsync(n,r,(function(e,r,o){o=l.autoCastFeatureToGeometry(o),l.pcCheck(o,2,3);let a=o[0];(l.isArray(o[0])||l.isImmutableArray(o[0]))&&(a=l.autoCastArrayOfPointsToMultiPoint(o[0],n.spatialReference));let i=o[1];if((l.isArray(o[1])||l.isImmutableArray(o[1]))&&(i=l.autoCastArrayOfPointsToMultiPoint(o[1],n.spatialReference)),!(a instanceof t))throw new Error("Illegal Argument");if(!(i instanceof t))throw new Error("Illegal Argument");return h.distance(a,i,d.convertLinearUnitsToCode(l.defaultUndefined(o[2],-1)))}))},e.functions.distancegeodetic=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){t=l.autoCastFeatureToGeometry(t),l.pcCheck(t,2,3);const o=t[0],a=t[1];if(!(o instanceof r))throw new Error("Illegal Argument");if(!(a instanceof r))throw new Error("Illegal Argument");const i=new c({paths:[],spatialReference:o.spatialReference});return i.addPath([o,a]),h.geodesicLength(i,d.convertLinearUnitsToCode(l.defaultUndefined(t[2],-1)))}))},e.functions.densify=function(n,r){return e.standardFunctionAsync(n,r,(function(e,n,r){if(r=l.autoCastFeatureToGeometry(r),l.pcCheck(r,2,3),null===r[0])return null;if(!(r[0]instanceof t))throw new Error("Illegal Argument");const a=l.toNumber(r[1]);if(isNaN(a))throw new Error("Illegal Argument");if(a<=0)throw new Error("Illegal Argument");return r[0]instanceof i||r[0]instanceof c?h.densify(r[0],a,d.convertLinearUnitsToCode(l.defaultUndefined(r[2],-1))):r[0]instanceof o?h.densify(p(r[0]),a,d.convertLinearUnitsToCode(l.defaultUndefined(r[2],-1))):r[0]}))},e.functions.densifygeodetic=function(n,r){return e.standardFunctionAsync(n,r,(function(e,n,r){if(r=l.autoCastFeatureToGeometry(r),l.pcCheck(r,2,3),null===r[0])return null;if(!(r[0]instanceof t))throw new Error("Illegal Argument");const a=l.toNumber(r[1]);if(isNaN(a))throw new Error("Illegal Argument");if(a<=0)throw new Error("Illegal Argument");return r[0]instanceof i||r[0]instanceof c?h.geodesicDensify(r[0],a,d.convertLinearUnitsToCode(l.defaultUndefined(r[2],-1))):r[0]instanceof o?h.geodesicDensify(p(r[0]),a,d.convertLinearUnitsToCode(l.defaultUndefined(r[2],-1))):r[0]}))},e.functions.generalize=function(n,r){return e.standardFunctionAsync(n,r,(function(e,n,r){if(r=l.autoCastFeatureToGeometry(r),l.pcCheck(r,2,4),null===r[0])return null;if(!(r[0]instanceof t))throw new Error("Illegal Argument");const o=l.toNumber(r[1]);if(isNaN(o))throw new Error("Illegal Argument");return h.generalize(r[0],o,l.toBoolean(l.defaultUndefined(r[2],!0)),d.convertLinearUnitsToCode(l.defaultUndefined(r[3],-1)))}))},e.functions.buffer=function(n,r){return e.standardFunctionAsync(n,r,(function(e,n,r){if(r=l.autoCastFeatureToGeometry(r),l.pcCheck(r,2,3),null===r[0])return null;if(!(r[0]instanceof t))throw new Error("Illegal Argument");const o=l.toNumber(r[1]);if(isNaN(o))throw new Error("Illegal Argument");return 0===o?d.cloneGeometry(r[0]):h.buffer(r[0],o,d.convertLinearUnitsToCode(l.defaultUndefined(r[2],-1)))}))},e.functions.buffergeodetic=function(n,r){return e.standardFunctionAsync(n,r,(function(e,n,r){if(r=l.autoCastFeatureToGeometry(r),l.pcCheck(r,2,3),null===r[0])return null;if(!(r[0]instanceof t))throw new Error("Illegal Argument");const o=l.toNumber(r[1]);if(isNaN(o))throw new Error("Illegal Argument");return 0===o?d.cloneGeometry(r[0]):h.geodesicBuffer(r[0],o,d.convertLinearUnitsToCode(l.defaultUndefined(r[2],-1)))}))},e.functions.offset=function(n,t){return e.standardFunctionAsync(n,t,(function(e,n,t){if(t=l.autoCastFeatureToGeometry(t),l.pcCheck(t,2,6),null===t[0])return null;if(!(t[0]instanceof i||t[0]instanceof c))throw new Error("Illegal Argument");const r=l.toNumber(t[1]);if(isNaN(r))throw new Error("Illegal Argument");const o=l.toNumber(l.defaultUndefined(t[4],10));if(isNaN(o))throw new Error("Illegal Argument");const a=l.toNumber(l.defaultUndefined(t[5],0));if(isNaN(a))throw new Error("Illegal Argument");return h.offset(t[0],r,d.convertLinearUnitsToCode(l.defaultUndefined(t[2],-1)),l.toString(l.defaultUndefined(t[3],"round")).toLowerCase(),o,a)}))},e.functions.rotate=function(n,a){return e.standardFunctionAsync(n,a,(function(e,n,a){a=l.autoCastFeatureToGeometry(a),l.pcCheck(a,2,3);let c=a[0];if(null===c)return null;if(!(c instanceof t))throw new Error("Illegal Argument");c instanceof o&&(c=i.fromExtent(c));const u=l.toNumber(a[1]);if(isNaN(u))throw new Error("Illegal Argument");const s=l.defaultUndefined(a[2],null);if(null===s)return h.rotate(c,u);if(s instanceof r)return h.rotate(c,u,s);throw new Error("Illegal Argument")}))},e.functions.centroid=function(n,u){return e.standardFunctionAsync(n,u,(function(e,u,s){if(s=l.autoCastFeatureToGeometry(s),l.pcCheck(s,1,1),null===s[0])return null;let h=s[0];if((l.isArray(s[0])||l.isImmutableArray(s[0]))&&(h=l.autoCastArrayOfPointsToMultiPoint(s[0],n.spatialReference)),null===h)return null;if(!(h instanceof t))throw new Error("Illegal Argument");return h instanceof r?l.fixSpatialReference(d.cloneGeometry(s[0]),n.spatialReference):h instanceof i?h.centroid:h instanceof c?f.centroidPolyline(h):h instanceof a?f.centroidMultiPoint(h):h instanceof o?h.center:null}))},e.functions.multiparttosinglepart=function(n,s){return e.standardFunctionAsync(n,s,(function(e,s,f){f=l.autoCastFeatureToGeometry(f),l.pcCheck(f,1,1);const p=[];if(null===f[0])return null;if(!(f[0]instanceof t))throw new Error("Illegal Argument");return f[0]instanceof r||f[0]instanceof o?[l.fixSpatialReference(d.cloneGeometry(f[0]),n.spatialReference)]:h.simplify(f[0]).then((e=>{if(e instanceof i){const n=[],t=[];for(let r=0;r<e.rings.length;r++)if(e.isClockwise(e.rings[r])){const t=u.fromJSON({rings:[e.rings[r]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});n.push(t)}else t.push({ring:e.rings[r],pt:e.getPoint(r,0)});for(let e=0;e<t.length;e++)for(let r=0;r<n.length;r++)if(n[r].contains(t[e].pt)){n[r].addRing(t[e].ring);break}return n}if(e instanceof c){const n=[];for(let t=0;t<e.paths.length;t++){const r=u.fromJSON({paths:[e.paths[t]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});n.push(r)}return n}if(f[0]instanceof a){const e=l.fixSpatialReference(d.cloneGeometry(f[0]),n.spatialReference);for(let n=0;n<e.points.length;n++)p.push(e.getPoint(n));return p}return null}))}))},e.functions.issimple=function(n,r){return e.standardFunctionAsync(n,r,(function(e,n,r){if(r=l.autoCastFeatureToGeometry(r),l.pcCheck(r,1,1),null===r[0])return!0;if(!(r[0]instanceof t))throw new Error("Illegal Argument");return h.isSimple(r[0])}))},e.functions.simplify=function(n,r){return e.standardFunctionAsync(n,r,(function(e,n,r){if(r=l.autoCastFeatureToGeometry(r),l.pcCheck(r,1,1),null===r[0])return null;if(!(r[0]instanceof t))throw new Error("Illegal Argument");return h.simplify(r[0])}))})},Object.defineProperty(e,"__esModule",{value:!0})}.apply(n,r))||(e.exports=o)},36548:(e,n,t)=>{var r,o;r=[n,t(35558),t(57167),t(26016),t(51972)],void 0===(o=function(e,t,r,o,a){"use strict";function i(e){var n;return Array.isArray(e)?null==(n=e[0])?void 0:n.spatialReference:null==e?void 0:e.spatialReference}function c(e){return e?Array.isArray(e)?e.map(c):e.toJSON?e.toJSON():e:e}function u(e){return Array.isArray(e)?e.map((e=>r.fromJSON(e))):r.fromJSON(e)}let s;async function l(e,n){return(await async function(){return s||(s=a.open("geometryEngineWorker",{strategy:"distributed"})),s}()).invoke("executeGEOperation",{operation:e,parameters:c(n)})}function f(e){return"xmin"in e?e.center:"x"in e?e:e.extent.center}n.buffer=async function(e,n,t,r=!1){const o=[i(e),e,n,t,r];return u(await l("buffer",o))},n.clip=async function(e,n){return u(await l("clip",[i(e),e,n]))},n.contains=function(e,n){return l("contains",[i(e),e,n])},n.convexHull=async function(e,n=!1){return u(await l("convexHull",[i(e),e,n]))},n.crosses=function(e,n){return l("crosses",[i(e),e,n])},n.cut=async function(e,n){return u(await l("cut",[i(e),e,n]))},n.densify=async function(e,n,t){return u(await l("densify",[i(e),e,n,t]))},n.difference=async function(e,n){return u(await l("difference",[i(e),e,n]))},n.disjoint=function(e,n){return l("disjoint",[i(e),e,n])},n.distance=function(e,n,t){return l("distance",[i(e),e,n,t])},n.equals=function(e,n){return l("equals",[i(e),e,n])},n.extendedSpatialReferenceInfo=function(e){return l("extendedSpatialReferenceInfo",[e])},n.flipHorizontal=async function(e,n){var t;if(null==e)throw new Error("Illegal Argument Exception");const r=e.spatialReference;n=null!=(t=n)?t:f(e);const o=e.constructor.fromJSON(await l("flipHorizontal",[r,e,n]));return o.spatialReference=r,o},n.flipVertical=async function(e,n){var t;if(null==e)throw new Error("Illegal Argument Exception");const r=e.spatialReference;n=null!=(t=n)?t:f(e);const o=e.constructor.fromJSON(await l("flipVertical",[r,e,n]));return o.spatialReference=r,o},n.generalize=async function(e,n,t,r){return u(await l("generalize",[i(e),e,n,t,r]))},n.geodesicArea=function(e,n,t){return l("geodesicArea",[i(e),e,n,t])},n.geodesicBuffer=async function(e,n,t,r,o,a){const c=[i(e),e,n,t,r,o,a];return u(await l("geodesicBuffer",c))},n.geodesicDensify=async function(e,n,t,r=0){return u(await l("geodesicDensify",[i(e),e,n,t,r]))},n.geodesicLength=function(e,n,t){return l("geodesicLength",[i(e),e,n,t])},n.intersect=async function(e,n){return u(await l("intersect",[i(e),e,n]))},n.intersects=function(e,n){return l("intersects",[i(e),e,n])},n.isSimple=function(e){return l("isSimple",[i(e),e])},n.nearestCoordinate=async function(e,n,r=!0){const o=await l("nearestCoordinate",[i(e),e,n,r]);return{...o,coordinate:t.fromJSON(o.coordinate)}},n.nearestVertex=async function(e,n){const r=await l("nearestVertex",[i(e),e,n]);return{...r,coordinate:t.fromJSON(r.coordinate)}},n.nearestVertices=async function(e,n,r,o){return(await l("nearestVertices",[i(e),e,n,r,o])).map((e=>({...e,coordinate:t.fromJSON(e.coordinate)})))},n.offset=async function(e,n,t,r,o,a){return u(await l("offset",[i(e),e,n,t,r,o,a]))},n.overlaps=function(e,n){return l("overlaps",[i(e),e,n])},n.planarArea=function(e,n){return l("planarArea",[i(e),e,n])},n.planarLength=function(e,n){return l("planarLength",[i(e),e,n])},n.relate=function(e,n,t){return l("relate",[i(e),e,n,t])},n.rotate=async function(e,n,t){var r;if(null==e)throw new Error("Illegal Argument Exception");const o=e.spatialReference;t=null!=(r=t)?r:f(e);const a=e.constructor.fromJSON(await l("rotate",[o,e,n,t]));return a.spatialReference=o,a},n.simplify=async function(e){return u(await l("simplify",[i(e),e]))},n.symmetricDifference=async function(e,n){return u(await l("symmetricDifference",[i(e),e,n]))},n.touches=function(e,n){return l("touches",[i(e),e,n])},n.union=async function(e,n=null){const t=function(e,n){let t;return Array.isArray(e)?t=e:(t=[],t.push(e),null!=n&&t.push(n)),t}(e,n);return u(await l("union",[i(t),t]))},n.within=function(e,n){return l("within",[i(e),e,n])},Object.defineProperty(e,"__esModule",{value:!0})}.apply(n,r))||(e.exports=o)}}]);