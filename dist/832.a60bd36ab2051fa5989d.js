(self.webpackChunkh2oc=self.webpackChunkh2oc||[]).push([[832],{24088:(e,t,i)=>{var n,r;n=[t,i(3718),i(12997),i(18167)],void 0===(r=function(e,i,n,r){"use strict";function s(e=y){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function o(e,t,i,n,r,o,a=s()){return a[0]=e,a[1]=t,a[2]=i,a[3]=n,a[4]=r,a[5]=o,a}function a(e){return e[0]>=e[3]?0:e[3]-e[0]}function l(e){return e[1]>=e[4]?0:e[4]-e[1]}function u(e){return e[2]>=e[5]?0:e[5]-e[2]}function h(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function p(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function c(e){return 6===e.length}const d=[1/0,1/0,1/0,-1/0,-1/0,-1/0],y=[0,0,0,0,0,0],f=s();t.NEGATIVE_INFINITY=d,t.POSITIVE_INFINITY=[-1/0,-1/0,-1/0,1/0,1/0,1/0],t.ZERO=y,t.allFinite=function(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0},t.center=function(e,t=[0,0,0]){return t[0]=e[0]+a(e)/2,t[1]=e[1]+l(e)/2,t[2]=e[2]+u(e)/2,t},t.contains=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]},t.containsPoint=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]},t.containsPointWithMargin=function(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[2]>=e[2]-i&&t[0]<=e[3]+i&&t[1]<=e[4]+i&&t[2]<=e[5]+i},t.create=s,t.depth=l,t.diameter=function(e){const t=a(e),i=u(e),n=l(e);return Math.sqrt(t*t+i*i+n*n)},t.empty=function(e){return e?p(e,d):s(d)},t.equals=function(e,t,n){if(i.isNone(e)||i.isNone(t))return e===t;if(!c(e)||!c(t))return!1;if(n){for(let i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},t.expandWithAABB=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])},t.expandWithBuffer=function(e,t,i=0,n=t.length/3){let r=e[0],s=e[1],o=e[2],a=e[3],l=e[4],u=e[5];for(let e=0;e<n;e++)r=Math.min(r,t[i+3*e]),s=Math.min(s,t[i+3*e+1]),o=Math.min(o,t[i+3*e+2]),a=Math.max(a,t[i+3*e]),l=Math.max(l,t[i+3*e+1]),u=Math.max(u,t[i+3*e+2]);e[0]=r,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=u},t.expandWithNestedArray=function(e,t,i){const n=t.length;let r=e[0],s=e[1],o=e[2],a=e[3],l=e[4],u=e[5];if(i)for(let e=0;e<n;e++){const i=t[e];r=Math.min(r,i[0]),s=Math.min(s,i[1]),o=Math.min(o,i[2]),a=Math.max(a,i[0]),l=Math.max(l,i[1]),u=Math.max(u,i[2])}else for(let e=0;e<n;e++){const i=t[e];r=Math.min(r,i[0]),s=Math.min(s,i[1]),a=Math.max(a,i[0]),l=Math.max(l,i[1])}e[0]=r,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=u},t.expandWithOffset=function(e,t,i,n){e[0]=Math.min(e[0],e[0]+t),e[3]=Math.max(e[3],e[3]+t),e[1]=Math.min(e[1],e[1]+i),e[4]=Math.max(e[4],e[4]+i),e[2]=Math.min(e[2],e[2]+n),e[5]=Math.max(e[5],e[5]+n)},t.expandWithRect=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])},t.expandWithVec3=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])},t.fromExtent=function(e,t=s()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.zmin,t[3]=e.xmax,t[4]=e.ymax,t[5]=e.zmax,t},t.fromMinMax=function(e,t,i=s()){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=t[0],i[4]=t[1],i[5]=t[2],i},t.fromRect=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e},t.fromValues=o,t.getMax=function(e,t){return t[0]=e[3],t[1]=e[4],t[2]=e[5],t},t.getMin=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.height=u,t.intersects=h,t.intersectsClippingArea=function(e,t){return!!i.isNone(t)||h(e,t)},t.is=c,t.isPoint=function(e){return 0===a(e)&&0===l(e)&&0===u(e)},t.maximumDimension=function(e){return Math.max(a(e),u(e),l(e))},t.offset=function(e,t,i,n,r=e){return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+n,r[3]=e[3]+t,r[4]=e[4]+i,r[5]=e[5]+n,r},t.scale=function(e,t,i=e){const n=e[0]+a(e)/2,r=e[1]+l(e)/2,s=e[2]+u(e)/2;return i[0]=n+(e[0]-n)*t,i[1]=r+(e[1]-r)*t,i[2]=s+(e[2]-s)*t,i[3]=n+(e[3]-n)*t,i[4]=r+(e[4]-r)*t,i[5]=s+(e[5]-s)*t,i},t.set=p,t.setMax=function(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e},t.setMin=function(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i},t.size=function(e,t=[0,0,0]){return t[0]=a(e),t[1]=l(e),t[2]=u(e),t},t.toExtent=function(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new n(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})},t.toRect=function(e,t){return t||(t=r.create()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t},t.width=a,t.wrap=function(e,t,i,n,r,s){return o(e,t,i,n,r,s,f)},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,n))||(e.exports=r)},97953:(e,t,i)=>{var n,r;n=[t,i(92231),i(37578),i(4037),i(23084),i(63629),i(88710),i(13032),i(40810),i(25519),i(57517),i(24088)],void 0===(r=function(e,i,n,r,s,o,a,l,u,h,p,c){"use strict";const d={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function y(e,t,i){i.forEach((i=>{e.set(i.attributes[t],i)}))}function f(e){const t=c.create(),i=c.create(c.NEGATIVE_INFINITY);for(const n of e){if(n.polygons&&n.polygons.featureSet&&n.polygons.featureSet.features)for(const e of n.polygons.featureSet.features)o.getBoundsXYZ(t,e.geometry),c.expandWithAABB(i,t);if(n.polylines&&n.polylines.featureSet&&n.polylines.featureSet.features)for(const e of n.polylines.featureSet.features)o.getBoundsXYZ(t,e.geometry),c.expandWithAABB(i,t);if(n.points&&n.points.featureSet&&n.points.featureSet.features)for(const e of n.points.featureSet.features)o.getBoundsXYZ(t,e.geometry),c.expandWithAABB(i,t);if(n.mapImages)for(const e of n.mapImages)o.getBoundsXYZ(t,e.extent),c.expandWithAABB(i,t)}return c.equals(i,c.NEGATIVE_INFINITY)?null:{xmin:i[0],ymin:i[1],zmin:i[2],xmax:i[3],ymax:i[4],zmax:i[5],spatialReference:s.WGS84}}t.computeExtent=f,t.fetchService=function(e,t,i,s){const o=l.id&&l.id.findCredential(e);e=r.addQueryParameters(e,{token:o&&o.token});const a=n.kmlServiceUrl;return u(a,{query:{url:e,model:"simple",folders:"",refresh:0!==i||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:s})},t.getGraphics=async function(e){const t=p.fromJSON(e.featureSet).features,i=e.layerDefinition,n=h.fromJSON(i.drawingInfo.renderer),r=a.fromJSON(e.popupInfo),s=[];for(const e of t){const t=await n.getSymbolAsync(e);e.symbol=t,e.popupTemplate=r,e.visible=!0,s.push(e)}return s},t.parseKML=function(e){const t=e.folders||[],n=t.slice(),r=new Map,s=new Map,o=new Map,a=new Map,l=new Map,u={esriGeometryPoint:s,esriGeometryPolyline:o,esriGeometryPolygon:a};(e.featureCollection&&e.featureCollection.layers||[]).forEach((e=>{const t=i.clone(e);t.featureSet.features=[];const n=e.featureSet.geometryType;r.set(n,t);const l=e.layerDefinition.objectIdField;"esriGeometryPoint"===n?y(s,l,e.featureSet.features):"esriGeometryPolyline"===n?y(o,l,e.featureSet.features):"esriGeometryPolygon"===n&&y(a,l,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((e=>{l.set(e.id,e)})),t.forEach((t=>{t.networkLinkIds.forEach((i=>{const r=function(e,t,i){const n=function(e,t){let i;return t.some((t=>t.id===e&&(i=t,!0))),i}(e,i);return n&&(n.parentFolderId=t,n.networkLink=n),n}(i,t.id,e.networkLinks);r&&n.push(r)}))})),n.forEach((e=>{e.featureInfos&&(e.points=i.clone(r.get("esriGeometryPoint")),e.polylines=i.clone(r.get("esriGeometryPolyline")),e.polygons=i.clone(r.get("esriGeometryPolygon")),e.mapImages=[],e.featureInfos.map((t=>{switch(t.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const i=u[t.type].get(t.id);i&&e[d[t.type]].featureSet.features.push(i);break}case"GroundOverlay":{const i=l.get(t.id);i&&e.mapImages.push(i);break}}})),e.fullExtent=f([e]))}));const h=f(n);return{folders:t,sublayers:n,extent:h}},t.sublayersFromJSON=function(e,t,i=null,n=[]){const r=[],s={},o=t.sublayers,a=t.folders.map((e=>e.id));return o.forEach((t=>{const o=new e;if(i?o.read(t,i):o.read(t),n.length&&a.indexOf(o.id)>-1&&(o.visible=-1!==n.indexOf(o.id)),s[t.id]=o,null!=t.parentFolderId&&-1!==t.parentFolderId){const e=s[t.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers.unshift(o)}else r.unshift(o)})),r},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,n))||(e.exports=r)},3093:(e,t,i)=>{var n,r;n=[t,i(58797),i(74637),i(12525),i(83334),i(1422),i(80593),i(27975),i(48188),i(98043),i(93681),i(31561)],void 0===(r=function(e,i,n,r,s,o,a,l,u,h,p,c){"use strict";function d(e,t,i){const n={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return t&&i&&(n.width=t,n.height=i),new l(e,n)}let y=function(e){function t(t=null,n=!0){var r;return(r=e.call(this)||this).requestRenderOnSourceChangedEnabled=n,r._textureInvalidated=!0,r.stencilRef=0,r.coordScale=[1,1],r._height=void 0,r.pixelRatio=1,r.resolution=0,r.rotation=0,r._source=null,r._width=void 0,r.x=0,r.y=0,r.transforms={dvs:s.create()},r.source=t,r.requestRender=r.requestRender.bind(i._assertThisInitialized(r)),r}i._inheritsLoose(t,e);var n=t.prototype;return n.destroy=function(){this._texture&&(this._texture.dispose(),this._texture=null)},n.beforeRender=function(t){e.prototype.beforeRender.call(this,t),this.updateTexture(t)},n.invalidateTexture=function(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())},n.setTransform=function(e){const t=r.identity(this.transforms.dvs),[i,n]=e.toScreenNoRotation([0,0],this.x,this.y),s=this.resolution/this.pixelRatio/e.resolution,a=s*this.width,l=s*this.height,u=Math.PI*this.rotation/180;r.translate(t,t,o.fromValues(i,n)),r.translate(t,t,o.fromValues(a/2,l/2)),r.rotate(t,t,-u),r.translate(t,t,o.fromValues(-a/2,-l/2)),r.scaleByVec2(t,t,o.fromValues(a,l)),r.multiply(this.transforms.dvs,e.displayViewMat3,t)},n.setSamplingProfile=function(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))},n.bind=function({context:e},t){this._texture&&e.bindTexture(this._texture,t)},n.updateTexture=function({context:e}){var t;if(!this.stage)return null==(t=this._texture)||t.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=d(e,this.sourceWidth,this.sourceHeight):this._texture=d(e));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),function(e){return e&&"render"in e}(i))if(i instanceof c){const e=i.getRenderedRasterPixels();this._texture.setData(e.renderedRasterPixels)}else this._texture.setData(function(e){const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.render(t.getContext("2d")),t}(i));else(function(e){return e&&!("render"in e)})(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)},n.onAttach=function(){this.invalidateTexture()},n.onDetach=function(){this.invalidateTexture()},i._createClass(t,[{key:"isSourceScaled",get:function(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}},{key:"height",get:function(){return void 0!==this._height?this._height:this.sourceHeight},set:function(e){this._height=e}},{key:"source",get:function(){return this._source},set:function(e){this._source=e,this.invalidateTexture()}},{key:"sourceHeight",get:function(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}},{key:"sourceWidth",get:function(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}},{key:"width",get:function(){return void 0!==this._width?this._width:this.sourceWidth},set:function(e){this._width=e}}]),t}(p.DisplayObject);t.Bitmap=y,Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,n))||(e.exports=r)},19048:(e,t,i)=>{var n,r;n=[t,i(58797),i(53183),i(41706),i(98520)],void 0===(r=function(e,i,n,r,s){"use strict";let o=function(e){function t(){return e.apply(this,arguments)||this}return i._inheritsLoose(t,e),t.prototype.prepareRenderPasses=function(t){const i=t.registerRenderPass({name:"bitmap",brushes:[r.brushes.bitmap],target:()=>this.children,drawPhase:n.WGLDrawPhase.MAP});return[...e.prototype.prepareRenderPasses.call(this,t),i]},t}(s);t.BitmapContainer=o,Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,n))||(e.exports=r)},31561:(e,t,i)=>{var n,r;n=[i(58797)],void 0===(r=function(e){"use strict";return function(){function t(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}var i=t.prototype;return i.render=function(e){const t=this.pixelBlock;if(!t)return;const i=this.filter({pixelBlock:t}),n=i.pixelBlock.getAsRGBA(),r=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);r.data.set(n),e.putImageData(r,0,0)},i.getRenderedRasterPixels=function(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}},e._createClass(t,[{key:"width",get:function(){return this.pixelBlock?this.pixelBlock.width:0}},{key:"height",get:function(){return this.pixelBlock?this.pixelBlock.height:0}}]),t}()}.apply(t,n))||(e.exports=r)},30832:(e,t,i)=>{var n,r;n=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(9720),i(48199),i(70272),i(12997),i(82438),i(40810),i(75416),i(69788),i(56998),i(97953),i(75885),i(54186),i(3093),i(19048),i(46351)],void 0===(r=function(e,t,i,n,r,s,o,a,l,u,h,p,c,d,y,f,m,_,g,v,w,x,b,M,I){"use strict";let V=function(t){function i(){var e;return(e=t.apply(this,arguments)||this)._handles=new m,e._bitmapIndex=new Map,e._mapImageContainer=new M.BitmapContainer,e._featuresMap=new Map,e.allVisiblePoints=new g.GraphicsCollection,e.allVisiblePolylines=new g.GraphicsCollection,e.allVisiblePolygons=new g.GraphicsCollection,e.allVisibleMapImages=new y,e}e._inheritsLoose(i,t);var n=i.prototype;return n.hitTest=function(e,t){if(this.suspended||!this._pointsView&&!this._polylinesView&&!this._polygonsView)return h.resolve(null);const i=[this._pointsView.hitTest(e,t),this._polylinesView.hitTest(e,t),this._polygonsView.hitTest(e,t)];return h.all(i).then((e=>e.filter((e=>(e&&(e.layer=this.layer,e.sourceLayer=this.layer),!!e)))[0]||null))},n.update=function(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)},n.attach=function(){this._handles.add([this.allVisibleMapImages.on("change",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))}))]),this.container.addChild(this._mapImageContainer),this._polygonsView=new x({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate()}),this.container.addChild(this._polygonsView.container),this._polylinesView=new x({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate()}),this.container.addChild(this._polylinesView.container),this._pointsView=new x({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate()}),this.container.addChild(this._pointsView.container),this.watch("layer.visibleSublayers",(()=>this._refreshCollections())),this._fetchingPromise=this._fetchService().then((()=>{this._fetchingPromise=null,this.notifyChange("updating")}))},n.detach=function(){this._handles.removeAll(),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView&&(this._polygonsView.destroy(),this._polygonsView=null),this._polylinesView&&(this._polylinesView.destroy(),this._polylinesView=null),this._pointsView&&(this._pointsView.destroy(),this._pointsView=null)},n.moveStart=function(){},n.viewChange=function(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()},n.moveEnd=function(){},n.isUpdating=function(){return null!=this._fetchingPromise||this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating},n._addMapImage=function(e){(this.view.spatialReference.isWGS84||this.view.spatialReference.isWebMercator)&&f(e.href,{responseType:"image"}).then((({data:t})=>{let i=d.fromJSON(e.extent);c.canProject(i,this.view.spatialReference)&&(i=c.project(i,this.view.spatialReference));const n=new b.Bitmap(t);n.x=i.xmin,n.y=i.ymax,n.resolution=i.width/t.naturalWidth,n.rotation=e.rotation,this._mapImageContainer.addChild(n),this._bitmapIndex.set(e,n)}))},n._fetchService=function(){return this._handles.remove("refresh-collections"),this._getParsedKML().then((e=>this._fetchSublayerService(this.layer,e)))},n._fetchSublayerService=function(e,t){const i=e.sublayers;if(!i||0===i.length)return h.resolve();const n=[];return i.forEach((e=>{const i=_.whenTrueOnce(e,"visible").then((()=>e.load())).then((()=>this._getGraphicsForSublayer(e,t))).then((t=>h.create((i=>{e.networkLink?i():(this._featuresMap.set(e,t),this._handles.add(p.schedule((()=>{this._refreshCollections(),i()})),"refresh-collections"))})))).then((()=>this._fetchSublayerService(e,e.sourceJSON||t)));e.visible&&n.push(i)})),h.all(n).then((()=>{}))},n._getParsedKML=function(){return v.fetchService(this.layer.url,this.view.spatialReference,this.layer.refreshInterval).then((e=>v.parseKML(e.data)))},n._getGraphicsForSublayer=async function(e,t){let i=null;return t.sublayers.some((t=>(i=t,t.id===e.id)))?{points:i.points&&await v.getGraphics(i.points),polylines:i.polylines&&await v.getGraphics(i.polylines),polygons:i.polygons&&await v.getGraphics(i.polygons),mapImages:i.mapImages}:null},n._refreshCollections=function(){const e=this.get("layer.visibleSublayers");this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),e&&e.length&&e.forEach((e=>{const t=this._featuresMap.get(e);t&&(this.allVisiblePoints.addMany(t.points),this.allVisiblePolylines.addMany(t.polylines),this.allVisiblePolygons.addMany(t.polygons),this.allVisibleMapImages.addMany(t.mapImages))}))},n._removeMapImage=function(e){const t=this._bitmapIndex.get(e);t&&(this._mapImageContainer.removeChild(t),this._bitmapIndex.delete(e))},i}(I.LayerView2DMixin(w));return t.__decorate([s.property()],V.prototype,"_pointsView",void 0),t.__decorate([s.property()],V.prototype,"_polylinesView",void 0),t.__decorate([s.property()],V.prototype,"_polygonsView",void 0),t.__decorate([s.property()],V.prototype,"_fetchingPromise",void 0),t.__decorate([s.property({dependsOn:["_fetchingPromise","_pointsView.updating","_polygonsView.updating","_polylinesView.updating"]})],V.prototype,"updating",void 0),V=t.__decorate([o.subclass("esri.views.2d.layers.KMLLayerView2D")],V),V}.apply(t,n))||(e.exports=r)},46351:(e,t,i)=>{var n,r;n=[t,i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(82438),i(24002),i(69788),i(85698),i(45168),i(57042),i(70034),i(96138)],void 0===(r=function(e,i,n,r,s,o,a,l,u,h,p,c,d,y,f,m,_,g,v){"use strict";const w=c.ofType({key:"type",base:f,typeMap:{rect:m,path:v,geometry:g}});t.LayerView2DMixin=e=>{let t=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).clips=new w,t.moving=!1,t.attached=!1,t.lastUpdateId=-1,t.updateRequested=!1,t}i._inheritsLoose(t,e);var n=t.prototype;return n.initialize=function(){var e;this.container||(this.container=new _.Container),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([y.init(this,"suspended",(e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()}),!0),y.init(this,["layer.opacity","container"],(()=>{var e,t;this.container&&(this.container.opacity=null!=(e=null==(t=this.layer)?void 0:t.opacity)?e:1)}),!0),y.init(this,["layer.blendMode"],(e=>{this.container&&(this.container.blendMode=e)}),!0),y.init(this,["layer.effect"],(e=>{this.container&&(this.container.effect=e)}),!0),this.clips.on("change",(()=>{this.container.clips=this.clips,this.notifyChange("clips")}))]),null!=(e=this.view)&&e.whenLayerView?this.view.whenLayerView(this.layer).then((e=>{e!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))},n.destroy=function(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1},n.isVisibleAtScale=function(e){let t=!0;const i=this.layer,n=i.minScale,r=i.maxScale;if(null!=n&&null!=r){let i=!n,s=!r;!i&&e<=n&&(i=!0),!s&&e>=r&&(s=!0),t=i&&s}return t},n.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())},n.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},n.isUpdating=function(){return!1},n.isRendering=function(){return!1},n.canResume=function(){return!!e.prototype.canResume.call(this)&&this.isVisibleAtScale(this.view.scale)},i._createClass(t,[{key:"updating",get:function(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}}]),t}(e);return n.__decorate([a.property({type:w,set(e){const t=d.referenceSetter(e,this._get("clips"),w);this._set("clips",t)}})],t.prototype,"clips",void 0),n.__decorate([a.property()],t.prototype,"moving",void 0),n.__decorate([a.property()],t.prototype,"attached",void 0),n.__decorate([a.property()],t.prototype,"container",void 0),n.__decorate([a.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),n.__decorate([a.property({readOnly:!0})],t.prototype,"updateParameters",void 0),n.__decorate([a.property()],t.prototype,"updateRequested",void 0),n.__decorate([a.property({dependsOn:["attached","updateRequested","suspended"]})],t.prototype,"updating",null),n.__decorate([a.property()],t.prototype,"view",void 0),t=n.__decorate([l.subclass("esri.views.2d.layers.LayerView2D")],t),t},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,n))||(e.exports=r)},75885:(e,t,i)=>{var n,r;n=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(37862),i(59286),i(52521),i(96349),i(74474)],void 0===(r=function(e,t,i,n,r,s,o,a,l,u,h,p,c,d,y){"use strict";let f=function(t){function i(e){var i;return(i=t.call(this,e)||this).layer=null,i.parent=null,i}e._inheritsLoose(i,t);var r=i.prototype;return r.initialize=function(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",i=this.layer&&this.layer.title||"no title";throw n.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${i}', id: '${t}')`,e),e}}))},r.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},r.getSuspendInfo=function(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e},r.isUpdating=function(){return!1},e._createClass(i,[{key:"fullOpacity",get:function(){const e=e=>null==e?1:e;return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))}},{key:"suspended",get:function(){return!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){return!this.suspended&&!0===this.layer.legendEnabled}},{key:"updating",get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}},{key:"visible",get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}}]),i}(y.HandleOwnerMixin(c.IdentifiableMixin(d.EsriPromiseMixin(p.EventedMixin(h)))));return t.__decorate([s.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],f.prototype,"fullOpacity",null),t.__decorate([s.property()],f.prototype,"layer",void 0),t.__decorate([s.property()],f.prototype,"parent",void 0),t.__decorate([s.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],f.prototype,"suspended",null),t.__decorate([s.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],f.prototype,"suspendInfo",null),t.__decorate([s.property({readOnly:!0,dependsOn:["suspended","layer.legendEnabled?"]})],f.prototype,"legendEnabled",null),t.__decorate([s.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],f.prototype,"updating",null),t.__decorate([s.property({dependsOn:["layer.visible"]})],f.prototype,"visible",null),f=t.__decorate([o.subclass("esri.views.layers.LayerView")],f),f}.apply(t,n))||(e.exports=r)},85698:(e,t,i)=>{var n,r;n=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(56162)],void 0===(r=function(e,t,i,n,r,s,o,a,l,u,h){"use strict";let p=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i}(h.JSONSupport);return p=t.__decorate([o.subclass("esri.views.layers.support.ClipArea")],p),p}.apply(t,n))||(e.exports=r)},45168:(e,t,i)=>{var n,r;n=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(85698)],void 0===(r=function(e,t,i,n,r,s,o,a,l,u,h){"use strict";var p;let c=p=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).type="rect",e.left=null,e.right=null,e.top=null,e.bottom=null,e}return e._inheritsLoose(i,t),i.prototype.clone=function(){return new p({left:this.left,right:this.right,top:this.top,bottom:this.bottom})},e._createClass(i,[{key:"version",get:function(){return(this._get("version")||0)+1}}]),i}(h);return t.__decorate([s.property({type:[Number,String],json:{write:!0}})],c.prototype,"left",void 0),t.__decorate([s.property({type:[Number,String],json:{write:!0}})],c.prototype,"right",void 0),t.__decorate([s.property({type:[Number,String],json:{write:!0}})],c.prototype,"top",void 0),t.__decorate([s.property({type:[Number,String],json:{write:!0}})],c.prototype,"bottom",void 0),t.__decorate([s.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],c.prototype,"version",null),c=p=t.__decorate([o.subclass("esri.views.layers.support.ClipRect")],c),c}.apply(t,n))||(e.exports=r)},70034:(e,t,i)=>{var n,r;n=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(27572),i(12997),i(50257),i(57167),i(26016),i(85698)],void 0===(r=function(e,t,i,n,r,s,o,a,l,u,h,p,c,d,y,f){"use strict";var m;const _={base:h,key:"type",typeMap:{extent:p,polygon:c}};let g=m=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).type="geometry",e.geometry=null,e}return e._inheritsLoose(i,t),i.prototype.clone=function(){return new m({geometry:this.geometry.clone()})},e._createClass(i,[{key:"version",get:function(){return(this._get("version")||0)+1}}]),i}(f);return t.__decorate([s.property({types:_,json:{read:d.fromJSON,write:!0}})],g.prototype,"geometry",void 0),t.__decorate([s.property({readOnly:!0,dependsOn:["geometry"]})],g.prototype,"version",null),g=m=t.__decorate([o.subclass("esri.views.layers.support.Geometry")],g),g}.apply(t,n))||(e.exports=r)},96138:(e,t,i)=>{var n,r;n=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(85698)],void 0===(r=function(e,t,i,n,r,s,o,a,l,u,h){"use strict";let p=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).type="path",e.path=[],e}return e._inheritsLoose(i,t),e._createClass(i,[{key:"version",get:function(){return(this._get("version")||0)+1}}]),i}(h);return t.__decorate([s.property({type:[[[Number]]],json:{write:!0}})],p.prototype,"path",void 0),t.__decorate([s.property({readOnly:!0,dependsOn:["path"]})],p.prototype,"version",null),p=t.__decorate([o.subclass("esri.views.layers.support.Path")],p),p}.apply(t,n))||(e.exports=r)}}]);