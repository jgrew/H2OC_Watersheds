(self.webpackChunkh2oc=self.webpackChunkh2oc||[]).push([[3191],{79561:(t,e)=>{var n;void 0===(n=function(t){"use strict";function n(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function r(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function i(t,e,n,r,i,s,o,a,c,u,l,f,h,p,d,_){const y=new Float32Array(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=r,y[4]=i,y[5]=s,y[6]=o,y[7]=a,y[8]=c,y[9]=u,y[10]=l,y[11]=f,y[12]=h,y[13]=p,y[14]=d,y[15]=_,y}function s(t,e){return new Float32Array(t,e,16)}const o=n();var a=Object.freeze({__proto__:null,create:n,clone:r,fromValues:i,createView:s,IDENTITY:o});e.IDENTITY=o,e.clone=r,e.create=n,e.createView=s,e.fromValues=i,e.mat4f32=a}.apply(e,[e]))||(t.exports=n)},57042:(t,e,n)=>{var r,i;r=[e,n(58797),n(74637),n(93681),n(74167)],void 0===(i=function(t,n,r,i,s){"use strict";const o=r("mapview-transitions-duration");let a=function(t){function e(){var e;return(e=t.apply(this,arguments)||this)._childrenSet=new Set,e.children=[],e._effectList=null,e}n._inheritsLoose(e,t);var r=e.prototype;return r.updateTransitionProperties=function(e,n){t.prototype.updateTransitionProperties.call(this,e,n),this._effectList&&(this._effectList.transitionStep(e,n),this._effectList.transitioning&&this.requestRender())},r.doRender=function(t){const e=this.createRenderParams(t);this.renderChildren(e)},r.addChild=function(t){return this.addChildAt(t,this.children.length)},r.addChildAt=function(t,e=this.children.length){if(!t)return t;if(this.contains(t))return t;const n=t.parent;return n&&n!==this&&n.removeChild(t),e>=this.children.length?this.children.push(t):this.children.splice(e,0,t),this._childrenSet.add(t),t.parent=this,t.stage=this.stage,this!==this.stage&&(t.clips=this.clips),this.requestRender(),t},r.contains=function(t){return this._childrenSet.has(t)},r.removeAllChildren=function(){this._childrenSet.clear();for(const t of this.children)this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null;this.children.length=0},r.removeChild=function(t){return this.contains(t)?this.removeChildAt(this.children.indexOf(t)):t},r.removeChildAt=function(t){let e;return t<0||t>=this.children.length?null:(e=this.children.splice(t,1)[0],this._childrenSet.delete(e),this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null,e)},r.sortChildren=function(t){return this.children.sort(t)},r.onAttach=function(){t.prototype.onAttach.call(this);const e=this.stage;for(const t of this.children)t.stage=e},r.onDetach=function(){t.prototype.onDetach.call(this);for(const t of this.children)t.stage=null},r.renderChildren=function(t){for(const e of this.children)e.beforeRender(t);for(const e of this.children)e.processRender(t);for(const e of this.children)e.afterRender(t)},r.createRenderParams=function(t){return{...t,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:t.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}},n._createClass(e,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t,this.requestRender()}},{key:"clips",get:function(){return this._clips},set:function(t){this._clips=t,this.children.forEach((e=>e.clips=t))}},{key:"computedEffects",get:function(){var t,e;return null!=(t=null==(e=this._effectList)?void 0:e.effects)?t:null}},{key:"effect",get:function(){var t,e;return null!=(t=null==(e=this._effectList)?void 0:e.effect)?t:""},set:function(t){(this._effectList||t)&&(this._effectList||(this._effectList=new s.default(o)),this._effectList.effect=t,this.requestRender())}}]),e}(i.DisplayObject);e.Container=a,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,r))||(t.exports=i)},93681:(t,e,n)=>{var r,i;r=[e,n(58797),n(74637),n(9720),n(59286)],void 0===(i=function(t,n,r,i,s){"use strict";const o=1/r("mapview-transitions-duration");let a=function(t){function e(){var e;return(e=t.apply(this,arguments)||this)._fadeOutResolver=null,e._fadeInResolver=null,e._clips=null,e.computedVisible=!0,e.computedOpacity=1,e.fadeTransitionEnabled=!1,e.inFadeTransition=!1,e._isReady=!1,e._opacity=1,e._stage=null,e._visible=!0,e}n._inheritsLoose(e,t);var r=e.prototype;return r.fadeIn=function(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=i.createResolver(),this.requestRender()),this._fadeInResolver.promise},r.fadeOut=function(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=i.createResolver(),this.requestRender()),this._fadeOutResolver.promise},r.beforeRender=function(t){this.updateTransitionProperties(t.deltaTime,t.state.scale)},r.afterRender=function(t){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)},r.setTransform=function(t){},r.processRender=function(t){this.stage&&this.computedVisible&&this.doRender(t)},r.requestRender=function(){this.stage&&this.stage.requestRender()},r.processDetach=function(){this.onDetach(),this.emit("detach")},r.updateTransitionProperties=function(t,e){if(this.fadeTransitionEnabled){const e=this._fadeOutResolver||!this.visible?0:this.opacity,n=this.computedOpacity;if(n===e)this.computedVisible=this.visible;else{const r=t*o;this.computedOpacity=n>e?Math.max(e,n-r):Math.min(e,n+r),this.computedVisible=this.computedOpacity>0;const i=e===this.computedOpacity;this.inFadeTransition=!i,i||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible},r.onAttach=function(){},r.onDetach=function(){},r.doRender=function(t){},r.ready=function(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())},n._createClass(e,[{key:"clips",get:function(){return this._clips},set:function(t){this._clips=t,this.requestRender()}},{key:"isReady",get:function(){return this._isReady}},{key:"opacity",get:function(){return this._opacity},set:function(t){this._opacity!==t&&(this._opacity=Math.min(1,Math.max(t,0)),this.requestRender())}},{key:"stage",get:function(){return this._stage},set:function(t){if(this._stage===t)return;const e=this._stage;this._stage=t,t?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):e.trashDisplayObject(this)}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this.requestRender())}}]),e}(s);e.DisplayObject=a,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,r))||(t.exports=i)},84896:(t,e,n)=>{var r,i;r=[e,n(49233)],void 0===(i=function(t,n){"use strict";let r=function(){function t(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}var e=t.prototype;return e.acquire=function(t,e,n,r,i,s,o,a,c){this.color=t,this.haloColor=e,this.haloSize=n,this.size=r,this.angle=i,this.offsetX=s,this.offsetY=o,this.hAnchor=a,this.vAnchor=c},e.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0},t}();r.pool=new n(r),e.TextProperties=r,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,r))||(t.exports=i)},20780:(t,e,n)=>{var r,i;r=[e,n(74637),n(73462),n(49359),n(3438),n(90920),n(80593),n(27975),n(48188),n(98043),n(53183),n(31581),n(84896)],void 0===(i=function(t,n,r,i,s,o,a,c,u,l,f,h,p){"use strict";const d=r.getLogger("esri.views.2d.engine.webgl.Utils"),_="geometry",y=[{name:_,strideInBytes:32,divisor:0}],v=[{name:_,strideInBytes:32,divisor:0}],T=[{name:_,strideInBytes:12,divisor:0}],E=[{name:_,strideInBytes:36,divisor:0}],g=[{name:_,strideInBytes:32,divisor:0}],m=[{name:_,strideInBytes:36,divisor:0}];function A(t){const e={};for(const n of t)e[n.name]=n.strideInBytes;return e}const L=A(y),I=A(v),S=A(T),R=A(E),V=A(g),O=A(m),G=[_],M=[_],C=[_],w=[_],b=[_];function F(t){switch(t){case f.WGLGeometryType.MARKER:return G;case f.WGLGeometryType.FILL:return M;case f.WGLGeometryType.LINE:return C;case f.WGLGeometryType.TEXT:return w;case f.WGLGeometryType.LABEL:return b}}function N(t){switch(t%4){case 0:case 2:return 4;case 1:case 3:return 1}}const x={[_]:35044};function D(t){switch(t){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}const P=new Map;e.C_FILL_STRIDE_SPEC=I,e.C_FILL_STRIDE_SPEC_DD=S,e.C_FILL_VERTEX_DEF=v,e.C_FILL_VERTEX_DEF_DD=T,e.C_ICON_STRIDE_SPEC=L,e.C_ICON_VERTEX_DEF=y,e.C_LABEL_STRIDE_SPEC=O,e.C_LABEL_VERTEX_DEF=m,e.C_LINE_STRIDE_SPEC=R,e.C_LINE_VERTEX_DEF=E,e.C_TEXT_STRIDE_SPEC=V,e.C_TEXT_VERTEX_DEF=g,e.C_VBO_GEOMETRY=_,e.C_VBO_INFO=x,e.C_VBO_PERINSTANCE="per_instance",e.C_VBO_PERINSTANCE_VV="per_instance_vv",e.allocateTypedArrayBuffer=function(t,e){switch(e%4){case 0:case 2:return new Uint32Array(Math.floor(t*e/4));case 1:case 3:return new Uint8Array(t*e)}},e.allocateTypedArrayBufferwithData=function(t,e){switch(e%4){case 0:case 2:return new Uint32Array(t);case 1:case 3:return new Uint8Array(t)}},e.copyMeshData=function(t,e,n,r,i,s,o){for(const e in s){const r=s[e].stride,o=N(r),a=s[e].data,c=n[e].data,u=r*i.vertexCount/o,l=r*t/o,f=r*i.vertexFrom/o;for(let t=0;t<u;++t)c[t+l]=a[t+f]}const a=i.indexCount;for(let n=0;n<a;++n)r[n+e]=o[n+i.indexFrom]-i.vertexFrom+t},e.createGeometryData=function(t,e){const n=[];for(let r=0;r<5;++r){const i=F(r),s={};for(const t of i)s[t]={data:e(r,t)};n.push({data:t(r),buffers:s})}return n},e.createProgramDescriptor=(t,e)=>{if(!P.has(t)){const n=function(t){const e={};for(const n in t){const r=t[n];let i=0;e[n]=r.map((t=>{const e={...t,normalized:t.normalized||!1,divisor:t.divisor||0,offset:i,stride:0};return i+=t.count*D(t.type),e})),e[n].forEach((t=>t.stride=i))}return e}(e),r={strides:(t=>{const e={};for(const n in t){const r=t[n];e[n]=r.length?r[0].stride:0}return e})(n),bufferLayouts:n,attributes:(t=>{const e={};for(const n in t)for(const r of t[n])e[r.name]=r.location;return e})(e)};P.set(t,r)}return P.get(t)},e.createTextureFromTexelData=function(t,e){let n,r;return s.isPowerOfTwo(e.width)&&s.isPowerOfTwo(e.height)?(n=!0,r=9987):(n=!1,r=9729),new c(t,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,hasMipmap:n,samplingMode:r,wrapMode:33071,flipped:!0},e)},e.geometryToMappedGeometry=function(t){return{vertexFrom:void 0,vertexTo:void 0,geometry:t}},e.getBytes=D,e.getCapType=function(t,e){switch(t){case"butt":return 0;case"round":return e?2:1;case"square":return 2;default:return d.error(new i("mapview-invalid-type",`Cap type ${t} is not a valid option. Defaulting to round`)),1}},e.getJoinType=function(t){switch(t){case"miter":return 2;case"bevel":return 0;case"round":return 1;default:return d.error(new i("mapview-invalid-type",`Join type ${t} is not a valid option. Defaulting to round`)),1}},e.getNamedBuffers=F,e.getPixelArrayCtor=function(t){switch(t){case 5121:return Uint8Array;case 32819:return Uint16Array;case 5126:return Float32Array;default:return void d.error(new i("webgl-utils",`Unable to handle type ${t}`))}},e.getPixelBytes=function(t){switch(t){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:return void d.error(new i("webgl-utils",`Unable to handle type ${t}`))}},e.getStrides=function(t,e){switch(t){case f.WGLGeometryType.MARKER:return L;case f.WGLGeometryType.FILL:return e?S:I;case f.WGLGeometryType.LINE:return R;case f.WGLGeometryType.TEXT:return V;case f.WGLGeometryType.LABEL:return O}},e.getTextProperties=function(t){return p.TextProperties.pool.acquire(t.color?h.copyAndPremultiply(t.color):[255,255,255,255],t.haloColor?h.copyAndPremultiply(t.haloColor):[255,255,255,255],o.pt2px(t.haloSize),o.pt2px(t.font.size),t.angle*Math.PI/180,t.xoffset/t.font.size,t.yoffset/t.font.size,"left"===t.horizontalAlignment?0:"right"===t.horizontalAlignment?1:.5,"top"===t.verticalAlignment?0:"bottom"===t.verticalAlignment?1:.5)},e.getTransformParams=function(t){const{transform:e,hasZ:n,hasM:r}=t;return{transform:e,hasZ:n,hasM:r}},e.getVVType=function(t){switch(t){case"opacity":return f.VVType.OPACITY;case"color":return f.VVType.COLOR;case"rotation":return f.VVType.ROTATION;case"size":return f.VVType.SIZE;default:return d.error(`Cannot interpret unknown vv: ${t}`),null}},e.isDefined=function(t){return null!=t},e.isNumber=function(t){return"number"==typeof t},e.strideToPackingFactor=N,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,r))||(t.exports=i)},31581:(t,e,n)=>{var r,i;r=[e,n(74518)],void 0===(i=function(t,n){"use strict";const r=[0,0,0,0];function i(t,e){return Array.isArray(e)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):(t[0]=e.r,t[1]=e.g,t[2]=e.b,t[3]=e.a),t}function s(t,e=0,n=!1){const r=t[e+3];return t[e+0]*=r,t[e+1]*=r,t[e+2]*=r,n||(t[e+3]*=255),t}e.copyAndPremultiply=function(t){return s(i([],t))},e.premultiplyAlpha=s,e.premultiplyAlphaRGBA=function(t){if(!t)return 0;const{r:e,g:r,b:i,a:s}=t,o=e*s,a=r*s,c=i*s,u=255*s;return n.i8888to32(o,a,c,u)},e.premultiplyAlphaRGBAArray=function(t){if(!t)return 0;const[e,r,i,s]=t,o=e*(s/255),a=r*(s/255),c=i*(s/255),u=s;return n.i8888to32(o,a,c,u)},e.premultiplyAlphaUint32=function(t){return s(i(r,t)),n.i8888to32(r[0],r[1],r[2],r[3])},e.white=[255,255,255,1],Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,r))||(t.exports=i)},39241:(t,e)=>{var n;void 0===(n=function(t){"use strict";e.ANGLE_FACTOR_256=256/360,e.ATTRIBUTE_DATA_ANIMATION=1,e.ATTRIBUTE_DATA_DD0=3,e.ATTRIBUTE_DATA_DD1=3,e.ATTRIBUTE_DATA_FILTER_FLAGS=0,e.ATTRIBUTE_DATA_VV=2,e.ATTRIBUTE_STORE_TEXTURE_SIZE=1024,e.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}},e.COLLISION_BOX_PADDING=16,e.COLLISION_BUCKET_SIZE=128,e.COLLISION_EARLY_REJECT_BUCKET_SIZE=16,e.COLLISION_MAX_ZOOM_DELTA=1,e.COLLISION_PLACEMENT_PADDING=8,e.COLLISION_TILE_BOX_SIZE=4,e.DEBUG_LABELS=!1,e.DOT_DENSITY_MAX_FIELDS=8,e.EFFECT_FLAG_0=4,e.EXTRUDE_SCALE=64,e.FILTER_FLAG_0=2,e.GLYPH_SIZE=24,e.HEURISTIC_GLYPHS_PER_FEATURE=10,e.HEURISTIC_GLYPHS_PER_LINE=50,e.HIGHLIGHT_FLAG=1,e.HITTEST_SEARCH_SIZE=6,e.MAGIC_LABEL_LINE_HEIGHT=29,e.MAX_FILTERS=2,e.MAX_GPU_UPLOADS_PER_FRAME=2,e.NAN_MAGIC_NUMBER=1e-30,e.PICTURE_FILL_COLOR=4294967295,e.RASTER_TILE_SIZE=256,e.SPRITE_PADDING=2,e.TEXTURE_BINDING_ATTRIBUTE_DATA_0=1,e.TEXTURE_BINDING_ATTRIBUTE_DATA_1=2,e.TEXTURE_BINDING_ATTRIBUTE_DATA_2=3,e.TEXTURE_BINDING_ATTRIBUTE_DATA_3=4,e.TEXTURE_BINDING_BITMAP=0,e.TEXTURE_BINDING_GLYPH_ATLAS=0,e.TEXTURE_BINDING_HIGHLIGHT_0=5,e.TEXTURE_BINDING_HIGHLIGHT_1=6,e.TEXTURE_BINDING_RENDERER_0=5,e.TEXTURE_BINDING_RENDERER_1=6,e.TEXTURE_BINDING_SPRITE_ATLAS=0,e.TEXT_PLACEMENT_PADDING=8,e.THIN_LINE_THRESHOLD=2.5,e.TILE_SIZE=512,e.VTL_HIGH_RES_CUTOFF=1.15,e.VTL_TEXTURE_BINDING_UNIT_GLYPHS=6,e.VTL_TEXTURE_BINDING_UNIT_SPRITES=5,e.WEBGL_MAX_INNER_STOPS=6,e.WEBGL_MAX_STOPS=8,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,[e]))||(t.exports=n)},53183:(t,e)=>{var n;void 0===(n=function(t){"use strict";var n,r,i,s,o,a,c;(n=t.WGLGeometryType||(e.WGLGeometryType={}))[n.FILL=0]="FILL",n[n.LINE=1]="LINE",n[n.MARKER=2]="MARKER",n[n.TEXT=3]="TEXT",n[n.LABEL=4]="LABEL",(r=t.WGLGeometryTransactionStatus||(e.WGLGeometryTransactionStatus={}))[r.SUCCEEDED=0]="SUCCEEDED",r[r.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY",(i=t.WGLDrawPhase||(e.WGLDrawPhase={}))[i.NONE=0]="NONE",i[i.MAP=1]="MAP",i[i.LABEL=2]="LABEL",i[i.LABEL_ALPHA=4]="LABEL_ALPHA",i[i.HITTEST=8]="HITTEST",i[i.HIGHLIGHT=16]="HIGHLIGHT",i[i.CLIP=32]="CLIP",i[i.DEBUG=64]="DEBUG",i[i.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES",(s=t.VVType||(e.VVType={}))[s.SIZE=0]="SIZE",s[s.COLOR=1]="COLOR",s[s.OPACITY=2]="OPACITY",s[s.ROTATION=3]="ROTATION",(o=t.WGLVVFlag||(e.WGLVVFlag={}))[o.NONE=0]="NONE",o[o.OPACITY=1]="OPACITY",o[o.COLOR=2]="COLOR",o[o.ROTATION=4]="ROTATION",o[o.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",o[o.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",o[o.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",o[o.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE",(a=t.WGLVVTarget||(e.WGLVVTarget={}))[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE",(c=t.MosaicType||(e.MosaicType={}))[c.SPRITE=0]="SPRITE",c[c.GLYPH=1]="GLYPH",Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,[e]))||(t.exports=n)},26653:(t,e,n)=>{var r,i;r=[e,n(58797),n(49359),n(53183),n(1291)],void 0===(i=function(t,n,r,i,s){"use strict";function o(t,e=!1){const n=i.WGLVVFlag.SIZE_FIELD_STOPS|i.WGLVVFlag.SIZE_MINMAX_VALUE|i.WGLVVFlag.SIZE_SCALE_STOPS|i.WGLVVFlag.SIZE_UNIT_VALUE,r=(t&(i.WGLVVTarget.FIELD_TARGETS_OUTLINE|i.WGLVVTarget.MINMAX_TARGETS_OUTLINE|i.WGLVVTarget.SCALE_TARGETS_OUTLINE|i.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return e?n&r:n&~r}function a(t){const e=o(t,!1);return t&(i.WGLVVFlag.COLOR|i.WGLVVFlag.OPACITY|i.WGLVVFlag.ROTATION|e)}let c=function(){function t(t){this._data=0,this._data=t}t.load=function(t){const e=this.shared;return e.data=t,e};var e=t.prototype;return e.setBit=function(t,e){const n=1<<t;e?this._data|=n:this._data&=~n},e.bit=function(t){return(this._data&1<<t)>>t},e.setBits=function(t,e,n){for(let r=e,i=0;r<n;r++,i++)this.setBit(r,0!=(t&1<<i))},e.bits=function(t,e){let n=0;for(let r=t,i=0;r<e;r++,i++)n|=this.bit(r)<<i;return n},e.hasVV=function(){return!1},e.setVV=function(t,e){},e.getVariation=function(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}},e.getVariationHash=function(){return this._data&~(7&this.textureBinding)},n._createClass(t,[{key:"data",set:function(t){this._data=t},get:function(){return this._data}},{key:"geometryType",get:function(){return this.bits(8,11)},set:function(t){this.setBits(t,8,11)}},{key:"mapAligned",get:function(){return!!this.bit(20)},set:function(t){this.setBit(20,t)}},{key:"sdf",get:function(){return!!this.bit(11)},set:function(t){this.setBit(11,t)}},{key:"pattern",get:function(){return!!this.bit(12)},set:function(t){this.setBit(12,t)}},{key:"textureBinding",get:function(){return this.bits(0,8)},set:function(t){this.setBits(t,0,8)}},{key:"geometryTypeString",get:function(){switch(this.geometryType){case i.WGLGeometryType.FILL:return"fill";case i.WGLGeometryType.MARKER:return"marker";case i.WGLGeometryType.LINE:return"line";case i.WGLGeometryType.TEXT:return"text";case i.WGLGeometryType.LABEL:return"label";default:throw new r(`Unable to handle unknown geometryType: ${this.geometryType}`)}}}]),t}();c.shared=new c(0);const u=t=>function(t){function e(){return t.apply(this,arguments)||this}n._inheritsLoose(e,t);var r=e.prototype;return r.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue},r.setVV=function(e,n){t.prototype.setVV.call(this,e,n);const r=o(e,n)&e;this.vvSizeMinMaxValue=!!(r&i.WGLVVFlag.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(r&i.WGLVVFlag.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(r&i.WGLVVFlag.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(r&i.WGLVVFlag.SIZE_SCALE_STOPS)},n._createClass(e,[{key:"vvSizeMinMaxValue",get:function(){return 0!==this.bit(16)},set:function(t){this.setBit(16,t)}},{key:"vvSizeScaleStops",get:function(){return 0!==this.bit(17)},set:function(t){this.setBit(17,t)}},{key:"vvSizeFieldStops",get:function(){return 0!==this.bit(18)},set:function(t){this.setBit(18,t)}},{key:"vvSizeUnitValue",get:function(){return 0!==this.bit(19)},set:function(t){this.setBit(19,t)}}]),e}(t),l=t=>function(t){function e(){return t.apply(this,arguments)||this}n._inheritsLoose(e,t);var r=e.prototype;return r.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvRotation},r.setVV=function(e,n){t.prototype.setVV.call(this,e,n),this.vvRotation=!n&&!!(e&i.WGLVVFlag.ROTATION)},n._createClass(e,[{key:"vvRotation",get:function(){return 0!==this.bit(15)},set:function(t){this.setBit(15,t)}}]),e}(t),f=t=>function(t){function e(){return t.apply(this,arguments)||this}n._inheritsLoose(e,t);var r=e.prototype;return r.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvColor},r.setVV=function(e,n){t.prototype.setVV.call(this,e,n),this.vvColor=!n&&!!(e&i.WGLVVFlag.COLOR)},n._createClass(e,[{key:"vvColor",get:function(){return 0!==this.bit(13)},set:function(t){this.setBit(13,t)}}]),e}(t),h=t=>function(t){function e(){return t.apply(this,arguments)||this}n._inheritsLoose(e,t);var r=e.prototype;return r.hasVV=function(){return t.prototype.hasVV.call(this)||this.vvOpacity},r.setVV=function(e,n){t.prototype.setVV.call(this,e,n),this.vvOpacity=!n&&!!(e&i.WGLVVFlag.OPACITY)},n._createClass(e,[{key:"vvOpacity",get:function(){return 0!==this.bit(14)},set:function(t){this.setBit(14,t)}}]),e}(t);let p=function(t){function e(){return t.apply(this,arguments)||this}return n._inheritsLoose(e,t),e.load=function(t){const e=this.shared;return e.data=t,e},e.from=function(t,e){const n=this.load(0);return n.geometryType=i.WGLGeometryType.FILL,e?n.dotDensity=!0:n.setVV(t,!1),n.data},e.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),dotDensity:this.dotDensity,vvColor:this.vvColor,vvOpacity:this.vvOpacity}},n._createClass(e,[{key:"dotDensity",get:function(){return!!this.bit(15)},set:function(t){this.setBit(15,t)}}]),e}(f(h(c)));p.shared=new p(0);let d=function(t){function e(){return t.apply(this,arguments)||this}return n._inheritsLoose(e,t),e.load=function(t){const e=this.shared;return e.data=t,e},e.from=function(t){const e=this.load(0);return e.geometryType=i.WGLGeometryType.MARKER,e.setVV(t,!1),e.data},e.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},e}(f(h(l(u(c)))));d.shared=new d(0);let _=function(t){function e(){return t.apply(this,arguments)||this}return n._inheritsLoose(e,t),e.load=function(t){const e=this.shared;return e.data=t,e},e.from=function(t,e){const n=this.load(0);return n.geometryType=i.WGLGeometryType.LINE,n.setVV(t,e),n.data},e.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},e}(f(h(u(c))));_.shared=new _(0);let y=function(t){function e(){return t.apply(this,arguments)||this}return n._inheritsLoose(e,t),e.load=function(t){const e=this.shared;return e.data=t,e},e.from=function(t){const e=this.load(t);return e.geometryType=i.WGLGeometryType.TEXT,e.setVV(t,!1),e.data},e.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},e}(f(h(l(u(c)))));y.shared=new y(0);let v=function(t){function e(){return t.apply(this,arguments)||this}return n._inheritsLoose(e,t),e.load=function(t){const e=this.shared;return e.data=t,e},e.from=function(t,e){const n=this.load(0);return n.geometryType=i.WGLGeometryType.LABEL,n.setVV(t,!1),n.mapAligned=!!s.isMapAligned(e),n.data},e.prototype.getVariation=function(){return{...t.prototype.getVariation.call(this),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}},e}(u(c));v.shared=new v(0),e.FillMaterialKey=p,e.LabelMaterialKey=v,e.LineMaterialKey=_,e.MarkerMaterialKey=d,e.MaterialKeyBase=c,e.TextMaterialKey=y,e.createMaterialKey=function(t,e,n,r,s){switch(t){case i.WGLGeometryType.FILL:return p.from(e,r);case i.WGLGeometryType.LINE:return _.from(e,n);case i.WGLGeometryType.MARKER:return d.from(e);case i.WGLGeometryType.TEXT:return y.from(e);case i.WGLGeometryType.LABEL:return v.from(e,s);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${t}`)}},e.getFillVVFlags=function(t){return t&(i.WGLVVFlag.COLOR|i.WGLVVFlag.OPACITY)},e.getLabelVVFlags=function(t){return t&o(t,!1)},e.getLineVVFlags=function(t,e){if(e)return t&o(t,!0);const n=o(t,!1);return t&(i.WGLVVFlag.COLOR|i.WGLVVFlag.OPACITY|n)},e.getMarkerVVFlags=a,e.getSizeFlagsMask=o,e.getTextVVFlags=function(t){return a(t)},e.hydrateMaterialKey=function(t){switch(c.load(t).geometryType){case i.WGLGeometryType.MARKER:return new d(t);case i.WGLGeometryType.FILL:return new p(t);case i.WGLGeometryType.LINE:return new _(t);case i.WGLGeometryType.TEXT:return new y(t);case i.WGLGeometryType.LABEL:return new v(t)}},Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,r))||(t.exports=i)},1291:(t,e)=>{var n;void 0===(n=function(t){"use strict";e.isMapAligned=function(t){switch(t){case"above-along":case"below-along":case"center-along":return 1;default:return 0}},Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,[e]))||(t.exports=n)},74518:(t,e)=>{var n;void 0===(n=function(t){"use strict";const n=new Float32Array(1),r=new Uint32Array(n.buffer);function i(t,e,n){return Math.round(Math.max(Math.min(t,n),e))}e.i16=function(t){return i(t,-32768,32767)},e.i1616to32=function(t,e){return 65535&t|e<<16},e.i32=function(t){return i(t,-2147483648,2147483647)},e.i8=function(t){return i(t,-128,127)},e.i8816to32=function(t,e,n){return 255&t|(255&e)<<8|n<<16},e.i8888to32=function(t,e,n,r){return 255&t|(255&e)<<8|(255&n)<<16|r<<24},e.numTo32=function(t){return 0|t},e.toFloat32=function(t){return r[0]=t,n[0]},e.toUint32=function(t){return n[0]=t,r[0]},e.u16=function(t){return i(t,0,65535)},e.u32=function(t){return i(t,0,4294967295)},e.u32to4Xu8=function(t){return[255&t,(65280&t)>>>8,(16711680&t)>>>16,(4278190080&t)>>>24]},e.u8=function(t){return i(t,0,255)},Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,[e]))||(t.exports=n)},74167:(t,e,n)=>{var r,i;r=[e,n(58797),n(92231),n(73462),n(49359),n(81160),n(85531),n(62280)],void 0===(i=function(t,n,r,i,s,o,a,c){"use strict";let u=function(){function t(t=200){this.duration=t,this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this._effect="",this._effects=[],this._scale=0}var e=t.prototype;return e.transitionStep=function(t,e){this._applyTimeTransition(t),this._updateForScale(e)},e._transitionTo=function(t){this.scale>0&&d(this._current,t,this.scale)?(this._final=t,this._to=r.clone(t),_(this._current,this._to,this.scale),this._from=r.clone(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._effects=this._current[0]?r.clone(this._current[0].effects):[]},e._applyTimeTransition=function(t){if(!this._to)return;this._time+=t;const e=Math.min(1,this._time/this.duration);for(let t=0;t<this._current.length;t++){const n=this._current[t],r=this._from[t],i=this._to[t];n.scale=y(r.scale,i.scale,e);for(let t=0;t<n.effects.length;t++){const s=n.effects[t],o=r.effects[t],a=i.effects[t];s.interpolate(o,a,e)}}1===e&&(this._current=this._final,this._effects=this._current[0]?r.clone(this._current[0].effects):[],this._from=this._to=this._final=null)},e._updateForScale=function(t){if(0===this._current.length)return;this._scale=t;const e=this._current,n=this._current.length-1;let r,i,s=1;if(1===e.length||t>=e[0].scale)i=r=e[0].effects;else if(t<=e[n].scale)i=r=e[n].effects;else for(let o=0;o<n;o++){const n=e[o],a=e[o+1];if(n.scale>=t&&a.scale<=t){s=(t-n.scale)/(a.scale-n.scale),r=n.effects,i=a.effects;break}}for(let t=0;t<this._effects.length;t++)this._effects[t].interpolate(r[t],i[t],s)},n._createClass(t,[{key:"effect",get:function(){return this._effect},set:function(t){if(t=t||"",this._effect===t)return;this._effect=t;const e=l(t);Array.isArray(e)?this._transitionTo(e):(this._transitionTo([]),i.getLogger("esri.views.layers.effects.EffectList").warn("Invalid Effect",{effect:t,error:e}))}},{key:"hasEffects",get:function(){return this.transitioning||!!this._effects.length}},{key:"effects",get:function(){return this._effects}},{key:"scale",get:function(){return this._scale}},{key:"transitioning",get:function(){return null!==this._to}}]),t}();function l(t){if(!t)return[];if("string"==typeof t){const e=c.parse(t);return e.error?e.error:[{scale:-1,effects:e.effects}]}const e=[];for(const n of t){if(!isFinite(n.scale)||n.scale<=0)return new s("effect:invalid-scale","scale must be finite and greater than 0",{stop:n});const t=c.parse(n.value);if(t.error)return t.error;e.push({scale:n.scale,effects:t.effects})}e.sort(((t,e)=>e.effects.length-t.effects.length));for(let t=0;t<e.length-1;t++){if(!h(e[t].effects,e[t+1].effects))return new s("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[t].effects,b:e[t+1].effects});p(e[t].effects,e[t+1].effects)}return e.sort(((t,e)=>e.scale-t.scale)),e}function f(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new a.ColorMatrixEffect(t.type,0);case"saturate":case"brightness":case"contrast":return new a.ColorMatrixEffect(t.type,1);case"opacity":return new a.OpacityEffect(1);case"hue-rotate":return new a.HueRotateEffect(0);case"blur":return new a.BlurEffect(0);case"drop-shadow":return new a.DropShadowEffect(0,0,0,[...o.getNamedColor("transparent")]);case"bloom":return new a.BloomEffect(0,0,0)}}function h(t,e){const n=t.length>e.length?t:e;return(t.length>e.length?e:t).every(((t,e)=>t.type===n[e].type))}function p(t,e){const n=t.length>e.length?t:e,r=t.length>e.length?e:t;for(let t=r.length;t<n.length;t++)r.push(f(n[t]))}function d(t,e,n){var r,i,s,o;return null==(r=t[0])||!r.effects||null==(i=e[0])||!i.effects||!((-1===(null==(s=t[0])?void 0:s.scale)||-1===(null==(o=e[0])?void 0:o.scale))&&(t.length>1||e.length>1)&&n<=0)&&h(t[0].effects,e[0].effects)}function _(t,e,n){var r,i;const s=t.length>e.length?t:e,o=t.length>e.length?e:t,a=o[o.length-1],c=null!=(r=null==a?void 0:a.scale)?r:n,u=null!=(i=null==a?void 0:a.effects)?i:[];for(let t=o.length;t<s.length;t++)o.push({scale:c,effects:[...u]});for(let t=0;t<s.length;t++)o[t].scale=-1===o[t].scale?n:o[t].scale,s[t].scale=-1===s[t].scale?n:s[t].scale,p(o[t].effects,s[t].effects)}function y(t,e,n){return t+(e-t)*n}e.canInterpolateEffectStops=d,e.canInterpolateEffects=h,e.convertEffectToStops=l,e.default=u,e.normalizeEffectStops=_,e.normalizeEffects=p,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,r))||(t.exports=i)},16182:(t,e,n)=>{var r,i;r=[e,n(32849)],void 0===(i=function(t,n){"use strict";e.brightness=(t,e)=>{const r=n.set(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return n.transpose(r,r)},e.contrast=(t,e)=>{const r=n.set(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return n.transpose(r,r)},e.grayscale=(t,e)=>{const r=1-e,i=n.set(t,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return n.transpose(i,i)},e.invert=(t,e)=>{const r=1-2*e,i=e,s=n.set(t,r,0,0,i,0,r,0,i,0,0,r,i,0,0,0,1);return n.transpose(s,s)},e.rotateHue=(t,e)=>{const r=Math.sin(e*Math.PI/180),i=Math.cos(e*Math.PI/180),s=n.set(t,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return n.transpose(s,s)},e.saturate=(t,e)=>{const r=e,i=n.set(t,.213+.787*r,.715-.715*r,.072-.072*r,0,.213-.213*r,.715+.285*r,.072-.072*r,0,.213-.213*r,.715-.715*r,.072+.928*r,0,0,0,0,1);return n.transpose(i,i)},e.sepia=(t,e)=>{const r=1-e,i=n.set(t,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return n.transpose(i,i)},Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,r))||(t.exports=i)},85531:(t,e,n)=>{var r,i;r=[e,n(58797),n(79561),n(16182)],void 0===(i=function(t,n,r,i){"use strict";let s=function(){function t(t,e,n){this.strength=t,this.radius=e,this.threshold=n,this.type="bloom"}var e=t.prototype;return e.interpolate=function(t,e,n){this.strength=f(t.strength,e.strength,n),this.radius=f(t.radius,e.radius,n),this.threshold=f(t.threshold,e.threshold,n)},e.clone=function(){return new t(this.strength,this.radius,this.threshold)},t}(),o=function(){function t(t){this.radius=t,this.type="blur"}var e=t.prototype;return e.interpolate=function(t,e,n){this.radius=Math.round(f(t.radius,e.radius,n))},e.clone=function(){return new t(this.radius)},t}(),a=function(){function t(t,e){this.type=t,this.amount=e,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}var e=t.prototype;return e.interpolate=function(t,e,n){this.amount=f(t.amount,e.amount,n),this._updateMatrix()},e.clone=function(){return new t(this.type,this.amount)},e._updateMatrix=function(){const t=this._colorMatrix||r.create();switch(this.type){case"brightness":this._colorMatrix=i.brightness(t,this.amount);break;case"contrast":this._colorMatrix=i.contrast(t,this.amount);break;case"grayscale":this._colorMatrix=i.grayscale(t,this.amount);break;case"invert":this._colorMatrix=i.invert(t,this.amount);break;case"saturate":this._colorMatrix=i.saturate(t,this.amount);break;case"sepia":this._colorMatrix=i.sepia(t,this.amount)}},n._createClass(t,[{key:"colorMatrix",get:function(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}}]),t}(),c=function(){function t(t,e,n,r){this.offsetX=t,this.offsetY=e,this.blurRadius=n,this.color=r,this.type="drop-shadow"}var e=t.prototype;return e.interpolate=function(t,e,n){this.offsetX=f(t.offsetX,e.offsetX,n),this.offsetY=f(t.offsetY,e.offsetY,n),this.blurRadius=f(t.blurRadius,e.blurRadius,n),this.color[0]=Math.round(f(t.color[0],e.color[0],n)),this.color[1]=Math.round(f(t.color[1],e.color[1],n)),this.color[2]=Math.round(f(t.color[2],e.color[2],n)),this.color[3]=f(t.color[3],e.color[3],n)},e.clone=function(){return new t(this.offsetX,this.offsetY,this.blurRadius,[...this.color])},t}(),u=function(){function t(t){this.angle=t,this.type="hue-rotate"}var e=t.prototype;return e.interpolate=function(t,e,n){this.angle=f(t.angle,e.angle,n),this._updateMatrix()},e.clone=function(){return new t(this.angle)},e._updateMatrix=function(){const t=this._colorMatrix||r.create();this._colorMatrix=i.rotateHue(t,this.angle)},n._createClass(t,[{key:"colorMatrix",get:function(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}}]),t}(),l=function(){function t(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}var e=t.prototype;return e.interpolate=function(t,e,n){this.amount=f(t.amount,e.amount,n)},e.clone=function(){return new t(this.amount)},t}();function f(t,e,n){return t+(e-t)*n}e.BloomEffect=s,e.BlurEffect=o,e.ColorMatrixEffect=a,e.DropShadowEffect=c,e.HueRotateEffect=u,e.OpacityEffect=l,e.isColorMatrixEffect=function(t){return"colorMatrix"in t},Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,r))||(t.exports=i)},62280:(t,e,n)=>{var r,i;r=[e,n(49359),n(81160),n(14818),n(85531)],void 0===(i=function(t,n,r,i,s){"use strict";var o=i.createCommonjsModule((function(t){i.commonjsGlobal,t.exports&&(t.exports=function(){function t(e,n,r,i){this.message=e,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(t,Error),t.buildMessage=function(t,e){var n={literal:function(t){return'"'+i(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?s(t.parts[e][0])+"-"+s(t.parts[e][1]):s(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function i(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function s(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function o(t){return n[t.type](t)}return"Expected "+function(t){var e,n,r=new Array(t.length);for(e=0;e<t.length;e++)r[e]=o(t[e]);if(r.sort(),r.length>0){for(e=1,n=1;e<r.length;e++)r[e-1]!==r[e]&&(r[n]=r[e],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+function(t){return t?'"'+i(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:function(e,n){n=void 0!==n?n:{};var r,i={},s={start:ot},o=ot,a=nt("none"),c="none",u=tt("none",!1),l=tt(")",!1),f=tt(",",!1),h=nt("whitespace"),p=/^[ \t\n\r]/,d=et([" ","\t","\n","\r"],!1,!1),_=nt("function"),y=tt("(",!1),v=nt("identifier"),T=/^[a-z\-]/,E=et([["a","z"],"-"],!1,!1),g=nt("percentage"),m=tt("%",!1),A=nt("length"),L=tt("px",!1),I=tt("cm",!1),S=tt("mm",!1),R=tt("in",!1),V=tt("pt",!1),O=tt("pc",!1),G=nt("angle"),M=tt("deg",!1),C=tt("rad",!1),w="grad",b=tt("grad",!1),F="turn",N=tt("turn",!1),x=nt("number"),D=nt("color"),P=tt("#",!1),U=/^[0-9a-fA-F]/,B=et([["0","9"],["a","f"],["A","F"]],!1,!1),z=/^[+\-]/,W=et(["+","-"],!1,!1),X=/^[0-9]/,k=et([["0","9"]],!1,!1),H=tt(".",!1),Y=tt("e",!1),Z=0,j=0,q=[{line:1,column:1}],K=0,$=[],J=0;if("startRule"in n){if(!(n.startRule in s))throw new Error("Can't start parsing from rule \""+n.startRule+'".');o=s[n.startRule]}function Q(){return e.substring(j,Z)}function tt(t,e){return{type:"literal",text:t,ignoreCase:e}}function et(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function nt(t){return{type:"other",description:t}}function rt(t){var n,r=q[t];if(r)return r;for(n=t-1;!q[n];)n--;for(r={line:(r=q[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return q[t]=r,r}function it(t,e){var n=rt(t),r=rt(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function st(t){Z<K||(Z>K&&(K=Z,$=[]),$.push(t))}function ot(){var t;return(t=at())===i&&(t=function(){var t,e;if(t=[],(e=ct())!==i)for(;e!==i;)t.push(e),e=ct();else t=i;return t}()),t}function at(){var t,n;return J++,t=Z,lt()!==i?(e.substr(Z,4)===c?(n=c,Z+=4):(n=i,0===J&&st(u)),n!==i&&lt()!==i?(j=t,t=[]):(Z=t,t=i)):(Z=t,t=i),J--,t===i&&0===J&&st(a),t}function ct(){var t,n,r,s;return t=Z,lt()!==i&&(n=function(){var t,n,r;return J++,t=Z,(n=ft())!==i?(40===e.charCodeAt(Z)?(r="(",Z++):(r=i,0===J&&st(y)),r!==i?(j=t,t=n=n):(Z=t,t=i)):(Z=t,t=i),J--,t===i&&(n=i,0===J&&st(_)),t}())!==i&&lt()!==i?((r=function(){var t,n,r,s,o,a,c,u;if(t=Z,(n=ut())!==i){for(r=[],s=Z,(o=lt())!==i?(44===e.charCodeAt(Z)?(a=",",Z++):(a=i,0===J&&st(f)),a===i&&(a=null),a!==i&&(c=lt())!==i&&(u=ut())!==i?s=o=[o,a,c,u]:(Z=s,s=i)):(Z=s,s=i);s!==i;)r.push(s),s=Z,(o=lt())!==i?(44===e.charCodeAt(Z)?(a=",",Z++):(a=i,0===J&&st(f)),a===i&&(a=null),a!==i&&(c=lt())!==i&&(u=ut())!==i?s=o=[o,a,c,u]:(Z=s,s=i)):(Z=s,s=i);r!==i?(j=t,t=n=function(t,e){return e.length>0?function(t,e,n){return[t].concat(function(t,e){return t.map((function(t){return t[3]}))}(e))}(t,e):[t]}(n,r)):(Z=t,t=i)}else Z=t,t=i;return t}())===i&&(r=null),r!==i&&lt()!==i?(41===e.charCodeAt(Z)?(s=")",Z++):(s=i,0===J&&st(l)),s!==i&&lt()!==i?(j=t,t=function(t,e){return{type:"function",name:t,parameters:e||[]}}(n,r)):(Z=t,t=i)):(Z=t,t=i)):(Z=t,t=i),t}function ut(){var t,e;return t=Z,(e=ht())===i&&(e=pt())===i&&(e=dt())===i&&(e=function(){var t,e;return J++,t=Z,lt()!==i&&(e=yt())!==i?(j=t,t=function(t){return{value:t,unit:null}}(e)):(Z=t,t=i),J--,t===i&&0===J&&st(x),t}()),e!==i&&(j=t,e=function(t){return{type:"quantity",value:t.value,unit:t.unit}}(e)),(t=e)===i&&(t=Z,(e=_t())!==i&&(j=t,e=function(t){return{type:"color",colorType:t.type,value:t.value}}(e)),t=e),t}function lt(){var t,n;for(J++,t=[],p.test(e.charAt(Z))?(n=e.charAt(Z),Z++):(n=i,0===J&&st(d));n!==i;)t.push(n),p.test(e.charAt(Z))?(n=e.charAt(Z),Z++):(n=i,0===J&&st(d));return J--,t===i&&(n=i,0===J&&st(h)),t}function ft(){var t,n,r;if(J++,t=Z,n=[],T.test(e.charAt(Z))?(r=e.charAt(Z),Z++):(r=i,0===J&&st(E)),r!==i)for(;r!==i;)n.push(r),T.test(e.charAt(Z))?(r=e.charAt(Z),Z++):(r=i,0===J&&st(E));else n=i;return n!==i&&(j=t,n=Q()),J--,(t=n)===i&&(n=i,0===J&&st(v)),t}function ht(){var t,n,r;return J++,t=Z,lt()!==i&&(n=yt())!==i?(37===e.charCodeAt(Z)?(r="%",Z++):(r=i,0===J&&st(m)),r!==i?(j=t,t=function(t){return{value:t,unit:"%"}}(n)):(Z=t,t=i)):(Z=t,t=i),J--,t===i&&0===J&&st(g),t}function pt(){var t,n,r;return J++,t=Z,lt()!==i&&(n=yt())!==i?("px"===e.substr(Z,2)?(r="px",Z+=2):(r=i,0===J&&st(L)),r!==i?(j=t,t=function(t){return{value:t,unit:"px"}}(n)):(Z=t,t=i)):(Z=t,t=i),t===i&&(t=Z,lt()!==i&&(n=yt())!==i?("cm"===e.substr(Z,2)?(r="cm",Z+=2):(r=i,0===J&&st(I)),r!==i?(j=t,t=function(t){return{value:t,unit:"cm"}}(n)):(Z=t,t=i)):(Z=t,t=i),t===i&&(t=Z,lt()!==i&&(n=yt())!==i?("mm"===e.substr(Z,2)?(r="mm",Z+=2):(r=i,0===J&&st(S)),r!==i?(j=t,t=function(t){return{value:t,unit:"mm"}}(n)):(Z=t,t=i)):(Z=t,t=i),t===i&&(t=Z,lt()!==i&&(n=yt())!==i?("in"===e.substr(Z,2)?(r="in",Z+=2):(r=i,0===J&&st(R)),r!==i?(j=t,t=function(t){return{value:t,unit:"in"}}(n)):(Z=t,t=i)):(Z=t,t=i),t===i&&(t=Z,lt()!==i&&(n=yt())!==i?("pt"===e.substr(Z,2)?(r="pt",Z+=2):(r=i,0===J&&st(V)),r!==i?(j=t,t=function(t){return{value:t,unit:"pt"}}(n)):(Z=t,t=i)):(Z=t,t=i),t===i&&(t=Z,lt()!==i&&(n=yt())!==i?("pc"===e.substr(Z,2)?(r="pc",Z+=2):(r=i,0===J&&st(O)),r!==i?(j=t,t=function(t){return{value:t,unit:"pc"}}(n)):(Z=t,t=i)):(Z=t,t=i)))))),J--,t===i&&0===J&&st(A),t}function dt(){var t,n,r;return J++,t=Z,(n=yt())!==i?("deg"===e.substr(Z,3)?(r="deg",Z+=3):(r=i,0===J&&st(M)),r!==i?(j=t,t=n=function(t){return{value:t,unit:"deg"}}(n)):(Z=t,t=i)):(Z=t,t=i),t===i&&(t=Z,(n=yt())!==i?("rad"===e.substr(Z,3)?(r="rad",Z+=3):(r=i,0===J&&st(C)),r!==i?(j=t,t=n=function(t){return{value:t,unit:"rad"}}(n)):(Z=t,t=i)):(Z=t,t=i),t===i&&(t=Z,(n=yt())!==i?(e.substr(Z,4)===w?(r=w,Z+=4):(r=i,0===J&&st(b)),r!==i?(j=t,t=n=function(t){return{value:t,unit:"grad"}}(n)):(Z=t,t=i)):(Z=t,t=i),t===i&&(t=Z,(n=yt())!==i?(e.substr(Z,4)===F?(r=F,Z+=4):(r=i,0===J&&st(N)),r!==i?(j=t,t=n=function(t){return{value:t,unit:"turn"}}(n)):(Z=t,t=i)):(Z=t,t=i)))),J--,t===i&&(n=i,0===J&&st(G)),t}function _t(){var t,n,r,s;if(J++,t=Z,35===e.charCodeAt(Z)?(n="#",Z++):(n=i,0===J&&st(P)),n!==i){if(r=[],U.test(e.charAt(Z))?(s=e.charAt(Z),Z++):(s=i,0===J&&st(B)),s!==i)for(;s!==i;)r.push(s),U.test(e.charAt(Z))?(s=e.charAt(Z),Z++):(s=i,0===J&&st(B));else r=i;r!==i?(j=t,t=n={type:"hex",value:Q()}):(Z=t,t=i)}else Z=t,t=i;return t===i&&(t=Z,(n=ct())!==i&&(j=t,n=function(t){return{type:"function",value:t}}(n)),(t=n)===i&&(t=Z,(n=ft())!==i&&(j=t,n={type:"named",value:Q()}),t=n)),J--,t===i&&(n=i,0===J&&st(D)),t}function yt(){var t,n,r,s,o,a,c,u;if(t=Z,z.test(e.charAt(Z))?(n=e.charAt(Z),Z++):(n=i,0===J&&st(W)),n===i&&(n=null),n!==i){for(r=Z,s=[],X.test(e.charAt(Z))?(o=e.charAt(Z),Z++):(o=i,0===J&&st(k));o!==i;)s.push(o),X.test(e.charAt(Z))?(o=e.charAt(Z),Z++):(o=i,0===J&&st(k));if(s!==i)if(46===e.charCodeAt(Z)?(o=".",Z++):(o=i,0===J&&st(H)),o!==i){if(a=[],X.test(e.charAt(Z))?(c=e.charAt(Z),Z++):(c=i,0===J&&st(k)),c!==i)for(;c!==i;)a.push(c),X.test(e.charAt(Z))?(c=e.charAt(Z),Z++):(c=i,0===J&&st(k));else a=i;a!==i?r=s=[s,o,a]:(Z=r,r=i)}else Z=r,r=i;else Z=r,r=i;if(r===i)if(r=[],X.test(e.charAt(Z))?(s=e.charAt(Z),Z++):(s=i,0===J&&st(k)),s!==i)for(;s!==i;)r.push(s),X.test(e.charAt(Z))?(s=e.charAt(Z),Z++):(s=i,0===J&&st(k));else r=i;if(r!==i){if(s=Z,101===e.charCodeAt(Z)?(o="e",Z++):(o=i,0===J&&st(Y)),o!==i)if(z.test(e.charAt(Z))?(a=e.charAt(Z),Z++):(a=i,0===J&&st(W)),a===i&&(a=null),a!==i){if(c=[],X.test(e.charAt(Z))?(u=e.charAt(Z),Z++):(u=i,0===J&&st(k)),u!==i)for(;u!==i;)c.push(u),X.test(e.charAt(Z))?(u=e.charAt(Z),Z++):(u=i,0===J&&st(k));else c=i;c!==i?s=o=[o,a,c]:(Z=s,s=i)}else Z=s,s=i;else Z=s,s=i;s===i&&(s=null),s!==i?(j=t,t=n=parseFloat(Q())):(Z=t,t=i)}else Z=t,t=i}else Z=t,t=i;return t}if((r=o())!==i&&Z===e.length)return r;throw r!==i&&Z<e.length&&st({type:"end"}),function(e,n,r){return new t(t.buildMessage(e,n),e,n,r)}($,K<e.length?e.charAt(K):null,K<e.length?it(K,K+1):it(K,K))}}}())}));function a(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function(t){let e=1;return c(t.parameters,1),1===t.parameters.length&&(e=p(t.parameters[0])),new s.ColorMatrixEffect(t.name,e)}(t);case"opacity":return function(t){let e=1;return c(t.parameters,1),1===t.parameters.length&&(e=p(t.parameters[0])),new s.OpacityEffect(e)}(t);case"hue-rotate":return function(t){let e=0;var r;return c(t.parameters,1),1===t.parameters.length&&(function(t){if("quantity"!==t.type||(0!==t.value||null!==t.unit)&&null==f[t.unit])throw new n("effect:type-error",`Expected <angle>, Actual: ${u(t)}`,{term:t})}(r=t.parameters[0]),e=r.value*f[r.unit]||0),new s.HueRotateEffect(e)}(t);case"blur":return function(t){let e=0;return c(t.parameters,1),1===t.parameters.length&&(e=d(t.parameters[0]),l(e,t.parameters[0])),new s.BlurEffect(e)}(t);case"drop-shadow":return function(t){const e=[];let r;for(const i of t.parameters)if("color"===i.type){if(e.length&&Object.freeze(e),r)throw new n("effect:type-error","Accepts only one color",{});r=_(i)}else{const t=d(i);if(Object.isFrozen(e))throw new n("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(t),3===e.length&&l(t,i)}if(e.length<2||e.length>3)throw new n("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new s.DropShadowEffect(e[0],e[1],e[2]||0,r||y("black"))}(t);case"bloom":return function(t){let e=1,n=0,r=0;return c(t.parameters,3),t.parameters[0]&&(e=p(t.parameters[0])),t.parameters[1]&&(n=d(t.parameters[1]),l(n,t.parameters[1])),t.parameters[2]&&(r=p(t.parameters[2])),new s.BloomEffect(e,n,r)}(t)}}catch(e){throw e.details.filter=t,e}throw new n("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function c(t,e){if(t.length>e)throw new n("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function u(t){return"color"===t.type?"<color>":h[t.unit]?"<length>":f[t.unit]?"<angle>":"%"===t.unit?"<percentage>":"<double>"}function l(t,e){if(t<0)throw new n("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}const f={deg:1,grad:.9,rad:180/Math.PI,turn:360},h={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/73};function p(t){!function(t){if("quantity"!==t.type||null!==t.unit&&"%"!==t.unit)throw new n("effect:type-error",`Expected <double> or <percentage>, Actual: ${u(t)}`,{term:t})}(t);const e=t.value;return l(e,t),"%"===t.unit?.01*e:e}function d(t){return function(t){if("quantity"!==t.type||(0!==t.value||null!==t.unit)&&null==h[t.unit])throw new n("effect:type-error",`Expected <length>, Actual: ${u(t)}`,{term:t})}(t),t.value*h[t.unit]||0}function _(t){switch(t.colorType){case"hex":return r.hex2rgba(t.value);case"named":return y(t.value);case"function":return function(t){if(c(t.parameters,4),v.test(t.name))return[p(t.parameters[0]),p(t.parameters[1]),p(t.parameters[2]),t.parameters[3]?p(t.parameters[3]):1];if(T.test(t.name))return r.hsla2rgba(function(t){return function(t){if("quantity"!==t.type||null!==t.unit)throw new n("effect:type-error",`Expected <double>, Actual: ${u(t)}`,{term:t})}(t),l(t.value,t),t.value}(t.parameters[0]),p(t.parameters[1]),p(t.parameters[2]),t.parameters[3]?p(t.parameters[3]):1);throw new n("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}(t.value)}}function y(t){const e=r.getNamedColorCopy(t);if(!e)throw new n("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return e}const v=/^rgba?/i,T=/^hsla?/i;e.parse=function(t){let e;try{e=t?o.parse(t):[]}catch(e){return{input:t,parsedFunctions:[],effects:[],error:new n("effect:invalid-syntax","Invalid effect syntax",{input:t,error:e})}}const r={input:t,parsedFunctions:e,effects:[],error:null};try{for(const t of e)r.effects.push(a(t))}catch(t){r.effects.length=0,r.error=t}return r},Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,r))||(t.exports=i)}}]);