(self.webpackChunkh2oc=self.webpackChunkh2oc||[]).push([[369],{3093:(e,t,i)=>{var r,n;r=[t,i(58797),i(74637),i(12525),i(83334),i(1422),i(80593),i(27975),i(48188),i(98043),i(93681),i(31561)],void 0===(n=function(e,i,r,n,o,s,a,p,u,d,l,c){"use strict";function h(e,t,i){const r={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return t&&i&&(r.width=t,r.height=i),new p(e,r)}let y=function(e){function t(t=null,r=!0){var n;return(n=e.call(this)||this).requestRenderOnSourceChangedEnabled=r,n._textureInvalidated=!0,n.stencilRef=0,n.coordScale=[1,1],n._height=void 0,n.pixelRatio=1,n.resolution=0,n.rotation=0,n._source=null,n._width=void 0,n.x=0,n.y=0,n.transforms={dvs:o.create()},n.source=t,n.requestRender=n.requestRender.bind(i._assertThisInitialized(n)),n}i._inheritsLoose(t,e);var r=t.prototype;return r.destroy=function(){this._texture&&(this._texture.dispose(),this._texture=null)},r.beforeRender=function(t){e.prototype.beforeRender.call(this,t),this.updateTexture(t)},r.invalidateTexture=function(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())},r.setTransform=function(e){const t=n.identity(this.transforms.dvs),[i,r]=e.toScreenNoRotation([0,0],this.x,this.y),o=this.resolution/this.pixelRatio/e.resolution,a=o*this.width,p=o*this.height,u=Math.PI*this.rotation/180;n.translate(t,t,s.fromValues(i,r)),n.translate(t,t,s.fromValues(a/2,p/2)),n.rotate(t,t,-u),n.translate(t,t,s.fromValues(-a/2,-p/2)),n.scaleByVec2(t,t,s.fromValues(a,p)),n.multiply(this.transforms.dvs,e.displayViewMat3,t)},r.setSamplingProfile=function(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))},r.bind=function({context:e},t){this._texture&&e.bindTexture(this._texture,t)},r.updateTexture=function({context:e}){var t;if(!this.stage)return null==(t=this._texture)||t.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=h(e,this.sourceWidth,this.sourceHeight):this._texture=h(e));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),function(e){return e&&"render"in e}(i))if(i instanceof c){const e=i.getRenderedRasterPixels();this._texture.setData(e.renderedRasterPixels)}else this._texture.setData(function(e){const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.render(t.getContext("2d")),t}(i));else(function(e){return e&&!("render"in e)})(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)},r.onAttach=function(){this.invalidateTexture()},r.onDetach=function(){this.invalidateTexture()},i._createClass(t,[{key:"isSourceScaled",get:function(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}},{key:"height",get:function(){return void 0!==this._height?this._height:this.sourceHeight},set:function(e){this._height=e}},{key:"source",get:function(){return this._source},set:function(e){this._source=e,this.invalidateTexture()}},{key:"sourceHeight",get:function(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}},{key:"sourceWidth",get:function(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}},{key:"width",get:function(){return void 0!==this._width?this._width:this.sourceWidth},set:function(e){this._width=e}}]),t}(l.DisplayObject);t.Bitmap=y,Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=n)},19048:(e,t,i)=>{var r,n;r=[t,i(58797),i(53183),i(41706),i(98520)],void 0===(n=function(e,i,r,n,o){"use strict";let s=function(e){function t(){return e.apply(this,arguments)||this}return i._inheritsLoose(t,e),t.prototype.prepareRenderPasses=function(t){const i=t.registerRenderPass({name:"bitmap",brushes:[n.brushes.bitmap],target:()=>this.children,drawPhase:r.WGLDrawPhase.MAP});return[...e.prototype.prepareRenderPasses.call(this,t),i]},t}(o);t.BitmapContainer=s,Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=n)},31561:(e,t,i)=>{var r,n;r=[i(58797)],void 0===(n=function(e){"use strict";return function(){function t(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}var i=t.prototype;return i.render=function(e){const t=this.pixelBlock;if(!t)return;const i=this.filter({pixelBlock:t}),r=i.pixelBlock.getAsRGBA(),n=e.createImageData(i.pixelBlock.width,i.pixelBlock.height);n.data.set(r),e.putImageData(n,0,0)},i.getRenderedRasterPixels=function(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}},e._createClass(t,[{key:"width",get:function(){return this.pixelBlock?this.pixelBlock.width:0}},{key:"height",get:function(){return this.pixelBlock?this.pixelBlock.height:0}}]),t}()}.apply(t,r))||(e.exports=n)},46351:(e,t,i)=>{var r,n;r=[t,i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(82438),i(24002),i(69788),i(85698),i(45168),i(57042),i(70034),i(96138)],void 0===(n=function(e,i,r,n,o,s,a,p,u,d,l,c,h,y,_,f,g,v,x){"use strict";const m=c.ofType({key:"type",base:_,typeMap:{rect:f,path:x,geometry:v}});t.LayerView2DMixin=e=>{let t=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).clips=new m,t.moving=!1,t.attached=!1,t.lastUpdateId=-1,t.updateRequested=!1,t}i._inheritsLoose(t,e);var r=t.prototype;return r.initialize=function(){var e;this.container||(this.container=new g.Container),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([y.init(this,"suspended",(e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()}),!0),y.init(this,["layer.opacity","container"],(()=>{var e,t;this.container&&(this.container.opacity=null!=(e=null==(t=this.layer)?void 0:t.opacity)?e:1)}),!0),y.init(this,["layer.blendMode"],(e=>{this.container&&(this.container.blendMode=e)}),!0),y.init(this,["layer.effect"],(e=>{this.container&&(this.container.effect=e)}),!0),this.clips.on("change",(()=>{this.container.clips=this.clips,this.notifyChange("clips")}))]),null!=(e=this.view)&&e.whenLayerView?this.view.whenLayerView(this.layer).then((e=>{e!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))},r.destroy=function(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1},r.isVisibleAtScale=function(e){let t=!0;const i=this.layer,r=i.minScale,n=i.maxScale;if(null!=r&&null!=n){let i=!r,o=!n;!i&&e<=r&&(i=!0),!o&&e>=n&&(o=!0),t=i&&o}return t},r.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())},r.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},r.isUpdating=function(){return!1},r.isRendering=function(){return!1},r.canResume=function(){return!!e.prototype.canResume.call(this)&&this.isVisibleAtScale(this.view.scale)},i._createClass(t,[{key:"updating",get:function(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}}]),t}(e);return r.__decorate([a.property({type:m,set(e){const t=h.referenceSetter(e,this._get("clips"),m);this._set("clips",t)}})],t.prototype,"clips",void 0),r.__decorate([a.property()],t.prototype,"moving",void 0),r.__decorate([a.property()],t.prototype,"attached",void 0),r.__decorate([a.property()],t.prototype,"container",void 0),r.__decorate([a.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),r.__decorate([a.property({readOnly:!0})],t.prototype,"updateParameters",void 0),r.__decorate([a.property()],t.prototype,"updateRequested",void 0),r.__decorate([a.property({dependsOn:["attached","updateRequested","suspended"]})],t.prototype,"updating",null),r.__decorate([a.property()],t.prototype,"view",void 0),t=r.__decorate([p.subclass("esri.views.2d.layers.LayerView2D")],t),t},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=n)},58329:(e,t,i)=>{var r,n;r=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(9720),i(37862),i(56750),i(12997),i(18167),i(72146),i(11286),i(19993),i(55845),i(3093)],void 0===(n=function(e,t,i,r,n,o,s,a,p,u,d,l,c,h,y,_,f,g,v,x){"use strict";const m=y.create(),w=[0,0],b=new f(0,0,0,0);let R=function(t){function i(e){var i;return(i=t.call(this,e)||this)._imagePromise=null,i.hidpi=!1,i.imageMaxWidth=2048,i.imageMaxHeight=2048,i.imageRotationSupported=!1,i.imageNormalizationSupported=!1,i.update=d.debounce((async(e,t)=>{const r=e.state,n=c.getInfo(r.spatialReference),o=i.hidpi?e.pixelRatio:1;if(!e.stationary||i.destroyed)return;i.imageRotationSupported?(w[0]=r.size[0],w[1]=r.size[1]):v.getOuterSize(w,r);const s=Math.floor(w[0]*o)>i.imageMaxWidth||Math.floor(w[1]*o)>i.imageMaxHeight,a=n&&(r.extent.xmin<n.valid[0]||r.extent.xmax>n.valid[1]),p=!i.imageNormalizationSupported&&a,u=!s&&!p,d=i.imageRotationSupported?r.rotation:0;if(u)i._imagePromise=i._singleExport(r,w,d,o,t);else{let e=Math.min(i.imageMaxWidth,i.imageMaxHeight);p&&(e=Math.min(r.worldScreenWidth,e)),i._imagePromise=i._tiledExport(r,e,d,o,t)}return i._imagePromise.then((async e=>{i._imagePromise=null,await Promise.all(e.map((e=>(i.container.addChild(e),e.fadeIn()))));for(const t of i.container.children)e.includes(t)||t.fadeOut().then((()=>{i.container.removeChild(t)}))})).catch((e=>{throw i._imagePromise=null,e}))}),5e3),i}e._inheritsLoose(i,t);var r=i.prototype;return r.destroy=function(){},r.updateExports=function(e){for(const t of this.container.children){if(!t.visible||!t.stage)return;e(t)?console.error("ExportStrategy.updateExports doesn't support promise yet"):(t.invalidateTexture(),t.requestRender())}},r._export=function(e,t,i,r,n,o){return d.resolve().then((()=>this.fetchSource(e,Math.floor(t*n),Math.floor(i*n),{rotation:r,pixelRatio:n,signal:o}))).then((i=>{const o=new x.Bitmap(i);return o.x=e.xmin,o.y=e.ymax,o.resolution=e.width/t,o.rotation=r,o.pixelRatio=n,o}))},r._singleExport=function(e,t,i,r,n){v.getBBox(m,e.center,e.resolution,t);const o=new h(m[0],m[1],m[2],m[3],e.spatialReference);return this._export(o,t[0],t[1],i,r,n).then((e=>[e]))},r._tiledExport=function(e,t,i,r,n){const o=_.create({size:t,spatialReference:e.spatialReference,scales:[e.scale]}),s=new g(o),a=s.getTileCoverage(e);if(!a)return null;const p=[];return a.forEach(((o,a,u,d)=>{b.set(o,a,u,d),s.getTileBounds(m,b);const l=new h(m[0],m[1],m[2],m[3],e.spatialReference);p.push(this._export(l,t,t,i,r,n))})),d.all(p)},e._createClass(i,[{key:"updating",get:function(){return null!==this._imagePromise}}]),i}(l);return t.__decorate([o.property()],R.prototype,"_imagePromise",void 0),t.__decorate([o.property()],R.prototype,"container",void 0),t.__decorate([o.property()],R.prototype,"fetchSource",void 0),t.__decorate([o.property()],R.prototype,"hidpi",void 0),t.__decorate([o.property()],R.prototype,"imageMaxWidth",void 0),t.__decorate([o.property()],R.prototype,"imageMaxHeight",void 0),t.__decorate([o.property()],R.prototype,"imageRotationSupported",void 0),t.__decorate([o.property()],R.prototype,"imageNormalizationSupported",void 0),t.__decorate([o.property()],R.prototype,"requestUpdate",void 0),t.__decorate([o.property({dependsOn:["_imagePromise"]})],R.prototype,"updating",null),R=t.__decorate([s.subclass("esri.views.2d.layers.support.ExportStrategy")],R),R}.apply(t,r))||(e.exports=n)},55845:(e,t)=>{var i;void 0===(i=function(e){"use strict";const i=Math.PI/180;t.bboxIntersects=function(e,t){const[i,r,n,o]=e,[s,a,p,u]=t;return!(i>p||n<s||r>u||o<a)},t.getBBox=function(e,t,i,r){const[n,o]=t,[s,a]=r,p=.5*i;return e[0]=n-p*s,e[1]=o-p*a,e[2]=n+p*s,e[3]=o+p*a,e},t.getOuterSize=function(e,t){const r=t.rotation*i,n=Math.abs(Math.cos(r)),o=Math.abs(Math.sin(r)),[s,a]=t.size;return e[0]=Math.round(a*o+s*n),e[1]=Math.round(a*n+s*o),e},t.snapToPixel=function(e,t,i){const{resolution:r,size:n}=i;return e[0]=r*(Math.round(t[0]/r)+n[0]%2*.5),e[1]=r*(Math.round(t[1]/r)+n[1]%2*.5),e},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,[t]))||(e.exports=i)},75885:(e,t,i)=>{var r,n;r=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(37862),i(59286),i(52521),i(96349),i(74474)],void 0===(n=function(e,t,i,r,n,o,s,a,p,u,d,l,c,h,y){"use strict";let _=function(t){function i(e){var i;return(i=t.call(this,e)||this).layer=null,i.parent=null,i}e._inheritsLoose(i,t);var n=i.prototype;return n.initialize=function(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",i=this.layer&&this.layer.title||"no title";throw r.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${i}', id: '${t}')`,e),e}}))},n.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},n.getSuspendInfo=function(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e},n.isUpdating=function(){return!1},e._createClass(i,[{key:"fullOpacity",get:function(){const e=e=>null==e?1:e;return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))}},{key:"suspended",get:function(){return!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){return!this.suspended&&!0===this.layer.legendEnabled}},{key:"updating",get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}},{key:"visible",get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}}]),i}(y.HandleOwnerMixin(c.IdentifiableMixin(h.EsriPromiseMixin(l.EventedMixin(d)))));return t.__decorate([o.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],_.prototype,"fullOpacity",null),t.__decorate([o.property()],_.prototype,"layer",void 0),t.__decorate([o.property()],_.prototype,"parent",void 0),t.__decorate([o.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],_.prototype,"suspended",null),t.__decorate([o.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],_.prototype,"suspendInfo",null),t.__decorate([o.property({readOnly:!0,dependsOn:["suspended","layer.legendEnabled?"]})],_.prototype,"legendEnabled",null),t.__decorate([o.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],_.prototype,"updating",null),t.__decorate([o.property({dependsOn:["layer.visible"]})],_.prototype,"visible",null),_=t.__decorate([s.subclass("esri.views.layers.LayerView")],_),_}.apply(t,r))||(e.exports=n)},85698:(e,t,i)=>{var r,n;r=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(56162)],void 0===(n=function(e,t,i,r,n,o,s,a,p,u,d){"use strict";let l=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i}(d.JSONSupport);return l=t.__decorate([s.subclass("esri.views.layers.support.ClipArea")],l),l}.apply(t,r))||(e.exports=n)},45168:(e,t,i)=>{var r,n;r=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(85698)],void 0===(n=function(e,t,i,r,n,o,s,a,p,u,d){"use strict";var l;let c=l=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).type="rect",e.left=null,e.right=null,e.top=null,e.bottom=null,e}return e._inheritsLoose(i,t),i.prototype.clone=function(){return new l({left:this.left,right:this.right,top:this.top,bottom:this.bottom})},e._createClass(i,[{key:"version",get:function(){return(this._get("version")||0)+1}}]),i}(d);return t.__decorate([o.property({type:[Number,String],json:{write:!0}})],c.prototype,"left",void 0),t.__decorate([o.property({type:[Number,String],json:{write:!0}})],c.prototype,"right",void 0),t.__decorate([o.property({type:[Number,String],json:{write:!0}})],c.prototype,"top",void 0),t.__decorate([o.property({type:[Number,String],json:{write:!0}})],c.prototype,"bottom",void 0),t.__decorate([o.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],c.prototype,"version",null),c=l=t.__decorate([s.subclass("esri.views.layers.support.ClipRect")],c),c}.apply(t,r))||(e.exports=n)},70034:(e,t,i)=>{var r,n;r=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(27572),i(12997),i(50257),i(57167),i(26016),i(85698)],void 0===(n=function(e,t,i,r,n,o,s,a,p,u,d,l,c,h,y,_){"use strict";var f;const g={base:d,key:"type",typeMap:{extent:l,polygon:c}};let v=f=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).type="geometry",e.geometry=null,e}return e._inheritsLoose(i,t),i.prototype.clone=function(){return new f({geometry:this.geometry.clone()})},e._createClass(i,[{key:"version",get:function(){return(this._get("version")||0)+1}}]),i}(_);return t.__decorate([o.property({types:g,json:{read:h.fromJSON,write:!0}})],v.prototype,"geometry",void 0),t.__decorate([o.property({readOnly:!0,dependsOn:["geometry"]})],v.prototype,"version",null),v=f=t.__decorate([s.subclass("esri.views.layers.support.Geometry")],v),v}.apply(t,r))||(e.exports=n)},96138:(e,t,i)=>{var r,n;r=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(85698)],void 0===(n=function(e,t,i,r,n,o,s,a,p,u,d){"use strict";let l=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).type="path",e.path=[],e}return e._inheritsLoose(i,t),e._createClass(i,[{key:"version",get:function(){return(this._get("version")||0)+1}}]),i}(d);return t.__decorate([o.property({type:[[[Number]]],json:{write:!0}})],l.prototype,"path",void 0),t.__decorate([o.property({readOnly:!0,dependsOn:["path"]})],l.prototype,"version",null),l=t.__decorate([s.subclass("esri.views.layers.support.Path")],l),l}.apply(t,r))||(e.exports=n)}}]);