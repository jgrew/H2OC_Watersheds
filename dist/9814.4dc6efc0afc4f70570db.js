(self.webpackChunkh2oc=self.webpackChunkh2oc||[]).push([[9814],{72110:(e,t,i)=>{var n,s;n=[i(49359),i(9720),i(56750),i(57167),i(12808),i(13213),i(16985),i(97949),i(79043),i(21863),i(7604),i(28405),i(51497)],void 0===(s=function(e,t,i,n,s,r,a,l,u,o,d,c,f){"use strict";const p=i.WGS84,y={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:i.WGS84},h={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function m(e){return n.isPoint(e)?null!=e.z:!!e.hasZ}function g(e){return n.isPoint(e)?null!=e.m:!!e.hasM}return function(){function i(){this._queryEngine=null,this._nextObjectId=null}var F=i.prototype;return F.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null},F.load=async function(t){const i=[],{features:n}=t,a=this._inferLayerProperties(n,t.fields),f=t.fields||[],m=null!=t.hasM?t.hasM:a.hasM,g=null!=t.hasZ?t.hasZ:a.hasZ,F=!t.spatialReference&&!a.spatialReference,b=F?p:t.spatialReference||a.spatialReference,I=F?y:null,E=t.geometryType||a.geometryType,_=!E;let j=t.objectIdField||a.objectIdField,T=t.timeInfo;if(!_&&(F&&i.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!E))throw new e("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!j)throw new e("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");if(a.objectIdField&&j!==a.objectIdField&&(i.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${j}" doesn't match the field name "${a.objectIdField}", found in the provided fields`}),j=a.objectIdField),j&&!a.objectIdField){let e=null;f.some((t=>t.name===j&&(e=t,!0)))?(e.type="esriFieldTypeOID",e.editable=!1,e.nullable=!1):f.unshift({alias:j,name:j,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const t of f){if(null==t.name&&(t.name=t.alias),null==t.alias&&(t.alias=t.name),!t.name)throw new e("feature-layer:invalid-field-name","field name is missing",{field:t});if(t.name===j&&(t.type="esriFieldTypeOID"),-1===r.kebabDict.jsonValues.indexOf(t.type))throw new e("feature-layer:invalid-field-type",`invalid type for field "${t.name}"`,{field:t})}const x={};this._requiredFields=[];for(const e of f)if("esriFieldTypeOID"!==e.type&&"esriFieldTypeGlobalID"!==e.type){e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable;const t=s.getFieldDefaultValue(e);e.nullable||void 0!==t?x[e.name]=t:this._requiredFields.push(e)}if(this._fieldsIndex=new l(f),this._createDefaultAttributes=o.createDefaultAttributesFunction(x,j),T){if(T.startTimeField){const e=this._fieldsIndex.get(T.startTimeField);e?(T.startTimeField=e.name,e.type="esriFieldTypeDate"):T.startTimeField=null}if(T.endTimeField){const e=this._fieldsIndex.get(T.endTimeField);e?(T.endTimeField=e.name,e.type="esriFieldTypeDate"):T.endTimeField=null}if(T.trackIdField){const e=this._fieldsIndex.get(T.trackIdField);e?T.trackIdField=e.name:(T.trackIdField=null,i.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:T}}))}T.startTimeField||T.endTimeField||(i.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:T}}),T=null)}const R={warnings:i,featureErrors:[],layerDefinition:{...h,drawingInfo:o.createDrawingInfo(E),templates:o.createDefaultTemplate(x),extent:I,geometryType:E,objectIdField:j,fields:f,hasZ:!!g,hasM:!!m,timeInfo:T},assignedObjectIds:{}};if(this._queryEngine=new c.default({fields:f,geometryType:E,hasM:m,hasZ:g,objectIdField:j,spatialReference:b,featureStore:new d({geometryType:E,hasM:m,hasZ:g}),timeInfo:T}),!n||!n.length)return this._nextObjectId=1,R;const q=n.reduce(((e,t)=>{const i=t.attributes&&t.attributes[j];return null==i||isNaN(i)||!isFinite(i)?e:Math.max(e,i)}),0);return this._nextObjectId=1+q,await u.checkProjectionSupport(n,b),this._loadInitialFeatures(R,n)},F.applyEdits=async function(e){const{spatialReference:i,geometryType:n}=this._queryEngine;return await t.all([f.loadGeometryEngineForSimplify(i,n),u.checkProjectionSupport(e.adds,i),u.checkProjectionSupport(e.updates,i)]),this._applyEdits(e)},F.queryFeatures=async function(e,t={}){return this._queryEngine.executeQuery(e,t.signal)},F.queryFeatureCount=async function(e,t={}){return this._queryEngine.executeQueryForCount(e,t.signal)},F.queryObjectIds=async function(e,t={}){return this._queryEngine.executeQueryForIds(e,t.signal)},F.queryExtent=async function(e,t={}){return this._queryEngine.executeQueryForExtent(e,t.signal)},F._inferLayerProperties=function(e,t){let i,s,r=null,a=null,l=null;for(const t of e){const e=t.geometry;if(e&&(r||(r=n.getJsonType(e)),a||(a=e.spatialReference),null==i&&(i=m(e)),null==s&&(s=g(e)),r&&a&&null!=i&&null!=s))break}if(t&&t.length){let e=null;t.some((t=>{const i="esriFieldTypeOID"===t.type,n=!t.type&&t.name&&"objectid"===t.name.toLowerCase();return e=t,i||n}))&&(l=e.name)}return{geometryType:r,spatialReference:a,objectIdField:l,hasM:s,hasZ:i}},F._loadInitialFeatures=function(e,t){const{geometryType:i,hasM:s,hasZ:r,objectIdField:l,spatialReference:o,featureStore:d}=this._queryEngine,c=[];for(const s of t){if(null!=s.uid&&(e.assignedObjectIds[s.uid]=-1),s.geometry&&i!==n.getJsonType(s.geometry)){e.featureErrors.push(f.createFeatureEditErrorResult("Incorrect geometry type."));continue}const t=this._createDefaultAttributes(),r=f.mixAttributes(this._fieldsIndex,this._requiredFields,t,s.attributes,!0,e.warnings);r?e.featureErrors.push(r):(this._assignObjectId(t,s.attributes,!0),s.attributes=t,null!=s.uid&&(e.assignedObjectIds[s.uid]=s.attributes[l]),s.geometry&&(s.geometry=u.project(s.geometry,s.geometry.spatialReference,o)),c.push(s))}if(d.addMany(a.convertFromFeatures([],c,i,r,s,l)),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){const{start:t,end:i}=this._queryEngine.timeExtent;e.layerDefinition.timeInfo.timeExtent=[t,i]}return e},F._applyEdits=function(e){const{adds:t,updates:i,deletes:n}=e,s={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(s,t),i&&i.length&&this._applyUpdateEdits(s,i),n&&n.length){for(const e of n)s.deleteResults.push(f.createFeatureEditSuccessResult(e));this._queryEngine.featureStore.removeManyById(n)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:s}},F._applyAddEdits=function(e,t){const{addResults:i}=e,{geometryType:s,hasM:r,hasZ:l,objectIdField:o,spatialReference:d,featureStore:c}=this._queryEngine,p=[];for(const r of t){if(r.geometry&&s!==n.getJsonType(r.geometry)){i.push(f.createFeatureEditErrorResult("Incorrect geometry type."));continue}const t=this._createDefaultAttributes(),a=f.mixAttributes(this._fieldsIndex,this._requiredFields,t,r.attributes);if(a)i.push(a);else{if(this._assignObjectId(t,r.attributes),r.attributes=t,null!=r.uid){const t=r.attributes[o];e.uidToObjectId[r.uid]=t}r.geometry&&(r.geometry=u.project(f.simplify(r.geometry,d),r.geometry.spatialReference,d)),p.push(r),i.push(f.createFeatureEditSuccessResult(r.attributes[o]))}}c.addMany(a.convertFromFeatures([],p,s,l,r,o))},F._applyUpdateEdits=function({updateResults:e},t){const{geometryType:i,hasM:s,hasZ:r,objectIdField:l,spatialReference:o,featureStore:d}=this._queryEngine;for(const c of t){const{attributes:t,geometry:p}=c,y=t&&t[l];if(null==y){e.push(f.createFeatureEditErrorResult(`Identifier field ${l} missing`));continue}if(!d.has(y)){e.push(f.createFeatureEditErrorResult(`Feature with object id ${y} missing`));continue}const h=a.convertToFeature(d.getFeature(y),i,r,s);if(p){if(i!==n.getJsonType(p)){e.push(f.createFeatureEditErrorResult("Incorrect geometry type."));continue}h.geometry=u.project(f.simplify(p,o),p.spatialReference,o)}if(t){const i=f.mixAttributes(this._fieldsIndex,this._requiredFields,h.attributes,t);if(i){e.push(i);continue}}d.add(a.convertFromFeature(h,i,r,s,l)),e.push(f.createFeatureEditSuccessResult(y))}},F._assignObjectId=function(e,t,i=!1){const n=this._queryEngine.objectIdField;i&&t&&isFinite(t[n])?e[n]=t[n]:e[n]=this._nextObjectId++},i}()}.apply(t,n))||(e.exports=s)},51497:(e,t,i)=>{var n,s;n=[i,t,i(56750),i(12808)],void 0===(s=function(e,n,s,r){"use strict";let a=function(){this.code=null,this.description=null},l=function(e){this.error=new a,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e};function u(e){return new l(e)}let o=function(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e};const d=new Set;function c(e,t){let i=t;return"string"==typeof t&&r.isNumericField(e)?i=parseFloat(t):null!=t&&r.isStringField(e)&&"string"!=typeof t&&(i=String(t)),r.sanitizeNullFieldValue(i)}let f;async function p(){return f||(f=await new Promise((function(e,t){Promise.all([i.e(4095),i.e(2215)]).then(function(){var t=[i(32215)];e.apply(null,t)}.bind(this)).catch(t.bind(this))})),f)}t.createFeatureEditErrorResult=u,t.createFeatureEditSuccessResult=function(e){return new o(e)},t.loadGeometryEngine=p,t.loadGeometryEngineForSimplify=async function(e,t){!s.isValid(e)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||await p()},t.mixAttributes=function(e,t,i,n,s=!1,a){d.clear();for(const t in n){const l=e.get(t);if(!l)continue;const o=n[t],f=c(l,o);if(f!==o&&a&&a.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:l,originalValue:o,sanitizedValue:f}}),d.add(l.name),l&&(s||l.editable)){const e=r.validateFieldValue(l,f);if(e)return u(r.validationErrorToString(e,l,f));i[l.name]=f}}for(const e of t)if(!d.has(e.name))return u(`missing required field "${e.name}"`);return null},t.simplify=function(e,t){if(!e||!s.isValid(t))return e;if("rings"in e||"paths"in e){if(!f)throw new TypeError("geometry engine not loaded");return f.simplify(t,e)}return e},Object.defineProperty(n,"__esModule",{value:!0})}.apply(t,n))||(e.exports=s)}}]);