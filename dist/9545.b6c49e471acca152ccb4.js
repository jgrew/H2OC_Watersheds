(self.webpackChunkh2oc=self.webpackChunkh2oc||[]).push([[9545],{67098:(t,e,n)=>{var i,r;i=[e,n(14818)],void 0===(r=function(t,n){"use strict";var i=n.createCommonjsModule((function(t){var e;void 0!==(e=function(){function t(n,i,r,s,o){for(;s>r;){if(s-r>600){var a=s-r+1,u=i-r+1,h=Math.log(a),c=.5*Math.exp(2*h/3),l=.5*Math.sqrt(h*c*(a-c)/a)*(u-a/2<0?-1:1);t(n,i,Math.max(r,Math.floor(i-u*c/a+l)),Math.min(s,Math.floor(i+(a-u)*c/a+l)),o)}var f=n[i],d=r,m=s;for(e(n,r,i),o(n[s],f)>0&&e(n,r,s);d<m;){for(e(n,d,m),d++,m--;o(n[d],f)<0;)d++;for(;o(n[m],f)>0;)m--}0===o(n[r],f)?e(n,r,m):e(n,++m,s),m<=i&&(r=m+1),i<=m&&(s=m-1)}}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}return function(e,i,r,s,o){t(e,i,r||0,s||e.length-1,o||n)}}())&&(t.exports=e)}));e.quickselect=i}.apply(e,i))||(t.exports=r)},32782:(t,e,n)=>{var i,r;i=[e,n(67098)],void 0===(r=function(t,n){"use strict";function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&("function"==typeof e?this.toBBox=e:this._initFormat(e)),this.clear()}function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function s(t,e){o(t,0,t.children.length,e,t)}function o(t,e,n,i,r){r||(r=m(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var s,o=e;o<n;o++)s=t.children[o],a(r,t.leaf?i(s):s);return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function l(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p(t,e,i,r,s){for(var o,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((i-e)/r/2)*r,n.quickselect(t,o,e,i,s),a.push(e,o,o,i))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!d(t,e))return n;for(var r,s,o,a,u=[];e;){for(r=0,s=e.children.length;r<s;r++)o=e.children[r],d(t,a=e.leaf?i(o):o)&&(e.leaf?n.push(o):f(t,a)?this._all(o,n):u.push(o));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!d(t,e))return!1;for(var i,r,s,o,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(s=e.children[i],d(t,o=e.leaf?n(s):s)){if(e.leaf||f(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(t,e){if(!t)return this;for(var n,i,s,o,a=this.data,u=this.toBBox(t),h=[],c=[];a||h.length;){if(a||(a=h.pop(),i=h[h.length-1],n=c.pop(),o=!0),a.leaf&&-1!==(s=r(t,a.children,e)))return a.children.splice(s,1),h.push(a),this._condense(h),this;o||a.leaf||!f(a,u)?i?(n++,a=i.children[n],o=!1):a=null:(h.push(a),c.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return s(r=m(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=m([])).leaf=!1,r.height=i;var u,h,c,l,f=Math.ceil(o/a),d=f*Math.ceil(Math.sqrt(a));for(p(t,e,n,d,this.compareMinX),u=e;u<=n;u+=d)for(p(t,u,c=Math.min(u+d-1,n),f,this.compareMinY),h=u;h<=c;h+=f)l=Math.min(h+f-1,c),r.children.push(this._build(t,h,l,i-1));return s(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,s,o,a,u,h,l,f,d,m;i.push(e),!e.leaf&&i.length-1!==n;){for(l=f=1/0,r=0,s=e.children.length;r<s;r++)u=c(o=e.children[r]),d=t,m=o,(h=(Math.max(m.maxX,d.maxX)-Math.min(m.minX,d.minX))*(Math.max(m.maxY,d.maxY)-Math.min(m.minY,d.minY))-u)<f?(f=h,l=u<l?u:l,a=o):h===f&&u<l&&(l=u,a=o);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),s=[],o=this._chooseSubtree(r,this.data,e,s);for(o.children.push(t),a(o,r);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(r,s,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=m(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,s,a,u,h,l,f,d,m,p,_,g,x;for(h=l=1/0,i=e;i<=n-e;i++)d=r=o(t,0,i,this.toBBox),m=s=o(t,i,n,this.toBBox),p=Math.max(d.minX,m.minX),_=Math.max(d.minY,m.minY),g=Math.min(d.maxX,m.maxX),x=Math.min(d.maxY,m.maxY),a=Math.max(0,g-p)*Math.max(0,x-_),u=c(r)+c(s),a<h?(h=a,f=i,l=u<l?u:l):a===h&&u<l&&(l=u,f=i);return f},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:u,r=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,s,u=this.toBBox,h=o(t,0,e,u),c=o(t,n-e,n,u),f=l(h)+l(c);for(r=e;r<n-e;r++)s=t.children[r],a(h,t.leaf?u(s):s),f+=l(h);for(r=n-e-1;r>=e;r--)s=t.children[r],a(c,t.leaf?u(s):s),f+=l(c);return f},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)a(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():s(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},e.rbush=i}.apply(e,i))||(t.exports=r)},115:(t,e)=>{var n;void 0===(n=function(t){"use strict";const n={convertToGEGeometry:function(t,e){return null==e?null:t.convertJSONToGeometry(e)},exportPoint:function(t,e,n){const r=new i(t.getPointX(e),t.getPointY(e),n),s=t.hasZ(e),o=t.hasM(e);return s&&(r.z=t.getPointZ(e)),o&&(r.m=t.getPointM(e)),r},exportPolygon:function(t,e,n){return new r(t.exportPaths(e),n,t.hasZ(e),t.hasM(e))},exportPolyline:function(t,e,n){return new s(t.exportPaths(e),n,t.hasZ(e),t.hasM(e))},exportMultipoint:function(t,e,n){return new o(t.exportPoints(e),n,t.hasZ(e),t.hasM(e))},exportExtent:function(t,e,n){const i=t.hasZ(e),r=t.hasM(e),s=new a(t.getXMin(e),t.getYMin(e),t.getXMax(e),t.getYMax(e),n);if(i){const n=t.getZExtent(e);s.zmin=n.vmin,s.zmax=n.vmax}if(r){const n=t.getMExtent(e);s.mmin=n.vmin,s.mmax=n.vmax}return s}};let i=function(t,e,n){this.x=t,this.y=e,this.spatialReference=n,this.z=void 0,this.m=void 0},r=function(t,e,n,i){this.rings=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),i&&(this.hasM=i)},s=function(t,e,n,i){this.paths=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),i&&(this.hasM=i)},o=function(t,e,n,i){this.points=t,this.spatialReference=e,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),i&&(this.hasM=i)},a=function(t,e,n,i,r){this.xmin=t,this.ymin=e,this.xmax=n,this.ymax=i,this.spatialReference=r,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0};e.jsonAdapter=n,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,[e]))||(t.exports=n)},5999:(t,e,n)=>{var i,r;i=[e,n(57167)],void 0===(r=function(t,n){"use strict";function i(t){return t&&"upperLeft"===t.originPosition}const r=(t,e,n)=>[e,n],s=(t,e,n)=>[e,n,t[2]],o=(t,e,n)=>[e,n,t[2],t[3]];function a({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function u({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function h(t,e,n){const i=[];let r,s,o,h;for(let c=0;c<n.length;c++){const l=n[c];c>0?(o=a(t,l[0]),h=u(t,l[1]),o===r&&h===s||(i.push(e(l,o-r,h-s)),r=o,s=h)):(r=a(t,l[0]),s=u(t,l[1]),i.push(e(l,r,s)))}return i.length>0?i:null}function c(t,e,n,i){return h(t,n?i?o:s:i?s:r,e)}function l(t,e,n,i){const a=[],u=n?i?o:s:i?s:r;for(let n=0;n<e.length;n++){const i=h(t,u,e[n]);i&&i.length>=3&&a.push(i)}return a.length?a:null}function f(t,e,n,i){const a=[],u=n?i?o:s:i?s:r;for(let n=0;n<e.length;n++){const i=h(t,u,e[n]);i&&i.length>=2&&a.push(i)}return a.length?a:null}function d({scale:t,translate:e},n){return n*t[0]+e[0]}function m({scale:t,translate:e},n){return e[1]-n*t[1]}function p(t,e,n){const i=new Array(n.length);if(!n.length)return i;const[r,s]=t.scale;let o=d(t,n[0][0]),a=m(t,n[0][1]);i[0]=e(n[0],o,a);for(let t=1;t<n.length;t++){const u=n[t];o+=u[0]*r,a-=u[1]*s,i[t]=e(u,o,a)}return i}function _(t,e,n){const i=new Array(n.length);for(let r=0;r<n.length;r++)i[r]=p(t,e,n[r]);return i}function g(t,e,n,i){return p(t,n?i?o:s:i?s:r,e)}function x(t,e,n,i){return _(t,n?i?o:s:i?s:r,e)}function y(t,e,n,i){return _(t,n?i?o:s:i?s:r,e)}function b(t,e,n){let[i,r]=n[0],s=Math.min(i,e[0]),o=Math.min(r,e[1]),a=Math.max(i,e[2]),u=Math.max(r,e[3]);for(let t=1;t<n.length;t++){const[e,h]=n[t];i+=e,r+=h,e<0&&(s=Math.min(s,i)),e>0&&(a=Math.max(a,i)),h<0?o=Math.min(o,r):h>0&&(u=Math.max(u,r))}return t[0]=s,t[1]=o,t[2]=a,t[3]=u,t}function I(t,e){if(!e.length)return null;t[0]=t[1]=Number.POSITIVE_INFINITY,t[2]=t[3]=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++)b(t,t,e[n]);return t}function v(t,e,n,i,r){return e.xmin=a(t,n.xmin),e.ymin=u(t,n.ymin),e.xmax=a(t,n.xmax),e.ymax=u(t,n.ymax),e!==n&&(i&&(e.zmin=n.zmin,e.zmax=n.zmax),r&&(e.mmin=n.mmin,e.mmax=n.mmax)),e}function M(t,e,n,i,r){return e.points=c(t,n.points,i,r),e}function T(t,e,n,i,r){return e.x=a(t,n.x),e.y=u(t,n.y),e!==n&&(i&&(e.z=n.z),r&&(e.m=n.m)),e}function S(t,e,n,i,r){const s=l(t,n.rings,i,r);return s?(e.rings=s,e):null}function z(t,e,n,i,r){const s=f(t,n.paths,i,r);return s?(e.paths=s,e):null}e.equals=function(t,e){if(t===e||null==t&&null==e)return!0;if(null==t||null==e)return!1;let n,r,s,o,a,u;return i(t)?(n=t.translate[0],r=t.translate[1],s=t.scale[0]):(n=t.extent.xmin,r=t.extent.ymax,s=t.tolerance),i(e)?(o=e.translate[0],a=e.translate[1],u=e.scale[0]):(o=e.extent.xmin,a=e.extent.ymax,u=e.tolerance),n===o&&r===a&&s===u},e.getQuantizedBoundsCoordsArray=b,e.getQuantizedBoundsCoordsArrayArray=I,e.getQuantizedBoundsPaths=function(t){return I([0,0,0,0],t)},e.getQuantizedBoundsPoints=function(t){const e=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return b(e,e,t)},e.getQuantizedBoundsRings=function(t){return I([0,0,0,0],t)},e.quantizeBounds=function(t,e,n){return e[0]=a(t,n[0]),e[3]=u(t,n[1]),e[2]=a(t,n[2]),e[1]=u(t,n[3]),e},e.quantizeExtent=v,e.quantizeGeometry=function(t,e){return t&&e?n.isPoint(e)?T(t,{},e,!1,!1):n.isPolyline(e)?z(t,{},e,!1,!1):n.isPolygon(e)?S(t,{},e,!1,!1):n.isMultipoint(e)?M(t,{},e,!1,!1):n.isExtent(e)?v(t,{},e,!1,!1):null:null},e.quantizeMultipoint=M,e.quantizePaths=f,e.quantizePoint=T,e.quantizePoints=c,e.quantizePolygon=S,e.quantizePolyline=z,e.quantizeRings=l,e.quantizeX=a,e.quantizeY=u,e.toQuantizationTransform=function(t){return t?{originPosition:"upper-left"===t.originPosition?"upperLeft":"lower-left"===t.originPosition?"lowerLeft":t.originPosition,scale:[t.tolerance,t.tolerance],translate:[t.extent.xmin,t.extent.ymax]}:null},e.unquantizeBounds=function(t,e,n){return n?(e[0]=d(t,n[0]),e[1]=m(t,n[3]),e[2]=d(t,n[2]),e[3]=m(t,n[1]),e):[d(t,e[0]),m(t,e[3]),d(t,e[2]),m(t,e[1])]},e.unquantizeCoordsArray=p,e.unquantizeCoordsArrayArray=_,e.unquantizeExtent=function(t,e,n,i,r){return e.xmin=d(t,n.xmin),e.ymin=m(t,n.ymin),e.xmax=d(t,n.xmax),e.ymax=m(t,n.ymax),e!==n&&(i&&(e.zmin=n.zmin,e.zmax=n.zmax),r&&(e.mmin=n.mmin,e.mmax=n.mmax)),e},e.unquantizeMultipoint=function(t,e,n,i,r){return e.points=g(t,n.points,i,r),e},e.unquantizePaths=x,e.unquantizePoint=function(t,e,n,i,r){return e.x=d(t,n.x),e.y=m(t,n.y),e!==n&&(i&&(e.z=n.z),r&&(e.m=n.m)),e},e.unquantizePoints=g,e.unquantizePolygon=function(t,e,n,i,r){return e.rings=y(t,n.rings,i,r),e},e.unquantizePolyline=function(t,e,n,i,r){return e.paths=x(t,n.paths,i,r),e},e.unquantizeRings=y,e.unquantizeX=d,e.unquantizeY=m,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,i))||(t.exports=r)},38003:(t,e)=>{var n;void 0===(n=function(t){"use strict";function n(t,e){return t?e?4:3:e?3:2}function i(t,e,i,r,s,o,a=1){const u=n(s,o);let h=i,c=i+u,l=0,f=0,d=0,m=0,p=0;for(let n=0,i=r-1;n<i;n++,h+=u,c+=u){const n=e[h],i=e[h+1],r=e[h+2],o=e[c],a=e[c+1],u=e[c+2];let _=n*a-o*i;m+=_,l+=(n+o)*_,f+=(i+a)*_,s&&(_=n*u-o*r,d+=(r+u)*_,p+=_),n<t[0]&&(t[0]=n),n>t[1]&&(t[1]=n),i<t[2]&&(t[2]=i),i>t[3]&&(t[3]=i),s&&(r<t[4]&&(t[4]=r),r>t[5]&&(t[5]=r))}if(m*a>0&&(m*=-1),p*a>0&&(p*=-1),!m)return null;const _=[l,f,.5*m];return s&&(_[3]=d,_[4]=.5*p),_}function r(t,e,i,r,h){const c=n(r,h);let l=e,f=e+c,d=0,m=0,p=0,_=0;for(let e=0,n=i-1;e<n;e++,l+=c,f+=c){const e=t[l],n=t[l+1],i=t[l+2],h=t[f],c=t[f+1],g=t[f+2],x=r?o(e,n,i,h,c,g):s(e,n,h,c);if(x)if(d+=x,r){const t=u(e,n,i,h,c,g);m+=x*t[0],p+=x*t[1],_+=x*t[2]}else{const t=a(e,n,h,c);m+=x*t[0],p+=x*t[1]}}return d>0?r?[m/d,p/d,_/d]:[m/d,p/d]:i>0?r?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function s(t,e,n,i){const r=n-t,s=i-e;return Math.sqrt(r*r+s*s)}function o(t,e,n,i,r,s){const o=i-t,a=r-e,u=s-n;return Math.sqrt(o*o+a*a+u*u)}function a(t,e,n,i){return[t+.5*(n-t),e+.5*(i-e)]}function u(t,e,n,i,r,s){return[t+.5*(i-t),e+.5*(r-e),n+.5*(s-n)]}e.getCentroidOptimizedGeometry=function(t,e,s,o,a){if(!e||!e.lengths.length)return null;const u="upperLeft"===(null==a?void 0:a.originPosition)?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const h=t.coords,c=[],l=s?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:f,coords:d}=e,m=n(s,o);let p=0;for(const t of f){const e=i(l,d,p,t,s,o,u);e&&c.push(e),p+=t*m}if(c.sort(((t,e)=>{let n=u*t[2]-u*e[2];return 0===n&&s&&(n=t[4]-e[4]),n})),c.length){let t=6*c[0][2];h[0]=c[0][0]/t,h[1]=c[0][1]/t,s&&(t=6*c[0][4],h[2]=0!==t?c[0][3]/t:0),(h[0]<l[0]||h[0]>l[1]||h[1]<l[2]||h[1]>l[3]||s&&(h[2]<l[4]||h[2]>l[5]))&&(h.length=0)}if(!h.length){const t=e.lengths[0]?r(d,0,f[0],s,o):null;if(!t)return null;h[0]=t[0],h[1]=t[1],s&&t.length>2&&(h[2]=t[2])}return t},e.lineCentroid=r,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,[e]))||(t.exports=n)},79043:(t,e,n)=>{var i,r;i=[e,n(9720),n(56750),n(70272),n(79928),n(115)],void 0===(r=function(t,n,i,r,s,o){"use strict";const a=[0,0];function u(t,e){if(!e)return null;if("x"in e){const n={x:0,y:0};return[n.x,n.y]=t(e.x,e.y,a),null!=e.z&&(n.z=e.z),null!=e.m&&(n.m=e.m),n}if("xmin"in e){const n={xmin:0,ymin:0,xmax:0,ymax:0};return[n.xmin,n.ymin]=t(e.xmin,e.ymin,a),[n.xmax,n.ymax]=t(e.xmax,e.ymax,a),e.hasZ&&(n.zmin=e.zmin,n.zmax=e.zmax,n.hasZ=!0),e.hasM&&(n.mmin=e.mmin,n.mmax=e.mmax,n.hasM=!0),n}return"rings"in e?{rings:h(e.rings,t),hasM:e.hasM,hasZ:e.hasZ}:"paths"in e?{paths:h(e.paths,t),hasM:e.hasM,hasZ:e.hasZ}:"points"in e?{points:c(e.points,t),hasM:e.hasM,hasZ:e.hasZ}:void 0}function h(t,e){const n=[];for(const i of t)n.push(c(i,e));return n}function c(t,e){const n=[];for(const i of t){const t=e(i[0],i[1],[0,0]);n.push(t),i.length>2&&t.push(i[2]),i.length>3&&t.push(i[3])}return n}const l=u.bind(null,r.lngLatToXY),f=u.bind(null,r.xyToLngLat),d=new(function(){function t(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}var e=t.prototype;return e.push=async function(t,e,r){!t||!t.length||!e||!r||i.equals(e,r);const s={geometries:t,inSpatialReference:e,outSpatialReference:r,resolve:null};return this._jobs.push(s),n.create((t=>{s.resolve=t,null===this._timer&&(this._timer=setTimeout(this._process,10))}))},e._process=function(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:e,inSpatialReference:n,outSpatialReference:a,resolve:u}=t;r.canProject(n,a)?i.isWebMercator(a)?u(e.map(l)):u(e.map(f)):u(s.projectMany(o.jsonAdapter,e,n,a,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))},t}());e.checkProjectionSupport=async function(t,e){if(!e)return;const n=Array.isArray(t)?t.map((t=>{var e;return null==(e=t.geometry)?void 0:e.spatialReference})):[t];await s.initializeProjection(n.map((t=>({source:t,dest:e}))))},e.project=function(t,e,n){return t?(n||(n=e,e=t.spatialReference),i.isValid(e)&&i.isValid(n)&&!i.equals(e,n)?r.canProject(e,n)?i.isWebMercator(n)?l(t):f(t):s.projectMany(o.jsonAdapter,[t],e,n,null)[0]:t):t},e.projectMany=async function(t,e,n){return d.push(t,e,n)},Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,i))||(t.exports=r)},36494:(t,e,n)=>{var i,r;i=[e,n(73462),n(49359),n(53183),n(20780)],void 0===(r=function(t,n,i,r,s){"use strict";const o=n.getLogger("esri.views.2d.engine.webgl");e.getTypeOfSizeVisualVariable=function(t){return s.isNumber(t.minDataValue)&&s.isNumber(t.maxDataValue)&&null!=t.minSize&&null!=t.maxSize?r.WGLVVFlag.SIZE_MINMAX_VALUE:(t.expression&&"view.scale"===t.expression||t.valueExpression&&"$view.scale"===t.valueExpression)&&Array.isArray(t.stops)?r.WGLVVFlag.SIZE_SCALE_STOPS:(null!=t.field||t.expression&&"view.scale"!==t.expression||t.valueExpression&&"$view.scale"!==t.valueExpression)&&(Array.isArray(t.stops)||"levels"in t&&t.levels)?r.WGLVVFlag.SIZE_FIELD_STOPS:(null!=t.field||t.expression&&"view.scale"!==t.expression||t.valueExpression&&"$view.scale"!==t.valueExpression)&&null!=t.valueUnit?r.WGLVVFlag.SIZE_UNIT_VALUE:(o.error(new i("mapview-bad-type","Found invalid size VisualVariable",t)),r.WGLVVFlag.NONE)},Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,i))||(t.exports=r)},74549:(t,e,n)=>{var i,r;i=[n,e,n(58797),n(74637),n(3718),n(73462),n(49359),n(9720),n(3438),n(63940),n(97949),n(39241),n(20780),n(14579),n(68305)],void 0===(r=function(t,i,r,s,o,a,u,h,c,l,f,d,m,p,_){"use strict";const g=a.getLogger("esri.views.layers.2d.features.support.AttributeStore"),x=p.createDebugLogger(p.DEBUG_ATTR_UPDATES,g),y=t=>(2147483648&t)>>>31,b=t=>2147483647&t,I={sharedArrayBuffer:s("esri-shared-array-buffer"),atomics:s("esri-atomics")};function v(t,e){return n=>e(t(n))}let M=function(){function t(t,e,n,i){this.size=0,this.texelSize=4;const{pixelType:r,layout:s,textureOnly:o}=i;this.textureOnly=o||!1,this.pixelType=r,this._ctype=e,this.layout=s,this._resetRange(),this._shared=t,this.size=n,o||(this.data=this._initData(r,n,t,e))}var e=t.prototype;return e.unsetComponentAllTexels=function(t,e){const n=o.unwrap(this.data);for(let i=0;i<this.size*this.size;i++)n[i*this.texelSize+t]&=~e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1},e.setComponentAllTexels=function(t,e){const n=o.unwrap(this.data);for(let i=0;i<this.size*this.size;i++)n[i*this.texelSize+t]|=255&e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1},e.setComponent=function(t,e,n){const i=o.unwrap(this.data);for(const r of n)i[r*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,r),this.dirtyEnd=Math.max(this.dirtyEnd,r)},e.setComponentTexel=function(t,e,n){o.unwrap(this.data)[n*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,n),this.dirtyEnd=Math.max(this.dirtyEnd,n)},e.unsetComponentTexel=function(t,e,n){o.unwrap(this.data)[n*this.texelSize+t]&=~e,this.dirtyStart=Math.min(this.dirtyStart,n),this.dirtyEnd=Math.max(this.dirtyEnd,n)},e.getData=function(t,e){const n=b(t);return o.unwrap(this.data)[n*this.texelSize+e]},e.setData=function(t,e,n){const i=b(t),r=1<<e;0!=(this.layout&r)?(this.data[i*this.texelSize+e]=n,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)):g.error("mapview-attributes-store","Tried to set a value for a texel's readonly component")},e.lock=function(){5121===this.pixelType&&this._shared&&I.atomics&&"local"!==this._ctype&&Atomics.store(this.data,0,1)},e.unlock=function(){5121===this.pixelType&&this._shared&&I.atomics&&"local"!==this._ctype&&Atomics.store(this.data,0,0)},e.expand=function(t){if(this.size=t,!this.textureOnly){const e=this._initData(this.pixelType,t,this._shared,this._ctype),n=o.unwrap(this.data);e.set(n),this.data=e}},e.toMessage=function(){const t=this.dirtyStart,e=this.dirtyEnd,n=this.texelSize;if(t>e)return null;this._resetRange();const i=!(this._shared||"local"===this._ctype),r=this.pixelType,s=this.layout,a=o.unwrap(this.data);return a.slice?{start:t,end:e,data:i&&a.slice(t*n,(e+1)*n)||null,pixelType:r,layout:s}:i?{start:t,end:e,data:new(m.getPixelArrayCtor(this.pixelType))(Array.prototype.slice.call(this.data,t*n,(e+1)*n)),pixelType:r,layout:s}:{start:t,end:e,data:null,pixelType:r,layout:s}},e._initData=function(t,e,n,i){const r=n&&"local"!==i?SharedArrayBuffer:ArrayBuffer,s=m.getPixelArrayCtor(t),o=new s(new r(e*e*4*s.BYTES_PER_ELEMENT));for(let t=0;t<o.length;t+=4)o[t+1]=255;return o},e._resetRange=function(){this.dirtyStart=2147483647,this.dirtyEnd=0},r._createClass(t,[{key:"buffer",get:function(){return o.andThen(this.data,(t=>t.buffer))}}]),t}(),T=function(){function t(t,e){this._client=t,this.config=e,this._attributeComputeMap=new Map,this._blocks=new Array,this._filters=new Array(d.MAX_FILTERS),this._targetType=0,this._abortController=h.createAbortController(),this._hasScaleExpr=!1,this._size=32,this._idsToHighlight=new Set;const n=e.supportsTextureFloat?5126:5121;x(`Creating AttributeStore ${I.sharedArrayBuffer?"with":"without"} shared memory`),this._blockDescriptors=[{pixelType:5121,layout:1},{pixelType:5121,layout:15,textureOnly:!0},{pixelType:n,layout:15},{pixelType:n,layout:15}],this._blocks=this._blockDescriptors.map((()=>null))}var e=t.prototype;return e.destroy=function(){this._abortController.abort()},e.update=function(t,e){this.config=e;const n=e.schema.processors[0].storage,i=l.diff(this._schema,n);if((t.targets.feature||t.targets.aggregate)&&(t.storage.data=!0),i&&(s("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:",i),t.storage.data=!0,this._schema=n,this._attributeComputeMap.clear(),!o.isNone(n))){switch(n.target){case"feature":this._targetType=0;break;case"aggregate":this._targetType=1}for(const t of n.mapping)this._bindAttribute(t)}},e.onTileData=function(t,e){if(o.isNone(e.addOrUpdate))return;const n=e.addOrUpdate.getCursor();for(;n.next();){const t=n.getDisplayId();this.setAttributeData(t,n)}},e.invalidateResources=function(){this._createResourcesPromise=null,this._abortController.abort(),this._abortController=h.createAbortController()},e.setHighlight=async function(t,e){const n=this._getBlock(0),i=e.map((t=>b(t)));n.lock(),n.unsetComponentAllTexels(0,1),n.setComponent(0,1,i),n.unlock(),this._idsToHighlight.clear();for(const e of t)this._idsToHighlight.add(e);await this.sendUpdates()},e.updateFilters=async function(t,e){const{config:n,service:i,spatialReference:r}=e,{filters:o}=n,a=o.map(((t,e)=>this._updateFilter(t,e,i,r)));(await h.all(a)).some((t=>t))&&(t.storage.filters=!0,s("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:","Filters changed"))},e.setData=function(t,e,n,i){const r=b(t);this._ensureSizeForTexel(r),this._getBlock(e).setData(t,n,i)},e.getData=function(t,e,n){return this._getBlock(e).getData(t,n)},e.getHighlightFlag=function(t){return this._idsToHighlight.has(t)?d.HIGHLIGHT_FLAG:0},e.unsetAttributeData=function(t){const e=b(t);this._getBlock(0).setData(e,0,0)},e.setAttributeData=function(t,e){const n=b(t);if(this._ensureSizeForTexel(n),this._getBlock(0).setData(n,0,this.getFilterFlags(e)),this._targetType!==y(t))return;const i=this._attributeComputeMap,r=this.config.supportsTextureFloat?1:2;i.size&&i.forEach(((t,i)=>{const s=i*r%4,o=Math.floor(i*r/4),a=this._getBlock(o+d.ATTRIBUTE_DATA_VV),u=t(e);if(this.config.supportsTextureFloat)a.setData(n,s,u);else if(u===d.NAN_MAGIC_NUMBER)a.setData(n,s,255),a.setData(n,s+1,255);else{const t=c.clamp(Math.round(u),-32767,32766)+32768,e=255&t,i=(65280&t)>>8;a.setData(n,s,e),a.setData(n,s+1,i)}}))},e.sendUpdates=function(){if(this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=h.createResolver(),this._nextUpdate.promise;const t={blocks:this._blocks.map((t=>o.isSome(t)?t.toMessage():null))};return this._currUpdate=this._createResources().then((()=>{const e=()=>{if(this._currUpdate=null,this._nextUpdate){const t=this._nextUpdate;this._nextUpdate=null,this.sendUpdates().then((()=>t.resolve()))}},n=this._client.update(t,this._signal).then(e).catch(e);return this._client.render(this._signal),n})).catch((t=>h.isAbortError(t)?(this._createResourcesPromise=null,this._createResources()):(g.error(new u("mapview-attribute-store","Encountered an error during client update",t)),h.resolve()))),this._currUpdate},e._ensureSizeForTexel=function(t){for(;t>=this._size*this._size;)if(this._expand())return},e._bindAttribute=function(t){let e;if(null!=t.fieldIndex)t.normalizationField&&g.warn("mapview-arcade","Ignoring normalizationField specified with an arcade expression which is not supported."),e=e=>e.getComputedNumericAtIndex(t.fieldIndex);else{if(!t.field)return;e=t.normalizationField?e=>{const n=e.readAttribute(t.normalizationField);return n?e.readAttribute(t.field)/n:null}:e=>e.readAttribute(t.field)}t.valueRepresentation&&(e=v(e,(e=>_.getVisualVariableSizeValueRepresentationRatio(e,t.valueRepresentation)))),this._attributeComputeMap.set(t.binding,v(e,(t=>null===t||isNaN(t)||t===1/0?d.NAN_MAGIC_NUMBER:t)))},e._createResources=function(){if(o.isSome(this._createResourcesPromise))return this._createResourcesPromise;this._getBlock(d.ATTRIBUTE_DATA_ANIMATION),x("Initializing AttributeStore");const t={shared:I.sharedArrayBuffer&&!("local"===this._client.type),size:this._size,blocks:o.mapMany(this._blocks,(t=>({textureOnly:t.textureOnly,buffer:t.buffer,pixelType:t.pixelType})))},e=this._client.initialize(t,this._signal).catch((t=>{h.isAbortError(t)?this._createResourcesPromise=null:g.error(new u("mapview-attribute-store","Encountered an error during client initialization",t))}));return this._createResourcesPromise=e,e.then((()=>o.isNone(this._createResourcesPromise)?this._createResources():void 0)),e},e._getBlock=function(t){const e=this._blocks[t];if(o.isSome(e))return e;x(`Initializing AttributeBlock at index ${t}`);const n=I.sharedArrayBuffer,i=this._client.type,r=new M(n,i,this._size,this._blockDescriptors[t]);return this._blocks[t]=r,this._createResourcesPromise=null,r},e._expand=function(){if(this._size<this.config.maxTextureSize){const t=this._size<<=1;return x("Expanding block size to",t,this._blocks),o.forEachSome(this._blocks,(e=>e.expand(t))),this._createResourcesPromise=null,this._size=t,0}return g.error(new u("mapview-limitations","Maximum number of onscreen features exceeded.")),-1},e._updateFilter=async function(t,e,n,i){const r=this._filters[e],s=o.isSome(r)&&r.hash;if(!r&&!t)return!1;if(s===JSON.stringify(t))return!1;if(o.isNone(t)){const t=1<<e+1,n=this._getBlock(0);return this._filters[e]=null,n.setComponentAllTexels(0,t),this.sendUpdates(),!0}const a=await this._getFilter(e,n);return await a.update(t,i),!0},e._getFilter=async function(t,e){const i=this._filters[t];if(o.isSome(i))return i;const{default:r}=await new Promise((function(t,e){n.e(4935).then((function(){var e=[n(74935)];(function(e){t(function(t){return Object.freeze({__proto__:null,default:t})}(e))}).apply(null,e)})).catch(e.bind(this))})),s=new r({geometryType:e.geometryType,hasM:!1,hasZ:!1,timeInfo:e.timeInfo,fieldsIndex:new f(e.fields)});return this._filters[t]=s,s},e.isVisible=function(t){return!!(2&this._getBlock(0).getData(t,0))},e.getFilterFlags=function(t){let e=0;const n=(i=t.getDisplayId(),1===y(i)?254:255);var i;for(let i=0;i<this._filters.length;i++){const r=!!(n&1<<i),s=this._filters[i];e|=(!r||o.isNone(s)||s.check(t)?1:0)<<i}let r=0;if(this._idsToHighlight.size){const e=t.getObjectId();r=this.getHighlightFlag(e)}return e<<1|r},r._createClass(t,[{key:"hasScaleExpr",get:function(){return this._hasScaleExpr}},{key:"_signal",get:function(){return this._abortController.signal}}]),t}();e.DISPLAY_ID_TYPE_AGGREGATE=1,e.DISPLAY_ID_TYPE_FEATURE=0,e.default=T,e.isAggregateId=function(t){return 1===y(t)},Object.defineProperty(i,"__esModule",{value:!0})}.apply(e,i))||(t.exports=r)},30390:(t,e,n)=>{var i,r;i=[e,n(11107),n(43860)],void 0===(r=function(t,n,i){"use strict";function r(t,e,n){if(!(t.length>e))for(;t.length<=e;)t.push(n)}const s=2147483647;let o=function(){function t(){this._numerics=[],this._strings=[],this._idGenerator=new n.DisplayIdGenerator,this._allocatedSize=256,this._bitsets=[],this._instanceIds=[],this._bounds=[]}var e=t.prototype;return e.createBitset=function(){const t=this._bitsets.length;return this._bitsets.push(i.StaticBitSet.create(this._allocatedSize,s)),t+1},e.getBitset=function(t){return this._bitsets[t-1]},e._expand=function(){this._allocatedSize<<=1;for(const t of this._bitsets)t.resize(this._allocatedSize)},e._ensureNumeric=function(t,e){this._numerics[t]||(this._numerics[t]=[]),r(this._numerics[t],e,0)},e._ensureInstanceId=function(t){r(this._instanceIds,t,0)},e._ensureString=function(t,e){this._strings[t]||(this._strings[t]=[]),r(this._strings[t],e,null)},e.createDisplayId=function(t=!1){const e=this._idGenerator.createId();return e>this._allocatedSize&&this._expand(),((t,e)=>((e?2147483648:0)|t)>>>0)(e,t)},e.releaseDisplayId=function(t){for(const e of this._bitsets)e.unset(t);return this._idGenerator.releaseId(t&s)},e.getComputedNumeric=function(t,e){return this.getComputedNumericAtIndex(t&s,0)},e.setComputedNumeric=function(t,e,n){return this.setComputedNumericAtIndex(t&s,n,0)},e.getComputedString=function(t,e){return this.getComputedStringAtIndex(t&s,0)},e.setComputedString=function(t,e,n){return this.setComputedStringAtIndex(t&s,0,n)},e.getComputedNumericAtIndex=function(t,e){const n=t&s;return this._ensureNumeric(e,n),this._numerics[e][n]},e.setComputedNumericAtIndex=function(t,e,n){const i=t&s;this._ensureNumeric(e,i),this._numerics[e][i]=n},e.getInstanceId=function(t){const e=t&s;return this._ensureInstanceId(e),this._instanceIds[e]},e.setInstanceId=function(t,e){const n=t&s;this._ensureInstanceId(n),this._instanceIds[n]=e},e.getComputedStringAtIndex=function(t,e){const n=t&s;return this._ensureString(e,n),this._strings[e][n]},e.setComputedStringAtIndex=function(t,e,n){const i=t&s;this._ensureString(e,i),this._strings[e][i]=n},e.getXMin=function(t){return this._bounds[4*(t&s)]},e.getYMin=function(t){return this._bounds[4*(t&s)+1]},e.getXMax=function(t){return this._bounds[4*(t&s)+2]},e.getYMax=function(t){return this._bounds[4*(t&s)+3]},e.setBounds=function(t,e){const n=e.readHydratedGeometry();if(!n||!n.coords.length)return!1;let i=1/0,o=1/0,a=-1/0,u=-1/0;n.forEachVertex(((t,e)=>{i=Math.min(i,t),o=Math.min(o,e),a=Math.max(a,t),u=Math.max(u,e)}));const h=t&s;return r(this._bounds,4*h+4,0),this._bounds[4*h]=i,this._bounds[4*h+1]=o,this._bounds[4*h+2]=a,this._bounds[4*h+3]=u,!0},t}();e.ComputedAttributeStorage=o,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,i))||(t.exports=r)},3434:(t,e,n)=>{var i,r;i=[e,n(58797),n(57167),n(26016),n(87547),n(16985),n(38003)],void 0===(r=function(t,n,i,r,s,o,a){"use strict";let u=0,h=function(){function t(t){this.type="FeatureSetReader",this.seen=!1,this.instance=0,this._tx=0,this._ty=0,this._xmin=-1,this._xmax=0,this._ymin=0,this._ymax=0,this._joined=[],this.instance=t}t.createInstance=function(){return u++,u=u>65535?0:u,u};var e=t.prototype;return e.getQuantizationTransform=function(){throw new Error("Unable to find transform for featureSet")},e.getStorage=function(){return this._storage},e.getComputedNumeric=function(t){return this.getComputedNumericAtIndex(0)},e.setComputedNumeric=function(t,e){return this.setComputedNumericAtIndex(e,0)},e.getComputedString=function(t){return this.getComputedStringAtIndex(0)},e.setComputedString=function(t,e){return this.setComputedStringAtIndex(0,e)},e.getComputedNumericAtIndex=function(t){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),t)},e.setComputedNumericAtIndex=function(t,e){this._storage.setComputedNumericAtIndex(this.getDisplayId(),t,e)},e.getComputedStringAtIndex=function(t){return this._storage.getComputedStringAtIndex(this.getDisplayId(),t)},e.setComputedStringAtIndex=function(t,e){return this._storage.setComputedStringAtIndex(this.getDisplayId(),t,e)},e.transform=function(t,e){const n=this.copy();return n._tx=t,n._ty=e,n},e.extent=function(t,e,n,i){const r=this.copy();return r._xmin=t,r._xmax=n,r._ymin=e,r._ymax=i,r},e.hasFilter=function(){return this._hasFilter},e.readAttribute=function(t,e=!1){const n=this._readAttribute(t,e);if(void 0!==n)return n;for(const n of this._joined){n.setIndex(this.getIndex());const i=n._readAttribute(t,e);if(void 0!==i)return i}},e.readAttributes=function(){return this._readAttributes()},e.joinAttributes=function(t){this._joined.push(t)},e.readArcadeFeature=function(){return this},e.geometry=function(){const t=this.readHydratedGeometry(),e=o.convertToGeometry(t,this.geometryType,this.hasZ,this.hasM),n=i.fromJSON(e);return n.spatialReference=this._arcadeSpatialReference,n},e.field=function(t){return this.readAttribute(t,!0)},e.hasField=function(t){return!0},e.setField=function(t,e){},e.keys=function(){return[]},e.castToText=function(){return""},e._computeCentroid=function(){if("esriGeometryPolygon"!==this.geometryType)return null;const t=this.readUnquantizedGeometry();if(!t||t.hasIndeterminateRingOrder)return null;const e=this.getQuantizationTransform();return a.getCentroidOptimizedGeometry(new s,t,this.hasM,this.hasZ,e)},e.copyInto=function(t){t.seen=this.seen,t._storage=this._storage,t._arcadeSpatialReference=this._arcadeSpatialReference,t._joined=this._joined,t._tx=this._tx,t._ty=this._ty,t._xmin=this._xmin,t._xmax=this._xmax,t._ymin=this._ymin,t._ymax=this._ymax},n._createClass(t,[{key:"_hasFilter",get:function(){return-1!==this._xmin}}]),t}();e.FeatureSetReader=h,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,i))||(t.exports=r)},44789:(t,e,n)=>{var i,r;i=[e,n(58797),n(16985),n(3434)],void 0===(r=function(t,n,i,r){"use strict";let s=function(t){function e(e,n,i){var r;return(r=t.call(this,e)||this)._featureIndex=-1,r._dateFields=new Set,r._geometryType=i,r._features=n,r}n._inheritsLoose(e,t),e.fromFeatures=function(t,n,r){const s=i.convertFromFeatures([],t,n,!1,!1,r);for(let e=0;e<s.length;e++)s[e].displayId=t[e].displayId;return e.fromOptimizedFeatures(s,n)},e.fromFeatureSet=function(t,n){const r=i.convertFromFeatureSet(t,n);return e.fromOptimizedFeatureSet(r)},e.fromOptimizedFeatureSet=function(t){const{features:n,geometryType:i}=t,r=e.fromOptimizedFeatures(n,i);r._exceededTransferLimit=t.exceededTransferLimit,r._transform=t.transform;for(const e of t.fields)"esriFieldTypeDate"===e.type&&r._dateFields.add(e.name);return r},e.fromOptimizedFeatures=function(t,n,i){const s=new e(r.FeatureSetReader.createInstance(),t,n);return s._transform=i,s};var s=e.prototype;return s.getApproximateSize=function(){return this._features.length},s.getCursor=function(){return this.copy()},s.getQuantizationTransform=function(){return this._transform},s.getAttributeHash=function(){let t="";for(const e in this._current.attributes)t+=this._current.attributes[e];return t},s.getIndex=function(){return this._featureIndex},s.setIndex=function(t){this._featureIndex=t},s.getObjectId=function(){return this._current.objectId},s.getDisplayId=function(){return this._current.displayId},s.setDisplayId=function(t){this._current.displayId=t},s.getGroupId=function(){return this._current.groupId},s.setGroupId=function(t){this._current.groupId=t},s.copy=function(){const t=new e(this.instance,this._features,this.geometryType);return this.copyInto(t),t},s.next=function(){if(!this._hasFilter)return++this._featureIndex<this._features.length;for(;++this._featureIndex<this._features.length&&!this._passesFilter(););return this._featureIndex<this._features.length},s.readLegacyFeature=function(){return i.convertToFeature(this._current,this.geometryType,this.hasZ,this.hasM)},s.readOptimizedFeature=function(){return this._current},s.readLegacyPointGeometry=function(){const t=this.readGeometry();return t?{x:t.coords[0],y:t.coords[1]}:null},s.readLegacyGeometry=function(){const t=this.readGeometry();return i.convertToGeometry(t,this.geometryType,this.hasZ,this.hasM)},s.readLegacyCentroid=function(){const t=this.readCentroid();return t?{x:t.coords[0],y:t.coords[1]}:null},s.readGeometryArea=function(){return i.getQuantizedArea(this._current.geometry,2)},s.readUnquantizedGeometry=function(){const t=this.readGeometry();if("esriGeometryPoint"===this.geometryType||!t)return t;const e=t.clone();return function({coords:t,lengths:e}){let n=0;for(const i of e){for(let e=1;e<i;e++)t[2*(n+e)]+=t[2*(n+e)-2],t[2*(n+e)+1]+=t[2*(n+e)-1];n+=i}}(e),e},s.readHydratedGeometry=function(){const t=this._current.geometry;if(!t)return null;const e=t.clone();return i.unquantizeOptimizedGeometry(e,e,this.hasZ,this.hasM,this._transform),e},s.getXHydrate=function(){const t=this._current.geometry.coords[0]+this._tx,e=this.getQuantizationTransform();return t*e.scale[0]+e.translate[0]},s.getYHydrate=function(){const t=this._current.geometry.coords[1]+this._ty,e=this.getQuantizationTransform();return e.translate[1]-t*e.scale[1]},s.readGeometry=function(){if(!this._current.hasGeometry)return null;const t=this._current.geometry.clone();if(t.isPoint)return t.coords[0]+=this._tx,t.coords[1]+=this._ty,t;let e=0;for(const n of t.lengths)t.coords[2*e]+=this._tx,t.coords[2*e+1]+=this._ty,e+=n;return t},s.readCentroid=function(){if(!this._current.hasGeometry)return null;if(!this._current.centroid){const t=this._computeCentroid();if(!t)return null;t.coords[0]-=this._tx,t.coords[1]-=this._ty,this._current.centroid=t}const t=this._current.centroid.clone();return t.coords[0]+=this._tx,t.coords[1]+=this._ty,t},s._readAttribute=function(t,e){const n=this._current.attributes[t];if(void 0!==n)return e&&this._dateFields.has(t)?new Date(n):n;const i=this.readAttributes(),r=t.toLocaleLowerCase().trim();for(const t in i)if(t.toLocaleLowerCase().trim()===r){const e=this._current.attributes[t];return this._dateFields.has(t)?new Date(e):e}},s.copyInto=function(e){t.prototype.copyInto.call(this,e),e._featureIndex=this._featureIndex,e._transform=this._transform,e._dateFields=this._dateFields},s._readAttributes=function(){return this._current.attributes},s._passesFilter=function(){if(!this._hasFilter)return!0;let t=0,e=0;switch(this.geometryType){case"esriGeometryPoint":{const n=this._current.geometry;if(!n)return!1;[t,e]=n.coords;break}case"esriGeometryPolygon":{const n=this.readCentroid();if(!n)return!1;[t,e]=n.coords,t-=this._tx,e-=this._ty;break}default:return!1}return t>=this._xmin&&t<=this._xmax&&e>=this._ymin&&e<=this._ymax},n._createClass(e,[{key:"_current",get:function(){return this._features[this._featureIndex]}},{key:"geometryType",get:function(){return this._geometryType}},{key:"hasFeatures",get:function(){return!!this._features.length}},{key:"hasNext",get:function(){return this._featureIndex+1<this._features.length}},{key:"exceededTransferLimit",get:function(){return this._exceededTransferLimit}},{key:"hasZ",get:function(){return!1}},{key:"hasM",get:function(){return!1}}]),e}(r.FeatureSetReader);e.FeatureSetReaderJSON=s,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,i))||(t.exports=r)},43860:(t,e)=>{var n;void 0===(n=function(t){"use strict";let n=function(){function t(t,e){this._mask=0,this._buf=t,this._mask=e}t.fromBuffer=function(e,n){return new t(e,n)},t.create=function(e,n=4294967295){return new t(new Uint32Array(Math.ceil(e/32)),n)};var e=t.prototype;return e._getIndex=function(t){return Math.floor(t/32)},e.has=function(t){const e=this._mask&t;return!!(this._buf[this._getIndex(e)]&1<<e%32)},e.set=function(t){const e=this._mask&t,n=this._getIndex(e),i=1<<e%32;this._buf[n]|=i},e.unset=function(t){const e=this._mask&t,n=this._getIndex(e),i=1<<e%32;this._buf[n]&=4294967295^i},e.resize=function(t){const e=this._buf,n=new Uint32Array(Math.ceil(t/32));n.set(e),this._buf=n},e.or=function(t){for(let e=0;e<this._buf.length;e++)this._buf[e]|=t._buf[e];return this},e.and=function(t){for(let e=0;e<this._buf.length;e++)this._buf[e]&=t._buf[e];return this},e.xor=function(t){for(let e=0;e<this._buf.length;e++)this._buf[e]^=t._buf[e];return this},e.ior=function(t){for(let e=0;e<this._buf.length;e++)this._buf[e]|=~t._buf[e];return this},e.iand=function(t){for(let e=0;e<this._buf.length;e++)this._buf[e]&=~t._buf[e];return this},e.ixor=function(t){for(let e=0;e<this._buf.length;e++)this._buf[e]^=~t._buf[e];return this},e.any=function(){for(let t=0;t<this._buf.length;t++)if(this._buf[t])return!0;return!1},e.copy=function(t){for(let e=0;e<this._buf.length;e++)this._buf[e]=t._buf[e];return this},e.clone=function(){return new t(this._buf.slice(),this._mask)},e.clear=function(){for(let t=0;t<this._buf.length;t++)this._buf[t]=0},e.forEachSet=function(t){for(let e=0;e<this._buf.length;e++){let n=this._buf[e],i=32*e;if(n)for(;n;)1&n&&t(i),n>>>=1,i++}},e.countSet=function(){let t=0;return this.forEachSet((e=>{t++})),t},t}();e.StaticBitSet=n,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,[e]))||(t.exports=n)},16585:(t,e,n)=>{var i,r;i=[e,n(58797),n(71572),n(12997),n(18167),n(84687),n(11286)],void 0===(r=function(t,n,i,r,s,o,a){"use strict";function u(t,e){const n=t.bounds,i=e.bounds;return t.key.id!==e.key.id&&t.key.world===e.key.world&&n[0]<=i[0]&&n[1]<=i[1]&&n[2]>=i[2]&&n[3]>=i[3]}let h=function(){function t(t,e){this.key=new a(0,0,0,0),this.bounds=s.create(),this.objectIds=new Set,this.key.set(e);const n=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=n.resolution,this.scale=n.scale,this.level=n.level,this.needsClear=!0}var e=t.prototype;return e.clone=function(){return new t(this.tileInfoView,this.key)},e.createChildTiles=function(){const e=this.key.getChildKeys(),n=i.acquire();for(let i=0;i<e.length;i++)n[i]=new t(this.tileInfoView,e[i]);return n},e.getQuantizationParameters=function(){return o.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})},n._createClass(t,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return r.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}},{key:"bbox",get:function(){const t=this.bounds;return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}}}]),t}();e.Tile=h,e.default=h,e.isChildOf=function(t,e){return u(e,t)},e.isParentOf=u,Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,i))||(t.exports=r)},91240:(t,e,n)=>{var i,r;i=[n(58797),n(74637),n(59286),n(11286),n(73692),n(32782),n(16585)],void 0===(r=function(t,e,n,i,r,s,o){"use strict";const a={added:[],removed:[]},u=new Set,h=new i(0,0,0,0);return function(n){function i(t){var i;return(i=n.call(this)||this)._tiles=new Map,i._index=s.rbush(9,e("csp-restrictions")?t=>({minX:t.bounds[0],minY:t.bounds[1],maxX:t.bounds[2],maxY:t.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),i.tiles=[],i.tileScheme=t,i}t._inheritsLoose(i,n);var c=i.prototype;return c.destroy=function(){this.clear()},c.clear=function(){this.tiles.length=0,this._tiles.clear(),this._index.clear()},c.has=function(t){return this._tiles.has(t)},c.get=function(t){return this._tiles.get(t)},c.findByKey=function(t){return this._tiles.get(t.id)},c.intersections=function(t,e){const n="string"==typeof t?this.get(t):t;if(!n)return[];const i=e*n.resolution,r=n.bounds[0]-i,s=n.bounds[1]-i,o=n.bounds[2]+i,a=n.bounds[3]+i,u=[];for(const t of this._index.search({minX:r,minY:s,maxX:o,maxY:a})){const e=t.bounds.slice();e[0]=Math.max(e[0],r),e[1]=Math.max(e[1],s),e[2]=Math.min(e[2],o),e[3]=Math.min(e[3],a),e[2]-e[0]>0&&e[3]-e[1]>0&&u.push({bounds:e,tile:t})}return u},c.boundsIntersections=function(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})},c.updateTiles=function(t){const e={added:[],removed:[]};for(const n of t.added)if(!this.has(n)){const t=new o.Tile(this.tileScheme,n);this._tiles.set(n,t),this._index.insert(t),e.added.push(t)}for(const n of t.removed)if(this.has(n)){const t=this.get(n);this._tiles.delete(n),this._index.remove(t),e.removed.push(t)}this.tiles.length=0,this._tiles.forEach((t=>this.tiles.push(t))),(e.added.length||e.removed.length)&&this.emit("update",e)},c.setViewState=function(t){const e=this.tileScheme.getTileCoverage(t,0);if(!e)return;const{spans:n,lodInfo:i}=e,{level:s}=i;if(n.length>0)for(const{row:t,colFrom:e,colTo:r}of n)for(let n=e;n<=r;n++){const e=h.set(s,t,i.normalizeCol(n),i.getWorldForColumn(n)).id;if(u.add(e),!this.has(e)){const t=new o.Tile(this.tileScheme,e);this._tiles.set(e,t),this._index.insert(t),this.tiles.push(t),a.added.push(t)}}for(let t=this.tiles.length-1;t>=0;t--){const e=this.tiles[t];u.has(e.id)||(this._tiles.delete(e.id),this.tiles.splice(t,1),this._index.remove(e),a.removed.push(e))}(a.added.length||a.removed.length)&&this.emit("update",a),r.pool.release(e),u.clear(),a.added.length=0,a.removed.length=0},i}(n)}.apply(e,i))||(t.exports=r)},11107:(t,e)=>{var n;void 0===(n=function(t){"use strict";const n=2147483648;let i=function(){function t(){this._freeIds=[],this._idCounter=1}var e=t.prototype;return e.createId=function(t=!1){return function(t,e){return((e?n:0)|t)>>>0}(this._getFreeId(),t)},e.releaseId=function(t){this._freeIds.push(t)},e._getFreeId=function(){return this._freeIds.length?this._freeIds.pop():this._idCounter++},t}();e.DISPLAY_ID_TYPE_AGGREGATE=1,e.DISPLAY_ID_TYPE_FEATURE=0,e.DisplayIdGenerator=i,e.getDisplayIdIndex=function(t){return 2147483647&t},e.getDisplayIdType=function(t){return(t&n)>>>31},Object.defineProperty(t,"__esModule",{value:!0})}.apply(e,[e]))||(t.exports=n)}}]);