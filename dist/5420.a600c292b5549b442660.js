(self.webpackChunkh2oc=self.webpackChunkh2oc||[]).push([[5420],{65420:(e,t,r)=>{var n,i;n=[r(58797),r(11285),r(74637),r(3718),r(73462),r(67059),r(26475),r(99752),r(49359),r(4037),r(51916),r(18377),r(57517),r(50783),r(59948)],void 0===(i=function(e,t,r,n,i,o,a,s,c,l,p,y,d,u,h){"use strict";function f(e,t){if(n.isNone(e)&&n.isNone(t))return null;const r={};return n.isSome(t)&&(r.geometry=t.toJSON()),n.isSome(e)&&(r.where=e),r}let v=function(t){function r(){var e;return(e=t.apply(this,arguments)||this)._enabledDataReceived=!1,e.errorString=null,e.connectionStatus="disconnected",e}e._inheritsLoose(r,t);var n=r.prototype;return n.initialize=function(){this.handles.add([this.layer.watch("purgeOptions",(()=>this._update()))])},n.destroy=function(){this.connectionStatus="disconnected"},n.on=function(e,r){"data-received"===e&&(this._enabledDataReceived=!0,this._proxy.enableEvent("data-received",!0));const n=t.prototype.on.call(this,e,r),i=this;return{remove(){n.remove(),"data-received"===e&&(i._proxy.closed||i.hasEventListener("data-received")||i._proxy.enableEvent("data-received",!1))}}},n.queryLatestObservations=function(e,t){if(!this.layer.timeInfo.endField&&!this.layer.timeInfo.startField)throw new c("streamlayer-no-timeField","queryLatestObservation can only be used with services that define a TrackIdField");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),t).then((e=>{const t=d.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))},n._createClientOptions=function(){return{...t.prototype._createClientOptions.call(this),setProperty:e=>{this.set(e.propertyName,e.value)}}},n._createTileRendererHash=function(e){const r=`${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(f(this.layer.definitionExpression,this.layer.geometryDefinition))})`;return t.prototype._createTileRendererHash.call(this,e)+r},n._createServiceOptions=async function(){const e=this.layer,{objectIdField:t}=e,r=e.fields.map((e=>e.toJSON())),n=u.toJSONGeometryType(e.geometryType),i=e.timeInfo&&e.timeInfo.toJSON()||null,o=e.spatialReference?e.spatialReference.toJSON():null;return{type:"stream",fields:r,geometryType:n,objectIdField:t,timeInfo:i,source:this.layer.parsedUrl,serviceFilter:f(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enableDataReceived:this._enabledDataReceived,spatialReference:o,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval}},e._createClass(r,[{key:"connectionError",get:function(){if(this.errorString)return new c("stream-controller",this.errorString)}}]),r}(h);return t.__decorate([a.property()],v.prototype,"errorString",void 0),t.__decorate([a.property({dependsOn:["errorString"],readOnly:!0})],v.prototype,"connectionError",null),t.__decorate([a.property()],v.prototype,"connectionStatus",void 0),v=t.__decorate([s.subclass("esri.views.2d.layers.StreamLayerView2D")],v),v}.apply(t,n))||(e.exports=i)}}]);