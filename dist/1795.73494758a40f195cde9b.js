(self.webpackChunkh2oc=self.webpackChunkh2oc||[]).push([[1795],{96701:(e,t,i)=>{var r,s;r=[i,t,i(3718),i(86928),i(49359),i(9720),i(56750),i(19328),i(52148),i(81405),i(57167),i(35477),i(2707),i(87547),i(16985),i(38003),i(79043),i(28714)],void 0===(s=function(e,r,s,n,a,o,u,l,c,h,f,d,p,m,y,g,x,_){"use strict";const S=new n.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),I=Object.freeze({}),w=new m,F=new m,R=new m,M={esriGeometryPoint:y.convertToPoint,esriGeometryPolyline:y.convertToPolyline,esriGeometryPolygon:y.convertToPolygon,esriGeometryMultipoint:y.convertToMultipoint};function b(e,t,i,r=e.hasZ,s=e.hasM){const n=e.hasZ&&r,a=e.hasM&&s;if(i){const o=y.quantizeOptimizedGeometry(R,t,e.hasZ,e.hasM,"esriGeometryPoint",i,r,s);return y.convertToPoint(o,n,a)}return y.convertToPoint(t,n,a)}function v(e,t,i,r,s,n,a=t,o=i){const u=t&&a,l=i&&o,c=r?"coords"in r?r:r.geometry:null;if(!c)return null;if(s){let r=y.generalizeOptimizedGeometry(F,c,t,i,e,s,a,o);return n&&(r=y.quantizeOptimizedGeometry(R,r,u,l,e,n)),M[e](r,u,l)}if(n){const r=y.quantizeOptimizedGeometry(R,c,t,i,e,n,a,o);return M[e](r,u,l)}return y.removeZMValues(w,c,t,i,a,o),M[e](w,u,l)}async function T(e,t,i){if(!e)return null;let{where:r}=e;if(e.where=r=r&&r.trim(),(!r||/^1 *= *1$/.test(r)||t&&t===r)&&(e.where=null),!e.geometry)return e;let n=await async function(e){const{geometry:t,distance:i,units:r}=e;if(null==i||"vertexAttributes"in t)return t;const s=t.spatialReference,n=r?S.fromJSON(r):d.getUnitString(s),a=s&&(u.isGeographic(s)||u.isWebMercator(s))?t:await x.checkProjectionSupport(s,u.WGS84).then((()=>x.project(t,u.WGS84)));return(await V())(a.spatialReference,a,i,n)}(e);if(e.distance=0,e.units=null,"esriSpatialRelEnvelopeIntersects"===e.spatialRel){const{spatialReference:t}=e.geometry;n=h.getGeometryExtent(n),n.spatialReference=t}e.geometry=n,await x.checkProjectionSupport(n.spatialReference,i);const a=(await p.normalizeCentralMeridian(f.fromJSON(n)))[0];if(s.isNone(a))throw I;const o=a.toJSON(),l=await x.project(o,o.spatialReference,i);if(!l)throw I;return l.spatialReference=i,e.geometry=l,e}const E="_geVersion",Q=(e,t)=>e!==E?t:void 0,A="feature-store:unsupported-query",N={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},C={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},P={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},G={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function O(){return new Promise((function(e,t){Promise.all([i.e(4095),i.e(2215)]).then(function(){var t=[i(32215)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}function V(){return O().then((e=>e.geodesicBuffer))}t.QUERY_ENGINE_EMPTY_RESULT=I,t.canQueryWithRBush=function(e){if(f.isExtent(e))return!0;if(f.isPolygon(e)){for(const t of e.rings){if(5!==t.length)return!1;if(t[0][0]!==t[1][0]||t[0][0]!==t[4][0]||t[2][0]!==t[3][0]||t[0][1]!==t[3][1]||t[0][1]!==t[4][1]||t[1][1]!==t[2][1])return!1}return!0}return!1},t.checkSpatialQuerySupport=async function(e,t,i){const{spatialRel:r,geometry:s}=e;if(s){if(!0!==C[r])throw new a(A,"Unsupported query spatial relationship",{query:e});if(u.isValid(s.spatialReference)&&u.isValid(i)){if(!function(e){return!0===P[f.getJsonType(e)]}(s))throw new a(A,"Unsupported query geometry type",{query:e});if(!function(e){return!0===G[e]}(t))throw new a(A,"Unsupported layer geometry type",{query:e});if(e.outSR)return x.checkProjectionSupport(e.geometry&&e.geometry.spatialReference,e.outSR)}}},t.cleanFromGeometryEngine=function(e){return e&&E in e?JSON.parse(JSON.stringify(e,Q)):e},t.getCentroid=function(e,t,i){return"esriGeometryPolygon"===e.geometryType&&t&&(t.centroid||t.geometry)?(t.centroid||(t.centroid=g.getCentroidOptimizedGeometry(new m,t.geometry,e.hasZ,e.hasM)),b(e,t.centroid,i)):null},t.getGeodesicBufferOperator=V,t.getGeometry=v,t.getSpatialQueryOperator=function(e,t,i,r,s){if(f.isPolygon(t)&&"esriGeometryPoint"===i&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e)){const e=y.convertFromPolygon(new m,t,!1,!1);return o.resolve((t=>_.polygonContainsPoint(e,!1,!1,t)))}if(f.isPolygon(t)&&"esriGeometryMultipoint"===i){const i=y.convertFromPolygon(new m,t,!1,!1);if("esriSpatialRelContains"===e)return o.resolve((e=>_.polygonContainsMultipoint(i,!1,!1,e,r,s)))}if(f.isExtent(t)&&"esriGeometryPoint"===i&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e))return o.resolve((e=>l.extentContainsPoint(t,v(i,r,s,e))));if(f.isExtent(t)&&"esriGeometryMultipoint"===i&&"esriSpatialRelContains"===e)return o.resolve((e=>l.extentContainsMultipoint(t,v(i,r,s,e))));if(f.isExtent(t)&&"esriSpatialRelIntersects"===e){const e=c.getExtentIntersector(i);return o.resolve((n=>e(t,v(i,r,s,n))))}return O().then((n=>{const a=n[N[e]].bind(null,t.spatialReference,t);return e=>a(v(i,r,s,e))}))},t.importGeometryEngine=O,t.normalizeFilter=async function(e,t,i){return T(e,t,i)},t.normalizeQuery=async function(e,t,i){const{outFields:r,orderByFields:s,groupByFieldsForStatistics:n,outStatistics:a}=e;if(r)for(let e=0;e<r.length;e++)r[e]=r[e].trim();if(s)for(let e=0;e<s.length;e++)s[e]=s[e].trim();if(n)for(let e=0;e<n.length;e++)n[e]=n[e].trim();if(a)for(let e=0;e<a.length;e++)a[e].onStatisticField&&(a[e].onStatisticField=a[e].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),T(e,t,i)},t.normalizeQueryLike=T,t.transformCentroid=b}.apply(t,r))||(e.exports=s)},27529:(e,t,i)=>{var r,s;r=[t,i(16194),i(69269)],void 0===(s=function(e,i,r){"use strict";let s=function(){function e(e,t){this._cache=new i(e),this._invalidCache=new i(t)}return e.prototype.get=function(e,t){const i=`${t.uid}:${e}`,s=this._cache.get(i);if(s)return s;if(void 0!==this._invalidCache.get(i))return null;try{const s=r.WhereClause.create(e,t);return this._cache.put(i,s),s}catch{return this._invalidCache.put(i,null),null}},e}();t.WhereClauseCache=s,Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},24088:(e,t,i)=>{var r,s;r=[t,i(3718),i(12997),i(18167)],void 0===(s=function(e,i,r,s){"use strict";function n(e=p){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function a(e,t,i,r,s,a,o=n()){return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=s,o[5]=a,o}function o(e){return e[0]>=e[3]?0:e[3]-e[0]}function u(e){return e[1]>=e[4]?0:e[4]-e[1]}function l(e){return e[2]>=e[5]?0:e[5]-e[2]}function c(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function h(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function f(e){return 6===e.length}const d=[1/0,1/0,1/0,-1/0,-1/0,-1/0],p=[0,0,0,0,0,0],m=n();t.NEGATIVE_INFINITY=d,t.POSITIVE_INFINITY=[-1/0,-1/0,-1/0,1/0,1/0,1/0],t.ZERO=p,t.allFinite=function(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0},t.center=function(e,t=[0,0,0]){return t[0]=e[0]+o(e)/2,t[1]=e[1]+u(e)/2,t[2]=e[2]+l(e)/2,t},t.contains=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]},t.containsPoint=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]},t.containsPointWithMargin=function(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[2]>=e[2]-i&&t[0]<=e[3]+i&&t[1]<=e[4]+i&&t[2]<=e[5]+i},t.create=n,t.depth=u,t.diameter=function(e){const t=o(e),i=l(e),r=u(e);return Math.sqrt(t*t+i*i+r*r)},t.empty=function(e){return e?h(e,d):n(d)},t.equals=function(e,t,r){if(i.isNone(e)||i.isNone(t))return e===t;if(!f(e)||!f(t))return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},t.expandWithAABB=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])},t.expandWithBuffer=function(e,t,i=0,r=t.length/3){let s=e[0],n=e[1],a=e[2],o=e[3],u=e[4],l=e[5];for(let e=0;e<r;e++)s=Math.min(s,t[i+3*e]),n=Math.min(n,t[i+3*e+1]),a=Math.min(a,t[i+3*e+2]),o=Math.max(o,t[i+3*e]),u=Math.max(u,t[i+3*e+1]),l=Math.max(l,t[i+3*e+2]);e[0]=s,e[1]=n,e[2]=a,e[3]=o,e[4]=u,e[5]=l},t.expandWithNestedArray=function(e,t,i){const r=t.length;let s=e[0],n=e[1],a=e[2],o=e[3],u=e[4],l=e[5];if(i)for(let e=0;e<r;e++){const i=t[e];s=Math.min(s,i[0]),n=Math.min(n,i[1]),a=Math.min(a,i[2]),o=Math.max(o,i[0]),u=Math.max(u,i[1]),l=Math.max(l,i[2])}else for(let e=0;e<r;e++){const i=t[e];s=Math.min(s,i[0]),n=Math.min(n,i[1]),o=Math.max(o,i[0]),u=Math.max(u,i[1])}e[0]=s,e[1]=n,e[2]=a,e[3]=o,e[4]=u,e[5]=l},t.expandWithOffset=function(e,t,i,r){e[0]=Math.min(e[0],e[0]+t),e[3]=Math.max(e[3],e[3]+t),e[1]=Math.min(e[1],e[1]+i),e[4]=Math.max(e[4],e[4]+i),e[2]=Math.min(e[2],e[2]+r),e[5]=Math.max(e[5],e[5]+r)},t.expandWithRect=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])},t.expandWithVec3=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])},t.fromExtent=function(e,t=n()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.zmin,t[3]=e.xmax,t[4]=e.ymax,t[5]=e.zmax,t},t.fromMinMax=function(e,t,i=n()){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=t[0],i[4]=t[1],i[5]=t[2],i},t.fromRect=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e},t.fromValues=a,t.getMax=function(e,t){return t[0]=e[3],t[1]=e[4],t[2]=e[5],t},t.getMin=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.height=l,t.intersects=c,t.intersectsClippingArea=function(e,t){return!!i.isNone(t)||c(e,t)},t.is=f,t.isPoint=function(e){return 0===o(e)&&0===u(e)&&0===l(e)},t.maximumDimension=function(e){return Math.max(o(e),l(e),u(e))},t.offset=function(e,t,i,r,s=e){return s[0]=e[0]+t,s[1]=e[1]+i,s[2]=e[2]+r,s[3]=e[3]+t,s[4]=e[4]+i,s[5]=e[5]+r,s},t.scale=function(e,t,i=e){const r=e[0]+o(e)/2,s=e[1]+u(e)/2,n=e[2]+l(e)/2;return i[0]=r+(e[0]-r)*t,i[1]=s+(e[1]-s)*t,i[2]=n+(e[2]-n)*t,i[3]=r+(e[3]-r)*t,i[4]=s+(e[4]-s)*t,i[5]=n+(e[5]-n)*t,i},t.set=h,t.setMax=function(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e},t.setMin=function(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i},t.size=function(e,t=[0,0,0]){return t[0]=o(e),t[1]=u(e),t[2]=l(e),t},t.toExtent=function(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new r(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})},t.toRect=function(e,t){return t||(t=s.create()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t},t.width=o,t.wrap=function(e,t,i,r,s,n){return a(e,t,i,r,s,n,m)},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},28714:(e,t)=>{var i;void 0===(i=function(e){"use strict";function i(e,t){return e?t?4:3:t?3:2}function r(e,t,r,n,a){if(!e)return!1;const o=i(t,r),{coords:u,lengths:l}=e;let c=!1,h=0;for(const e of l)c=s(c,u,o,h,e,n,a),h+=e*o;return c}function s(e,t,i,r,s,n,a){let o=e,u=r;for(let e=r,l=r+s*i;e<l;e+=i){u=e+i,u===l&&(u=r);const s=t[e],c=t[e+1],h=t[u],f=t[u+1];(c<a&&f>=a||f<a&&c>=a)&&s+(a-c)/(f-c)*(h-s)<n&&(o=!o)}return o}t.polygonContainsCoords=r,t.polygonContainsMultipoint=function(e,t,s,n,a,o){const u=i(a,o),{coords:l,lengths:c}=n;if(!c)return!1;for(let i=0,n=0;i<c.length;i++,n+=u)if(!r(e,t,s,l[n],l[n+1]))return!1;return!0},t.polygonContainsPoint=function(e,t,i,s){return r(e,t,i,s.coords[0],s.coords[1])},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,[t]))||(e.exports=i)},97642:(e,t,i)=>{var r,s;r=[i(3718),i(23514)],void 0===(s=function(e,t){"use strict";return function(){function i(e,i,r){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=e.returnDistinctValues,this.fieldsIndex=r,this.featureAdapter=i;const s=e.outFields;if(s&&-1===s.indexOf("*")){this.outFields=s;let e=0;for(const i of s){const s=t.getExpressionFromFieldName(i),n=this.fieldsIndex.get(s),a=n?null:t.getWhereClause(s,r),o=n?n.name:t.getAliasFromFieldName(i)||"FIELD_EXP_"+e++;this._fieldDataCache.set(i,{alias:o,clause:a})}}}var r=i.prototype;return r.countDistinctValues=function(e){return this.returnDistinctValues?(e.forEach((e=>this.getAttributes(e))),this._returnDistinctMap.size):e.length},r.getAttributes=function(e){const t=this._processAttributesForOutFields(e);return this._processAttributesForDistinctValues(t)},r.getFieldValue=function(e,i,r){const s=r?r.name:i;let n=null;return this._fieldDataCache.has(s)?n=this._fieldDataCache.get(s).clause:r||(n=t.getWhereClause(i,this.fieldsIndex),this._fieldDataCache.set(s,{alias:s,clause:n})),r?this.featureAdapter.getAttribute(e,s):n.calculateValue(e,this.featureAdapter)},r.validateItem=function(e,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:t.getWhereClause(i,this.fieldsIndex)}),this._fieldDataCache.get(i).clause.testFeature(e,this.featureAdapter)},r.validateItems=function(e,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:t.getWhereClause(i,this.fieldsIndex)}),this._fieldDataCache.get(i).clause.testSet(e,this.featureAdapter)},r._processAttributesForOutFields=function(e){const t=this.outFields;if(!t||!t.length)return this.featureAdapter.getAttributes(e);const i={};for(const r of t){const{alias:t,clause:s}=this._fieldDataCache.get(r);i[t]=s?s.calculateValue(e,this.featureAdapter):this.featureAdapter.getAttribute(e,t)}return i},r._processAttributesForDistinctValues=function(t){if(e.isNone(t)||!this.returnDistinctValues)return t;const i=this.outFields,r=[];if(i)for(const e of i){const{alias:i}=this._fieldDataCache.get(e);r.push(t[i])}else for(const e in t)r.push(t[e]);const s=`${(i||["*"]).join(",")}=${r.join(",")}`;let n=this._returnDistinctMap.get(s)||0;return this._returnDistinctMap.set(s,++n),n>1?null:t},i}()}.apply(t,r))||(e.exports=s)},28405:(e,t,i)=>{var r,s;r=[t,i(58797),i(92231),i(3718),i(49359),i(9720),i(56750),i(63629),i(57167),i(35477),i(18167),i(94185),i(45858),i(97949),i(41565),i(24088),i(79043),i(23514),i(96701),i(85504),i(60115)],void 0===(s=function(e,i,r,s,n,a,o,u,l,c,h,f,d,p,m,y,g,x,_,S,I){"use strict";const w="feature-store:unsupported-query",F=new Set,R=new f.MemCacheStorage(2e6);let M=0,b=function(){function e(e){this.capabilities={query:m.queryCapabilities},this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this.aggregateAdapter=e.aggregateAdapter,this._changeHandle=this.featureStore.events.on("changed",(()=>this.clearCache())),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new f.MemCache(M+++"$$",R)),this.fieldsIndex=new p(e.fields),e.scheduler&&e.task&&(this._frameQueue=new d,this._frameTask=e.scheduler.registerTask(e.task,(e=>this._update(e)),(()=>this._frameQueue.length>0)))}var t=e.prototype;return t.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null),this.clearCache(),this._geometryQueryCache&&this._geometryQueryCache.destroy(),this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null),this.fieldsIndex.destroy()},t.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear(),this._allItems=null,this._timeExtent=null},t.executeQuery=async function(e={},t){let i,s=r.clone(e);try{s=await this._schedule((()=>_.normalizeQuery(s,this.definitionExpression,this.spatialReference)),t),s=await this._reschedule((()=>this._checkQuerySupport(s)),t),i=await this._reschedule((()=>this._executeGeometryQuery(s,t)),t),i=await this._reschedule((()=>i.executeAggregateIdsQuery(s)),t),i=await this._reschedule((()=>i.executeObjectIdsQuery(s)),t),i=await this._reschedule((()=>i.executeTimeQuery(s)),t),i=await this._reschedule((()=>i.executeAttributesQuery(s)),t)}catch(e){if(e!==_.QUERY_ENGINE_EMPTY_RESULT)throw e;i=new I([],null,this)}return i.createQueryResponse(s)},t.executeQueryForCount=async function(e={},t){let i,s=r.clone(e);s.returnGeometry=!1,s.returnCentroid=!1,s.outSR=null;try{s=await this._schedule((()=>_.normalizeQuery(s,this.definitionExpression,this.spatialReference)),t),s=await this._reschedule((()=>this._checkQuerySupport(s)),t),i=await this._reschedule((()=>this._executeGeometryQuery(s,t)),t),i=await this._reschedule((()=>i.executeAggregateIdsQuery(s)),t),i=await this._reschedule((()=>i.executeObjectIdsQuery(s)),t),i=await this._reschedule((()=>i.executeTimeQuery(s)),t),i=await this._reschedule((()=>i.executeAttributesQuery(s)),t)}catch(e){if(e!==_.QUERY_ENGINE_EMPTY_RESULT)throw e;return 0}return i.createQueryResponseForCount(s)},t.executeQueryForExtent=async function(e={},t){let i,s=r.clone(e);const n=s.outSR;try{s=await this._schedule((()=>_.normalizeQuery(s,this.definitionExpression,this.spatialReference)),t),s=await this._reschedule((()=>this._checkQuerySupport(s)),t),s.returnGeometry=!0,s.returnCentroid=!1,s.outSR=null,i=await this._reschedule((()=>this._executeGeometryQuery(s,t)),t),i=await this._reschedule((()=>i.executeAggregateIdsQuery(s)),t),i=await this._reschedule((()=>i.executeObjectIdsQuery(s)),t),i=await this._reschedule((()=>i.executeTimeQuery(s)),t),i=await this._reschedule((()=>i.executeAttributesQuery(s)),t);const e=i.size;if(!e)return{count:e,extent:null};y.set(T,y.NEGATIVE_INFINITY),this.featureStore.forEachBounds(i.items,(e=>y.expandWithAABB(T,e)),v);const r={xmin:T[0],ymin:T[1],xmax:T[3],ymax:T[4],spatialReference:_.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(T[2])&&isFinite(T[5])&&(r.zmin=T[2],r.zmax=T[5]);const a=g.project(r,i.spatialReference,n);if(a.spatialReference=_.cleanFromGeometryEngine(n||this.spatialReference),a.xmax-a.xmin==0){const e=c.getMetersPerUnitForSR(a.spatialReference);a.xmin-=e,a.xmax+=e}if(a.ymax-a.ymin==0){const e=c.getMetersPerUnitForSR(a.spatialReference);a.ymin-=e,a.ymax+=e}if(this.hasZ&&null!=a.zmin&&null!=a.zmax&&a.zmax-a.zmin==0){const e=c.getMetersPerUnitForSR(a.spatialReference);a.zmin-=e,a.zmax+=e}return{count:e,extent:a}}catch(e){if(e===_.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw e}},t.executeQueryForIds=async function(e={},t){return this.executeQueryForIdSet(e,t).then((e=>Array.from(e)))},t.executeQueryForIdSet=async function(e={},t){let i,s=r.clone(e);s.returnGeometry=!1,s.returnCentroid=!1,s.outSR=null;try{s=await this._schedule((()=>_.normalizeQuery(s,this.definitionExpression,this.spatialReference)),t),s=await this._reschedule((()=>this._checkQuerySupport(s)),t),i=await this._reschedule((()=>this._executeGeometryQuery(s,t)),t),i=await this._reschedule((()=>i.executeAggregateIdsQuery(s)),t),i=await this._reschedule((()=>i.executeObjectIdsQuery(s)),t),i=await this._reschedule((()=>i.executeTimeQuery(s)),t),i=await this._reschedule((()=>i.executeAttributesQuery(s)),t);const e=i.items,r=new Set;return await this._reschedule((()=>{for(const t of e)r.add(i.featureAdapter.getObjectId(t))}),t),r}catch(e){if(e===_.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw e}},t.executeQueryForLatestObservations=async function(e={},t){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new n(w,"Missing timeInfo or timeInfo.trackIdField",{query:e,timeInfo:this.timeInfo});let i,s=r.clone(e);try{s=await this._schedule((()=>_.normalizeQuery(s,this.definitionExpression,this.spatialReference)),t),s=await this._reschedule((()=>this._checkQuerySupport(s)),t),i=await this._reschedule((()=>this._executeGeometryQuery(s,t)),t),i=await this._reschedule((()=>i.executeAggregateIdsQuery(s)),t),i=await this._reschedule((()=>i.executeObjectIdsQuery(s)),t),i=await this._reschedule((()=>i.executeTimeQuery(s)),t),i=await this._reschedule((()=>i.executeAttributesQuery(s)),t),i=await this._reschedule((()=>i.filterLatest()),t)}catch(e){if(e!==_.QUERY_ENGINE_EMPTY_RESULT)throw e;i=new I([],null,this)}return i.createQueryResponse(s)},t._schedule=async function(e,t){return this._frameQueue?this._frameQueue.push(e,t):e()},t._reschedule=async function(e,t){return this._frameQueue?this._frameQueue.unshift(e,t):e()},t._update=function(e){for(this._budget=e;!e.done&&this._frameQueue&&this._frameQueue.process();)e.madeProgress();this._budget=null},t._getAll=function(){if(!this._allItems){const e=[];this.featureStore.forEach((t=>e.push(t))),this._allItems=new I(e,null,this)}return this._allItems},t._executeGeometryQuery=async function(e,t){const{geometry:i,outSR:r,spatialRel:n}=e,a=o.isValid(r)&&!o.equals(this.spatialReference,r),u=this._geometryQueryCache?a?JSON.stringify({geometry:i,spatialRelationship:n,outSpatialReference:r}):JSON.stringify({geometry:i,spatialRelationship:n}):null;if(u){const e=this._geometryQueryCache.get(u);if(!s.isUndefined(e))return e}const l=async t=>{if(a&&(e.returnGeometry||e.returnCentroid)){const e=await t.project(r);return u&&this._geometryQueryCache.put(u,e,e.size||1),e}return u&&this._geometryQueryCache.put(u,t,t.size||1),t};if(!i)return l(this._getAll());const c=this.featureAdapter;if("esriSpatialRelDisjoint"===n){const e=this._searchFeatures(this._getQueryBBoxes(i));if(!e.length)return l(this._getAll());let r,s;const a=new Set;for(const t of e)a.add(c.getObjectId(t));return await this._reschedule((()=>{let e=0;r=new Array(a.size),this.featureStore.forEach((t=>r[e++]=t)),s=a}),t),l(await this._reschedule((async()=>{const e=await _.getSpatialQueryOperator(n,i,this.geometryType,this.hasZ,this.hasM);return new I(await this._runSpatialFilter(r,(t=>!s.has(c.getObjectId(t))||e(c.getGeometry(t))),t),i,this)}),t))}const h=this._searchFeatures(this._getQueryBBoxes(i));if(!h.length){const e=new I([],i,this);return u&&this._geometryQueryCache.put(u,e,e.size||1),e}if(this._canExecuteSoloPass(i,e))return l(new I(h,i,this));const f=await _.getSpatialQueryOperator(n,i,this.geometryType,this.hasZ,this.hasM),d=await this._runSpatialFilter(h,(e=>f(c.getGeometry(e))),t);return l(new I(d,i,this))},t._runSpatialFilter=async function(e,t,i){if(!t)return e;if(!this._budget)return e.filter((e=>t(e)));let r=0;const s=new Array,n=async()=>{for(;r<e.length;){const a=e[r];t(a)&&s.push(a),this._budget.done&&await this._reschedule((()=>n()),i),++r}};return this._reschedule((()=>n()),i).then((()=>s))},t._canExecuteSoloPass=function(e,t){const{geometryType:i}=this,{spatialRel:r}=t;return _.canQueryWithRBush(e)&&("esriSpatialRelEnvelopeIntersects"===r||"esriGeometryPoint"===i&&("esriSpatialRelIntersects"===r||"esriSpatialRelContains"===r||"esriSpatialRelWithin"===r))},t._getQueryBBoxes=function(e){if(_.canQueryWithRBush(e)){if(l.isExtent(e))return[h.fromValues(e.xmin,e.ymin,e.xmax,e.ymax)];if(l.isPolygon(e))return e.rings.map((e=>h.fromValues(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))))}return[u.getBoundsXY(h.create(),e)]},t._searchFeatures=function(e){for(const t of e)this.featureStore.forEachInBounds(t,(e=>{F.add(e)}));const t=new Array(F.size);let i=0;return F.forEach((e=>t[i++]=e)),F.clear(),t},t._checkQuerySupport=async function(e){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new n(w,"Unsupported query options",{query:e});return a.all([this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),_.checkSpatialQuerySupport(e,this.geometryType,this.spatialReference),g.checkProjectionSupport(this.spatialReference,e.outSR)]).then((()=>e))},t._checkAttributesQuerySupport=function(e){const{outFields:t,orderByFields:i,returnDistinctValues:r,outStatistics:s}=e,a=s?s.map((e=>e.outStatisticFieldName&&e.outStatisticFieldName.toLowerCase())):[];if(i&&i.length>0){const e=" asc",t=" desc",r=i.map((i=>{const r=i.toLowerCase();return r.indexOf(e)>-1?r.split(e)[0]:r.indexOf(t)>-1?r.split(t)[0]:i})).filter((e=>-1===a.indexOf(e)));x.validateFields(this.fieldsIndex,r,"orderByFields contains missing fields")}if(t&&t.length>0)x.validateFields(this.fieldsIndex,t,"outFields contains missing fields");else if(r)throw new n(w,"outFields should be specified for returnDistinctValues",{query:e});x.validateWhere(this.fieldsIndex,e.where)},t._checkStatisticsQuerySupport=async function(e){const{outStatistics:t,groupByFieldsForStatistics:i,having:r}=e,s=i&&i.length,a=t&&t.length;if(r){if(!s||!a)throw new n(w,"outStatistics and groupByFieldsForStatistics should be specified with having",{query:e});x.validateHaving(this.fieldsIndex,r,t)}if(a){if(!function(e){return e.every((e=>"exceedslimit"!==e.statisticType))}(t))return;const r=t.map((e=>e.onStatisticField));x.validateFields(this.fieldsIndex,r,"onStatisticFields contains missing fields"),s&&x.validateFields(this.fieldsIndex,i,"groupByFieldsForStatistics contains missing fields");for(const i of t){const{onStatisticField:t,statisticType:r}=i;if("percentile_disc"!==r&&"percentile_cont"!==r||!("statisticParameters"in i)){if("count"!==r&&t&&x.hasInvalidFieldType(t,this.fieldsIndex))throw new n(w,"outStatistics contains non-numeric fields",{definition:i,query:e})}else{const{statisticParameters:t}=i;if(!t)throw new n(w,"statisticParamters should be set for percentile type",{definition:i,query:e})}}}},i._createClass(e,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const e=this.featureStore.fullBounds;return e?{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:_.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?(this._timeExtent||(this._timeExtent=S.getTimeExtent(this.timeInfo,this.featureStore)),this._timeExtent):null}}]),e}();const v=y.create(),T=y.create();t.Feature=function(e,t=null,i,r,s){this.attributes=e,this.geometry=i,this.centroid=r,this.filterFlags=s,this.groupId=-1,this.displayId=t},t.default=b,Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},41565:(e,t)=>{var i;void 0===(i=function(e){"use strict";t.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,[t]))||(e.exports=i)},60115:(e,t,i)=>{var r,s;r=[i(58797),i(3718),i(9720),i(56750),i(16985),i(79043),i(5999),i(23514),i(97642),i(96701),i(85504)],void 0===(s=function(e,t,i,r,s,n,a,o,u,l,c){"use strict";function h(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function f(e,t,i){return(i?e>t:e<t)?-1:(i?e<t:e>t)?1:0}function d(e,t,i){return i?t-e:e-t}function p(e,t,i,r){if(i&&"esriFieldTypeDate"===i.type){const i=new Date(e).getTime(),s=new Date(t).getTime();if(!isNaN(i)&&!isNaN(s))return d(i,s,r)}if("number"==typeof e&&"number"==typeof t)return d(e,t,r);if("string"==typeof e&&"string"==typeof t){const s=e.toUpperCase(),n=t.toUpperCase();return!i||"esriFieldTypeGUID"!==i.type&&"esriFieldTypeGlobalID"!==i.type?f(s,n,r):f(h(s),h(n),r)}return r?1:-1}return function(){function h(e,t,i){this.items=e,this.queryGeometry=t,this.definitionExpression=i.definitionExpression,this.geometryType=i.geometryType,this.hasM=i.hasM,this.hasZ=i.hasZ,this.objectIdField=i.objectIdField,this.spatialReference=i.spatialReference,this.fieldsIndex=i.fieldsIndex,this.timeInfo=i.timeInfo,this.featureAdapter=i.featureAdapter,this.aggregateAdapter=i.aggregateAdapter}var f=h.prototype;return f.createQueryResponseForCount=function(e){const t=new u(e,this.featureAdapter,this.fieldsIndex);if(!e.outStatistics)return t.countDistinctValues(this.items);const{groupByFieldsForStatistics:i,having:r}=e;if(!(null==i?void 0:i.length))return 1;const s=new Map,n=new Map,a=new Set,o=e.outStatistics;for(const e of o){const{statisticType:o}=e,u="exceedslimit"!==o?e.onStatisticField:void 0;if(!n.has(u)){const e=[];for(const r of i){const i=this._getAttributeValues(t,r,s);e.push(i)}n.set(u,this._calculateUniqueValues(e))}const l=n.get(u);for(const e in l){const{data:i,items:s}=l[e],n=i.join(",");r&&!t.validateItems(s,r)||a.add(n)}}return a.size},f.createQueryResponse=function(e){let t;return t=e.outStatistics?e.outStatistics.some((e=>"exceedslimit"===e.statisticType))?this._createExceedsLimitQueryResponse(e):this._createStatisticsQueryResponse(e):this._createFeatureQueryResponse(e),e.returnQueryGeometry&&(r.isValid(e.outSR)&&!r.equals(this.queryGeometry.spatialReference,e.outSR)?t.queryGeometry=l.cleanFromGeometryEngine({spatialReference:e.outSR,...n.project(this.queryGeometry,this.queryGeometry.spatialReference,e.outSR)}):t.queryGeometry=l.cleanFromGeometryEngine({spatialReference:e.outSR,...this.queryGeometry})),t},f.executeAttributesQuery=function(e){const t=o.getWhereClause(e.where,this.fieldsIndex);if(!t)return i.resolve(this);if(t.isStandardized){let r=0;const s=[];for(const e of this.items)t.testFeature(e,this.featureAdapter)&&(s[r++]=e);const n=new h(s,this.queryGeometry,this);return n.definitionExpression=e.where,i.resolve(n)}return i.reject(new TypeError("Where clause is not standardized"))},f.executeAggregateIdsQuery=function(e){if(!e.aggregateIds||!e.aggregateIds.length||t.isNone(this.aggregateAdapter))return i.resolve(this);const r=new Set;for(const t of e.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(t).forEach((e=>r.add(e)));const s=this.featureAdapter.getObjectId;return i.resolve(new h(this.items.filter((e=>r.has(s(e)))),this.queryGeometry,this))},f.executeObjectIdsQuery=function(e){if(!e.objectIds||!e.objectIds.length)return i.resolve(this);const t=new Set(e.objectIds),r=this.featureAdapter.getObjectId;return i.resolve(new h(this.items.filter((e=>t.has(r(e)))),this.queryGeometry,this))},f.executeTimeQuery=function(e){const r=c.getTimeOperator(this.timeInfo,e.timeExtent,this.featureAdapter);if(!t.isSome(r))return i.resolve(this);const s=this.items.filter(r);return i.resolve(new h(s,this.queryGeometry,this))},f.filterLatest=function(){const{trackIdField:e,startTimeField:t,endTimeField:r}=this.timeInfo,s=r||t,n=new Map,a=this.featureAdapter.getAttribute;for(const t of this.items){const i=a(t,e),r=a(t,s),o=n.get(i);(!o||r>a(o,s))&&n.set(i,t)}const o=Array.from(n.values());return i.resolve(new h(o,this.queryGeometry,this))},f.project=async function(e){if(!e||r.equals(this.spatialReference,e))return this;const t=this.featureAdapter;return new h((await n.projectMany(this.items.map((e=>l.getGeometry(this.geometryType,this.hasZ,this.hasM,t.getGeometry(e)))),this.spatialReference,e)).map(((e,i)=>t.cloneWithGeometry(this.items[i],s.convertFromGeometry(e,this.hasZ,this.hasM)))),this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:e,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})},f._sortFeatures=function(e,t,i){if(e.length>1&&t&&t.length)for(const r of t.reverse()){const t=r.split(" "),s=t[0],n=this.fieldsIndex.get(s),a=t[1]&&"desc"===t[1].toLowerCase();e.sort(((e,t)=>p(i(e,s,n),i(t,s,n),n,a)))}},f._createFeatureQueryResponse=function(e){const t=this.items,{geometryType:i,hasM:r,hasZ:s,objectIdField:n,spatialReference:o}=this,{outFields:u,outSR:c,quantizationParameters:h,resultRecordCount:f,resultOffset:d,returnZ:p,returnM:m}=e,y=null!=f&&t.length>(d||0)+f,g=u&&(u.indexOf("*")>-1?[...this.fieldsIndex.fields]:u.map((e=>this.fieldsIndex.get(e))));return{exceededTransferLimit:y,features:this._createFeatures(e,t),fields:g,geometryType:i,hasM:r&&m,hasZ:s&&p,objectIdFieldName:n,spatialReference:l.cleanFromGeometryEngine(c||o),transform:h&&a.toQuantizationTransform(h)||null}},f._createFeatures=function(e,t){const i=new u(e,this.featureAdapter,this.fieldsIndex),{hasM:r,hasZ:s}=this,{orderByFields:n,quantizationParameters:o,returnGeometry:c,returnCentroid:h,maxAllowableOffset:f,resultOffset:d,resultRecordCount:p,returnZ:m=!1,returnM:y=!1}=e,g=s&&m,x=r&&y;let _=[],S=0;const I=[...t];if(this._sortFeatures(I,n,((e,t,r)=>i.getFieldValue(e,t,r))),c||h){const e=a.toQuantizationTransform(o);if(c&&!h)for(const t of I)_[S++]={attributes:i.getAttributes(t),geometry:l.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),f,e,g,x)};else if(!c&&h)for(const t of I)_[S++]={attributes:i.getAttributes(t),centroid:l.transformCentroid(this,this.featureAdapter.getCentroid(t,this),e)};else for(const t of I)_[S++]={attributes:i.getAttributes(t),centroid:l.transformCentroid(this,this.featureAdapter.getCentroid(t,this),e),geometry:l.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),f,e,g,x)}}else for(const e of I){const t=i.getAttributes(e);t&&(_[S++]={attributes:t})}const w=d||0;if(null!=p){const e=w+p;_=_.slice(w,Math.min(_.length,e))}return _},f._createExceedsLimitQueryResponse=function(e){let t=!1,i=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(const t of e.outStatistics)if("exceedslimit"===t.statisticType){i=null!=t.maxPointCount?t.maxPointCount:Number.POSITIVE_INFINITY,r=null!=t.maxRecordCount?t.maxRecordCount:Number.POSITIVE_INFINITY,s=null!=t.maxVertexCount?t.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)t=this.items.length>i;else if(this.items.length>r)t=!0;else{const e=this.hasZ?this.hasM?4:3:this.hasM?3:2,i=this.featureAdapter;t=this.items.reduce(((e,t)=>{const r=i.getGeometry(t);return e+(r&&r.coords.length||0)}),0)/e>s}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(t)}}]}},f._createStatisticsQueryResponse=function(e){const t={attributes:{}},i=[],r=new Map,s=new Map,n=new Map,a=new Map,o=new u(e,this.featureAdapter,this.fieldsIndex),l=e.outStatistics,{groupByFieldsForStatistics:c,having:h,orderByFields:f}=e,d=c&&c.length,p=!!d,m=p&&c[0],y=p&&!this.fieldsIndex.get(m);for(const e of l){const{outStatisticFieldName:u,statisticType:l}=e,f=e,g="exceedslimit"!==l?e.onStatisticField:void 0,x="percentile_disc"===l||"percentile_cont"===l,_=p&&1===d&&(g===m||y)&&"count"===l;if(p){if(!n.has(g)){const e=[];for(const t of c){const i=this._getAttributeValues(o,t,r);e.push(i)}n.set(g,this._calculateUniqueValues(e))}const e=n.get(g);for(const t in e){const{count:i,data:s,items:n,itemPositions:l}=e[t],d=s.join(",");if(!h||o.validateItems(n,h)){const e=a.get(d)||{attributes:{}};let t=null;if(_)t=i;else{const e=this._getAttributeValues(o,g,r),i=l.map((t=>e[t]));t=x&&"statisticParameters"in f?this._getPercentileValue(f,i):this._getStatisticValue(f,i)}e.attributes[u]=t,c.forEach(((t,i)=>e.attributes[this.fieldsIndex.get(t)?t:`EXPR_${i+1}`]=s[i])),a.set(d,e)}}}else{const e=this._getAttributeValues(o,g,r);t.attributes[u]=x&&"statisticParameters"in f?this._getPercentileValue(f,e):this._getStatisticValue(f,e,s)}i.push({name:u,alias:u,type:"esriFieldTypeDouble"})}const g=p?Array.from(a.values()):[t];return this._sortFeatures(g,f,((e,t)=>e.attributes[t])),{fields:i,features:g}},f._getStatisticValue=function(e,t,i){const{onStatisticField:r,statisticType:s}=e,n=i&&i.has(r)?i.get(r):this._calculateStatistics(t);return i&&i.set(r,n),n["var"===s?"variance":s]},f._getPercentileValue=function(e,t){const{onStatisticField:i,statisticParameters:r,statisticType:s}=e,{value:n,orderBy:a}=r,o="desc"===a,u=this.fieldsIndex.get(i),l=[...t].filter((e=>null!=e)).sort(((e,t)=>p(e,t,u,o)));return this._calculatePercentile(l,n,"percentile_disc"===s)},f._getAttributeValues=function(e,t,i){if(i.has(t))return i.get(t);const r=this.fieldsIndex.get(t),s=this.items.map((i=>e.getFieldValue(i,t,r)));return i.set(t,s),s},f._calculateStatistics=function(e){let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=null,s=null,n=null,a=null;const o=[];let u=0;for(const s of e)"string"==typeof s?u++:null==s||isNaN(s)||(r+=s,t=Math.min(t,s),i=Math.max(i,s),o.push(s),u++);if(u){s=r/u;let e=0;for(const t of o)e+=Math.pow(t-s,2);a=u>1?e/(u-1):0,n=Math.sqrt(a)}else t=null,i=null;return{avg:s,count:u,max:i,min:t,stddev:n,sum:r,variance:a}},f._calculateUniqueValues=function(e){const t={},i=this.items,r=i.length;for(let s=0;s<r;s++){const r=i[s],n=[];for(const t of e)n.push(t[s]);const a=n.join(",");null==t[a]?t[a]={count:1,data:n,items:[r],itemPositions:[s]}:(t[a].count++,t[a].items.push(r),t[a].itemPositions.push(s))}return t},f._calculatePercentile=function(e,t,i){if(0===e.length)return null;if(t<=0)return e[0];if(t>=1)return e[e.length-1];const r=(e.length-1)*t,s=Math.floor(r),n=s+1,a=r%1,o=e[s],u=e[n];return n>=e.length||i||"string"==typeof o||"string"==typeof u?o:o*(1-a)+u*a},e._createClass(h,[{key:"size",get:function(){return this.items.length}}]),h}()}.apply(t,r))||(e.exports=s)},23514:(e,t,i)=>{var r,s;r=[t,i(49359),i(27529)],void 0===(s=function(e,i,r){"use strict";const s=new r.WhereClauseCache(50,500),n="feature-store:unsupported-query",a=" as ",o=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function u(e,t){return e?s.get(e,t):null}function l(e,t,r,s=!0){const a=[];for(const r of t)if("*"!==r&&!e.has(r))if(s){const t=c(r);try{const r=u(t,e);if(!r)throw new i(n,"invalid SQL expression",{where:t});if(!r.isStandardized)throw new i(n,"expression is not standard",{clause:r});l(e,r.fieldNames,"expression contains missing fields")}catch(e){const t=e&&e.details;if(t&&(t.clause||t.where))throw e;t&&t.missingFields?a.push(...t.missingFields):a.push(r)}}else a.push(r);if(a.length)throw new i(n,r,{missingFields:a})}function c(e){return e.split(a)[0]}t.getAliasFromFieldName=function(e){return e.split(a)[1]},t.getExpressionFromFieldName=c,t.getWhereClause=u,t.hasInvalidFieldType=function(e,t){const i=t.get(e);return!!i&&!o.has(i.type)},t.validateFields=l,t.validateHaving=function(e,t,r){if(!t)return!0;const a=s.get(t,e);if(!a)throw new i(n,"invalid SQL expression",{having:t});if(!a.isAggregate)throw new i(n,"having does not contain a valid aggregate function",{having:t});const o=a.fieldNames;if(l(e,o,"having contains missing fields"),!a.getExpressions().every((t=>{const{aggregateType:i,field:s}=t,n=e.has(s)&&e.get(s).name;return r.some((t=>{const{onStatisticField:r,statisticType:s}=t;return(e.has(r)&&e.get(r).name)===n&&s.toLowerCase().trim()===i}))})))throw new i(n,"expressions in having should also exist in outStatistics",{having:t});return!0},t.validateWhere=function(e,t){if(!t)return!0;const r=s.get(t,e);if(!r)throw new i(n,"invalid SQL expression",{where:t});if(!r.isStandardized)throw new i(n,"where clause is not standard",{where:t});return l(e,r.fieldNames,"where clause contains missing fields"),!0},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},85504:(e,t)=>{var i;void 0===(i=function(e){"use strict";t.getTimeExtent=function(e,t){if(!e)return null;const i=t.featureAdapter,{startTimeField:r,endTimeField:s}=e;let n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;if(r&&s)t.forEach((e=>{const t=i.getAttribute(e,r),o=i.getAttribute(e,s);null==t||isNaN(t)||(n=Math.min(n,t)),null==o||isNaN(o)||(a=Math.max(a,o))}));else{const e=r||s;t.forEach((t=>{const r=i.getAttribute(t,e);null==r||isNaN(r)||(n=Math.min(n,r),a=Math.max(a,r))}))}return{start:n,end:a}},t.getTimeOperator=function(e,t,i){if(!t||!e)return null;const{startTimeField:r,endTimeField:s}=e;if(!r&&!s)return null;const{start:n,end:a}=t;return null===n&&null===a?null:void 0===n&&void 0===a?()=>!1:r&&s?function(e,t,i,r,s){return null!=r&&null!=s?n=>{const a=e.getAttribute(n,t),o=e.getAttribute(n,i);return(null==a||a<=s)&&(null==o||o>=r)}:null!=r?t=>{const s=e.getAttribute(t,i);return null==s||s>=r}:null!=s?i=>{const r=e.getAttribute(i,t);return null==r||r<=s}:void 0}(i,r,s,n,a):function(e,t,i,r){return null!=i&&null!=r&&i===r?r=>e.getAttribute(r,t)===i:null!=i&&null!=r?s=>{const n=e.getAttribute(s,t);return n>=i&&n<=r}:null!=i?r=>e.getAttribute(r,t)>=i:null!=r?i=>e.getAttribute(i,t)<=r:void 0}(i,r||s,n,a)},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,[t]))||(e.exports=i)},21863:(e,t,i)=>{var r,s;r=[t,i(74637),i(92231),i(63063)],void 0===(s=function(e,i,r,s){"use strict";t.createDefaultAttributesFunction=function(e,t){if(i("csp-restrictions"))return()=>({[t]:null,...e});try{let i=`this.${t} = null;`;for(const t in e)i+=`this${t.indexOf(".")?`["${t}"]`:`.${t}`} = ${JSON.stringify(e[t])};`;const r=new Function(i);return()=>new r}catch(i){return()=>({[t]:null,...e})}},t.createDefaultTemplate=function(e={}){return[{name:"New Feature",description:"",prototype:{attributes:r.clone(e)}}]},t.createDrawingInfo=function(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s.defaultPointSymbolJSON:"esriGeometryPolyline"===e?s.defaultPolylineSymbolJSON:s.defaultPolygonSymbolJSON}}},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)}}]);