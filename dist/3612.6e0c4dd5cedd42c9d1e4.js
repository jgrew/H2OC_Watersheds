(self.webpackChunkh2oc=self.webpackChunkh2oc||[]).push([[3612],{40660:(e,t,i)=>{var r;void 0===(r=function(){"use strict";return function(){function e(e=15e3,t=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=e,this._interval=Math.min(e,t)}var t=e.prototype;return t.decreaseRefCount=function(e,t){const i=e+"/"+t,r=this._cachedBlocks;if(r.has(i)){const e=r.get(i);return e.refCount--,e.refCount<=0&&(r.delete(i),e.controller&&e.controller.abort()),e.refCount}return 0},t.getBlock=function(e,t){const i=e+"/"+t,r=this._cachedBlocks;if(r.has(i)){const e=r.get(i);return e.ts=Date.now(),e.refCount++,r.delete(i),r.set(i,e),e.block}return null},t.putBlock=function(e,t,i,r=null){const s=this._cachedBlocks,n=e+"/"+t;if(s.has(n)){const e=s.get(n);e.ts=Date.now(),e.refCount++}else s.set(n,{block:i,ts:Date.now(),refCount:1,controller:r});this.trim(),this.updateTimer()},t.deleteBlock=function(e,t){const i=this._cachedBlocks,r=e+"/"+t;i.has(r)&&i.delete(r)},t.updateMaxSize=function(e){this._size=e,this.trim()},t.empty=function(){this._cachedBlocks.clear(),this.clearTimer()},t.getCurrentSize=function(){return this._cachedBlocks.size},t.updateTimer=function(){if(null!=this._timer)return;const e=this._cachedBlocks;this._timer=setInterval((()=>{const t=Array.from(e),i=Date.now();for(let r=0;r<t.length&&t[r][1].ts<=i-this._duration;r++)e.delete(t[r][0]);0===e.size&&this.clearTimer()}),this._interval)},t.trim=function(){const e=this._cachedBlocks;if(-1===this._size||this._size>=e.size)return;const t=Array.from(e);for(let i=0;i<t.length-this._size;i++)e.delete(t[i][0])},t.clearTimer=function(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)},e}()}.call(t,i,t,e))||(e.exports=r)},12491:(e,t,i)=>{var r,s;r=[t,i(3718),i(35558),i(26016),i(40660),i(85775)],void 0===(s=function(e,i,r,s,n,o){"use strict";const a=new Map,l=new n;t.decreaseRefCount=function(e,t,i){if(!a.has(e))return null==t?l.decreaseRefCount(e,i):0;const r=a.get(e);if(null==r[t])return l.decreaseRefCount(e,i);const s=r[t].cache;if(s.has(i)){const e=s.get(i);if(e.refCount--,0===e.refCount){s.delete(i);for(let e=0;e<r.length;e++)r[e]&&r[e].cache.has(i)&&r[e].cache.delete(i);e.controller&&e.controller.abort()}return e.refCount}return 0},t.deleteBlock=function(e,t,i){if(!a.has(e))return void(null==t&&l.deleteBlock(e,i));const r=a.get(e);null!=r[t]?r[t].cache.delete(i):l.deleteBlock(e,i)},t.deleteRaster=function(e){a.delete(e)},t.getBlock=function(e,t,i){if(!a.has(e))return null==t?l.getBlock(e,i):null;const r=a.get(e);if(null==r[t]){for(let e=0;e<r.length;e++)if(r[e]&&r[e].cache.has(i)){const t=r[e].cache.get(i);return t.refCount++,t.block}return l.getBlock(e,i)}const s=r[t].cache;if(s.has(i)){const e=s.get(i);return e.refCount++,e.block}for(let e=0;e<r.length;e++)if(e!==t&&r[e]&&r[e]&&r[e].cache.has(i)){const t=r[e].cache.get(i);return t.refCount++,s.set(i,t),t.block}return null},t.getRasterId=function(e,t){return null==t?e:`${e}?sliceId=${t}`},t.putBlock=function(e,t,i,r,s=null){if(!a.has(e))return void(null==t&&l.putBlock(e,i,r,s));const n=a.get(e);if(null==n[t])return void l.putBlock(e,i,r,s);const o={refCount:1,block:r,isResolved:!1,isRejected:!1,controller:s};r.then((()=>o.isResolved=!0)).catch((()=>o.isRejected=!0)),n[t].cache.set(i,o)},t.register=function(e,t){const i={extent:null,rasterInfo:t,cache:new Map};if(a.has(e)){const t=a.get(e);return t.push(i),t.length-1}return a.set(e,[i]),0},t.unregister=function(e,t){a.has(e)&&(a.get(e)[t]=null)},t.update=function(e,t,s,n,l,u,c=null){const h=function(e,t){if(!a.has(e))return null;const i=a.get(e);return null==i[t]?null:i[t]}(e,t),p=h.extent,{cache:d,rasterInfo:f}=h;if(p&&p.xmin===s.xmin&&p.xmax===s.xmax&&p.ymin===s.ymin&&p.ymax===s.ymax)return;const y=s.clone().normalize(),{spatialReference:m,transform:_}=f,g=new Set;for(let e=0;e<y.length;e++){const t=y[e];if(t.xmax-t.xmin<=n||t.ymax-t.ymin<=n)continue;let s=o.projectExtent(t,m,c);i.isSome(_)&&(s=_.inverseTransform(s));const a=new r({x:n,y:n,spatialReference:t.spatialReference});if(null===l&&!(l=o.projectResolution(a,m,t,c)))return;const{pyramidLevel:h,pyramidResolution:p,excessiveReading:d}=o.snapPyramid(l,f,u||"closest");if(d)return;const{storageInfo:x}=f,{origin:b}=x,v={x:Math.max(0,Math.floor((s.xmin-b.x)/p.x)),y:Math.max(0,Math.floor((b.y-s.ymax)/p.y))},w=Math.ceil((s.xmax-s.xmin)/p.x-.1),R=Math.ceil((s.ymax-s.ymin)/p.y-.1),T=h>0?x.pyramidBlockWidth:x.blockWidth,I=h>0?x.pyramidBlockHeight:x.blockHeight,P=1,M=Math.max(0,Math.floor(v.x/T)-P),k=Math.max(0,Math.floor(v.y/I)-P),S=Math.floor((v.x+w-1)/T)+P,C=Math.floor((v.y+R-1)/I)+P;for(let e=k;e<=C;e++)for(let t=M;t<=S;t++)g.add(`${h}/${e}/${t}`)}d.forEach(((e,t)=>{if(!g.has(t)){const e=d.get(t);(null==e||e.isResolved||e.isRejected)&&d.delete(t)}})),h.extent={xmin:s.xmin,ymin:s.ymin,xmax:s.xmax,ymax:s.ymax}},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},85775:(e,t,i)=>{var r,s;r=[t,i(49359),i(56750),i(70272),i(35558),i(12997),i(26016),i(35477),i(79928)],void 0===(s=function(e,i,r,s,n,o,a,l,u){"use strict";const c=5e-4,h=function(e,t){const i=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||i)};function p(e,t,r,n=null){if(e.spatialReference.equals(t))return e;const a=h(e.spatialReference,t);if(a&&!u.isLoaded())throw new i("rasterprojectionhelper-projectResolution","projection engine is not loaded");const l=r.center,c=new o({xmin:l.x-e.x/2,xmax:l.x+e.x/2,ymin:l.y-e.y/2,ymax:l.y+e.y/2,spatialReference:e.spatialReference}),p=a?u.project(c,t,n):s.project(c,t);return null==p?null:{x:p.xmax-p.xmin,y:p.ymax-p.ymin}}function d(e,t=.01){return l.getMetersPerUnitForSR(e)?t/l.getMetersPerUnitForSR(e):0}function f(e,t,n=null,o=!0){const a=e.spatialReference;if(a.equals(t))return e;const l=h(a,t);if(l&&!u.isLoaded())throw new i("rasterprojectionhelper-projectResolution","projection engine is not loaded");const p=l?u.project(e,t,n):s.project(e,t);if(p&&o&&t.isGeographic){var f,y;const[t,i]=a.isWebMercator?r.getInfo(a).origin:null!=(f=null==(y=r.getInfo(a))?void 0:y.valid)?f:[],s=d(a);s&&null!=t&&null!=i&&(Math.abs(e.x-t)<s&&Math.abs(180-p.x)<c?p.x-=360:Math.abs(e.x-i)<s&&Math.abs(180+p.x)<c&&(p.x+=360))}return p}function y(e,t,o=null,a=!0){var l,p,y,m;const _=e.spatialReference;if(_.equals(t))return e;const g=h(_,t);if(g&&!u.isLoaded())throw new i("rasterprojectionhelper-projectExtent","projection engine is not loaded");const x=g?u.project(e,t,o):s.project(e,t);let[b,v]=null!=(l=null==(p=r.getInfo(_))?void 0:p.origin)?l:[];if(x&&a&&_.isWebMercator&&t.isGeographic&&null!=b&&null!=v){const i=.001,r=1e3;if(Math.abs(e.xmin-b)<i&&Math.abs(v-e.xmax)>r&&Math.abs(180-x.xmax)<c){x.xmin=-180;const i=[];i.push(new n(e.xmax,e.ymin,_)),i.push(new n(e.xmax,(e.ymin+e.ymax)/2,_)),i.push(new n(e.xmax,e.ymax,_));const r=i.map((e=>f(e,t,o))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));x.xmax=Math.max.apply(null,r)}if(Math.abs(e.xmax-v)<i&&Math.abs(b-e.xmin)>r&&Math.abs(180+x.xmin)<c){x.xmax=180;const i=[];i.push(new n(e.xmin,e.ymin,_)),i.push(new n(e.xmin,(e.ymin+e.ymax)/2,_)),i.push(new n(e.xmin,e.ymax,_));const r=i.map((e=>f(e,t,o))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));x.xmin=Math.min.apply(null,r)}}[b,v]=t.isWebMercator?r.getInfo(t).origin:null!=(y=null==(m=r.getInfo(t))?void 0:m.valid)?y:[];const w=d(t);return w&&null!=b&&null!=v&&(Math.abs(x.xmin-b)<w&&(x.xmin=b),Math.abs(x.xmax-v)<w&&(x.xmax=v)),x}t.computeProjectedScales=function(e,t,i=512,r=!0){const{extent:s,spatialReference:o,pixelSize:a}=e,u=p(new n({x:a.x,y:a.y,spatialReference:o}),t,s);if(null==u)return{projectedPixelSize:null,scales:null,srcResolutions:null};const c=(u.x+u.y)/2,h=l.getMetersPerUnitForSR(t),d=c*h*96*39.37,f=t.isGeographic?512/i*295828763.7958547:512/i*591657527.591555;let m=!1;if(r&&(t.isGeographic||t.isWebMercator)){const e=y(s,t);m=e.xmin*e.xmax<0}let _,g=d;if(m){g=f;const e=g/(96*h*39.37);_=p(new n({x:e,y:e,spatialReference:t}),o,s)}else{_={x:a.x,y:a.y};const t=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);let i=0;for(;g<.5005*f&&i<t;)i++,g*=2,_.x*=2,_.y*=2;Math.max(g,f)/Math.min(g,f)<=1.001&&(g=f)}const x=[],b=[],v=Math.min(70.5310735,d)/1.001;for(;g>=v;)x.push(g),b.push({x:_.x,y:_.y}),g/=2,_.x/=2,_.y/=2;return{projectedPixelSize:u,scales:x,srcResolutions:b}},t.defaultGridSpacing=32,t.getProjectionOffsetGrid=function(e,t,s,o=null,a=null,l=!1,c=[32,32]){var p,d;if(h(e.spatialReference,t.spatialReference)&&!u.isLoaded())throw new i("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(e&&t&&s))return null;const{xmin:y,ymin:m,xmax:_,ymax:g}=e,x=e.spatialReference,b=t.spatialReference,[v,w]=null!=(p=null==(d=r.getInfo(x))?void 0:d.valid)?p:[],R={x:c[0]*s.x,y:c[1]*s.y},T={cols:Math.ceil((_-y)/R.x-.1)+1,rows:Math.ceil((g-m)/R.y-.1)+1},I=R.x,P=R.y,M=[];let k,S=!1;for(let e=0;e<T.cols;e++){const i=[];for(let r=0;r<T.rows;r++){let s=f(new n({x:y+I*e,y:g-P*r,spatialReference:x}),b,o);a&&(s=a.inverseTransform(s)),i.push(s),e>0&&l&&s&&k[r]&&null!=v&&s.x<k[r].x&&(s.x+=w-v),s?(M.push((s.x-t.xmin)/(t.xmax-t.xmin)),M.push((t.ymax-s.y)/(t.ymax-t.ymin))):(M.push(NaN),M.push(NaN),S=!0)}k=i}const C=function(e,t){const i=(e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4,r=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs(i-e[2*t.rows+2]),Math.abs(r-e[2*t.rows+3])]}(M,T),U=new Float32Array((T.cols-1)*(T.rows-1)*2*6),z=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),L=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let e=0;e<T.cols-1;e++){for(let t=0;t<T.rows-1;t++){let i=e*T.rows*2+2*t;const r=M[i],s=M[i+1],n=M[i+2],o=M[i+3];i+=2*T.rows;const a=M[i],l=M[i+1],u=M[i+2],c=M[i+3];let h=0,p=12*(t*(T.cols-1)+e);for(let e=0;e<3;e++)U[p++]=z[h++]*r+z[h++]*n+z[h++]*u;h=0;for(let e=0;e<3;e++)U[p++]=z[h++]*s+z[h++]*o+z[h++]*c;h=0;for(let e=0;e<3;e++)U[p++]=L[h++]*r+L[h++]*a+L[h++]*u;h=0;for(let e=0;e<3;e++)U[p++]=L[h++]*s+L[h++]*l+L[h++]*c}if(S)for(let e=0;e<U.length;e++)isNaN(U[e])&&(U[e]=-1)}return{offsets:M,error:C,coefficients:U,spacing:c,size:[T.cols-1,T.rows-1]}},t.load=async function(){if(u.isLoaded()||!u.isSupported())return null;await u.load()},t.projectExtent=y,t.projectPoint=f,t.projectResolution=p,t.snapPyramid=function(e,t,i){const r=Math.log(e.x/t.pixelSize.x)/Math.LN2,s=Math.log(e.y/t.pixelSize.y)/Math.LN2,o=t.storageInfo.maximumPyramidLevel||0;let a="down"===i?Math.floor(Math.min(r,s)):"up"===i?Math.ceil(Math.max(r,s)):Math.round((r+s)/2),l=!1;a<0?a=0:a>o&&(l=a>o+3,a=o);const u=Math.pow(2,a);return{pyramidLevel:a,pyramidResolution:new n({x:u*t.nativePixelSize.x,y:u*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:l}},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},80498:(e,t)=>{var i;void 0===(i=function(e){"use strict";function i(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function r(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){let t=0,i=0;for(let r=0;r<e.length;r++){const s=e[r].size;"number"==typeof s&&(t+=s,i++)}return t/i}(e.stops):t}t.calculateTolerance=function(e){const t=e&&e.renderer,s="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return s;const n="visualVariables"in t?function(e,t){if(!t)return e;const i=t.filter((e=>"size"===e.type)).map((t=>{const{maxSize:i,minSize:s}=t;return(r(i,e)+r(s,e))/2}));let s=0;const n=i.length;if(0===n)return e;for(let e=0;e<n;e++)s+=i[e];const o=Math.floor(s/n);return Math.max(o,e)}(s,t.visualVariables):s;if("simple"===t.type)return i(n,t.symbol);if("unique-value"===t.type){let e=n;return t.uniqueValueInfos.forEach((t=>{e=i(e,t.symbol)})),e}if("class-breaks"===t.type){let e=n;return t.classBreakInfos.forEach((t=>{e=i(e,t.symbol)})),e}return t.type,n},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,[t]))||(e.exports=i)},72895:(e,t,i)=>{var r,s;r=[t,i(58797),i(3718),i(12525),i(56117),i(83334),i(1422),i(93681),i(20457)],void 0===(s=function(e,i,r,s,n,o,a,l,u){"use strict";const c={bandCount:3,outMin:0,outMax:1,minCutOff:[0,0,0],maxCutOff:[255,255,255],factor:[1/255,1/255,1/255],useGamma:!1,gamma:[1,1,1],gammaCorrection:[1,1,1],colormap:null,colormapOffset:null,type:"stretch"};let h=function(e){function t(t=null,i=null,r=null){var s;return(s=e.call(this)||this)._textureInvalidated=!0,s._memoryUsed=null,s._supportsBilinear=!0,s.stencilRef=0,s.coordScale=[1,1],s._symbolizerParameters=null,s.height=null,s.isRendereredSource=!1,s.pixelRatio=1,s.resolution=0,s.rotation=0,s._source=null,s.rawPixelData=null,s._suspended=!1,s._bandIds=null,s._interpolation=null,s._transformGrid=null,s.width=null,s.x=0,s.y=0,s.transforms={dvs:o.create()},s.source=t,s.transformGrid=i,s.interpolation=r,s}i._inheritsLoose(t,e);var l=t.prototype;return l.invalidateTexture=function(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRender())},l.setTransform=function(e){const t=s.identity(this.transforms.dvs),[i,r]=e.toScreenNoRotation([0,0],this.x,this.y),n=this.resolution/this.pixelRatio/e.resolution,o=n*this.width,l=n*this.height,u=Math.PI*this.rotation/180;s.translate(t,t,a.fromValues(i,r)),s.translate(t,t,a.fromValues(o/2,l/2)),s.rotate(t,t,-u),s.translate(t,t,a.fromValues(-o/2,-l/2)),s.scaleByVec2(t,t,a.fromValues(o,l)),s.multiply(this.transforms.dvs,e.displayViewMat3,t)},l.getTextures=function(){if(!this._rasterTexture)return null;const e=[],t=[];return this._transformGridTexture&&(t.push(this._transformGridTexture),e.push("u_transformGrid")),this._rasterTexture&&(t.push(this._rasterTexture),e.push("u_image")),this._colormapTexture&&(t.push(this._colormapTexture),e.push("u_colormap")),{names:e,textures:t}},l.getMemoryUsage=function(){if(r.isNone(this._memoryUsed)){const e=this.getTextures();if(null==e)return 0;this._memoryUsed=e.textures.map((e=>e.descriptor.width*e.descriptor.height*4)).reduce(((e,t)=>e+t))}return this._memoryUsed},l.onAttach=function(){this.invalidateTexture()},l.onDetach=function(){this.invalidateTexture()},l.updateTexture=function({context:e}){var t,i,r;if(!this.stage)return null==(t=this._rasterTexture)||t.dispose(),null==(i=this._transformGridTexture)||i.dispose(),null==(r=this._colormapTexture)||r.dispose(),this._rasterTexture=null,this._rasterTextureBandIds=null,this._transformGridTexture=null,void(this._colormapTexture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1;const s=this.source,n=s&&s.pixels&&s.pixels.length>0;this._createOrDestroyRasterTexture(e),this._rasterTexture&&(n?(this._updateColormapTexture(e),this.transformGrid&&!this._transformGridTexture&&(this._transformGridTexture=u.createTransformTexture(e,this.transformGrid))):this._rasterTexture.setData(null)),this.suspended||(this.ready(),this.requestRender())},l._createOrDestroyRasterTexture=function(e){var t,i;const r=this.source?n.extractBands(this.source,this.bandIds):null;if(!(r&&r.pixels&&r.pixels.length>0))return void(this._rasterTexture&&(this._rasterTexture.dispose(),this._rasterTextureBandIds=null,this._rasterTexture=null));const s=null==this._rasterTextureBandIds&&null==this.bandIds||this._rasterTextureBandIds&&this.bandIds&&this._rasterTextureBandIds.join("")===this.bandIds.join("");if(this._rasterTexture){if(s)return;this._rasterTexture.dispose(),this._rasterTextureBandIds=null,this._rasterTexture=null}const o=this.interpolation||"nearest",a=this.isRendereredSource||!(null!=(t=e.capabilities.textureFloat)&&t.textureFloat);this._rasterTexture=u.createRasterTexture(e,r,o,a),this._supportsBilinear=null==(i=e.capabilities.textureFloat)?void 0:i.textureFloatLinear,this._rasterTextureBandIds=this.bandIds},l._updateColormapTexture=function(e){const t=this._colormap,i=this.symbolizerParameters.colormap;return i?t?i.length!==t.length||i.some(((e,i)=>e!==t[i]))?(this._colormapTexture&&(this._colormapTexture.dispose(),this._colormapTexture=null),this._colormapTexture=u.createColormapTexture(e,i),void(this._colormap=i)):void 0:(this._colormapTexture=u.createColormapTexture(e,i),void(this._colormap=i)):(this._colormapTexture&&(this._colormapTexture.dispose(),this._colormapTexture=null),void(this._colormap=null))},i._createClass(t,[{key:"symbolizerParameters",get:function(){return this._symbolizerParameters||c},set:function(e){this._symbolizerParameters=e}},{key:"source",get:function(){return this._source},set:function(e){this._source=e,this._rasterTexture&&(this._rasterTexture.dispose(),this._rasterTexture=null,this._rasterTextureBandIds=null,this._memoryUsed=null)}},{key:"suspended",get:function(){return this._suspended},set:function(e){this._suspended&&!e&&this.stage&&(this.ready(),this.requestRender()),this._suspended=e}},{key:"bandIds",get:function(){return this._bandIds},set:function(e){this._bandIds=e,this.invalidateTexture()}},{key:"interpolation",get:function(){return this._interpolation},set:function(e){this._interpolation=e,this._rasterTexture&&this._rasterTexture.setSamplingMode(!this._supportsBilinear||"bilinear"!==e&&"cubic"!==e?9728:9729)}},{key:"transformGrid",get:function(){return this._transformGrid},set:function(e){this._transformGrid=e,this._transformGridTexture&&(this._transformGridTexture.dispose(),this._transformGridTexture=null,this._memoryUsed=null)}}]),t}(l.DisplayObject);t.RasterBitmap=h,Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},94261:(e,t,i)=>{var r,s;r=[t,i(58797),i(5702),i(72895)],void 0===(s=function(e,i,r,s){"use strict";let n=function(e){function t(t,i,r,n=null){var o;return(o=e.call(this,t,i,r)||this).bitmap=new s.RasterBitmap(n,null,null),o.bitmap.coordScale=r,o.bitmap.once("isReady",(()=>o.ready())),o}i._inheritsLoose(t,e);var r=t.prototype;return r.getMemoryUsage=function(){return this.bitmap.getMemoryUsage()},r.setTransform=function(t,i){e.prototype.setTransform.call(this,t,i),this.bitmap.transforms.dvs=this.transforms.dvs},r.release=function(){return this.destroy(),this.bitmap=null,this.stage=null,!0},r.onAttach=function(){this.bitmap.stage=this.stage},r.onDetach=function(){this.bitmap.stage=null},i._createClass(t,[{key:"stencilRef",set:function(e){this.bitmap.stencilRef=e},get:function(){return this.bitmap.stencilRef}}]),t}(r.TiledDisplayObject);t.RasterTile=n,Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},78364:(e,t,i)=>{var r,s;r=[t,i(58797),i(18167),i(53183),i(41706),i(79140),i(94261)],void 0===(s=function(e,i,r,s,n,o,a){"use strict";let l=function(e){function t(){return e.apply(this,arguments)||this}i._inheritsLoose(t,e);var o=t.prototype;return o.createTile=function(e){const t=this._tileInfoView.getTileBounds(r.create(),e);return new a.RasterTile(e,t,this._tileInfoView.tileInfo.size)},o.destroyTile=function(){},o.prepareRenderPasses=function(t){const i=t.registerRenderPass({name:"bitmap (tile)",brushes:[n.brushes.raster],target:()=>this.children.map((e=>e.bitmap)),drawPhase:s.WGLDrawPhase.MAP});return[...e.prototype.prepareRenderPasses.call(this,t),i]},o.doRender=function(t){this.visible&&t.drawPhase===s.WGLDrawPhase.MAP&&e.prototype.doRender.call(this,t)},t}(o.default);t.RasterTileContainer=l,Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},79140:(e,t,i)=>{var r,s;r=[t,i(58797),i(53183),i(83534),i(40910),i(98520)],void 0===(s=function(e,i,r,s,n,o){"use strict";const a=(e,t)=>e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col;let l=function(e){function t(t){var i;return(i=e.call(this)||this)._tileInfoView=t,i}i._inheritsLoose(t,e);var o=t.prototype;return o.renderChildren=function(t){this.sortChildren(a),this.setStencilReference(),e.prototype.renderChildren.call(this,t)},o.createRenderParams=function(t){const{state:i}=t;return{...e.prototype.createRenderParams.call(this,t),requiredLevel:this._tileInfoView.getClosestInfoForScale(i.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(i.scale)}},o.prepareRenderPasses=function(t){const i=t.registerRenderPass({name:"stencil",brushes:[n],drawPhase:r.WGLDrawPhase.DEBUG|r.WGLDrawPhase.MAP|r.WGLDrawPhase.HIGHLIGHT,target:()=>this.getStencilTarget()}),o=t.registerRenderPass({name:"tileInfo",brushes:[s],drawPhase:r.WGLDrawPhase.DEBUG,target:()=>this.children,has:"esri-tiles-debug"});return[...e.prototype.prepareRenderPasses.call(this,t),i,o]},o.getStencilTarget=function(){return this.children},o.updateTransforms=function(e){for(const t of this.children){const i=this._tileInfoView.getTileResolution(t.key);t.setTransform(e,i)}},o.setStencilReference=function(){let e=1;for(const t of this.children)t.stencilRef=e++},t}(o);t.default=l,t.sortByLevel=a,Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},5702:(e,t,i)=>{var r,s;r=[t,i(58797),i(74637),i(12525),i(11286),i(83334),i(93681)],void 0===(s=function(e,i,r,s,n,o,a){"use strict";let l=function(e){function t(t,i,r,s=r){var a;return(a=e.call(this)||this).triangleCountReportedInDebug=0,a.transforms={dvs:o.create(),tileMat3:o.create()},a.triangleCount=0,a.key=new n(t),a.bounds=i,a.size=r,a.coordRange=s,a}i._inheritsLoose(t,e);var r=t.prototype;return r.destroy=function(){this.texture&&(this.texture.dispose(),this.texture=null)},r.setTransform=function(e,t){const i=t/(e.resolution*e.pixelRatio),r=this.transforms.tileMat3,[n,o]=e.toScreenNoRotation([0,0],this.coords),a=this.size[0]/this.coordRange[0]*i,l=this.size[1]/this.coordRange[1]*i;s.set(r,a,0,0,0,l,0,n,o,1),s.multiply(this.transforms.dvs,e.displayViewMat3,r)},i._createClass(t,[{key:"coords",get:function(){return this._coords}},{key:"bounds",get:function(){return this._bounds},set:function(e){this._coords=[e[0],e[3]],this._bounds=e}}]),t}(a.DisplayObject);t.TiledDisplayObject=l,Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},23612:(e,t,i)=>{var r,s;r=[i(58797),i(11285),i(74637),i(3718),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(9720),i(35558),i(12997),i(26016),i(90920),i(31099),i(69788),i(45173),i(72146),i(56117),i(85775),i(12491),i(28187),i(43768),i(19993),i(286),i(92957),i(75885),i(87515),i(82252),i(78364),i(46351)],void 0===(s=function(e,t,i,r,s,n,o,a,l,u,c,h,p,d,f,y,m,_,g,x,b,v,w,R,T,I,P,M,k,S,C,U,z){"use strict";const L=s.getLogger("esri.views.2d.layers.ImageryTileLayerView2D"),j=[0,0];let O=function(t){function i(){var e;return(e=t.apply(this,arguments)||this)._tileStrategy=null,e._tileInfoView=null,e._fetchQueue=null,e._blockCacheRegistryUrl=null,e._blockCacheRegistryId=null,e._bitmapView=null,e._emptyTilePixelBlock=null,e._srcResolutions=null,e._previousLOD=null,e._needBlockCacheUpdate=!1,e._globalSymbolizerParams=null,e._symbolizerParams=null,e._abortController=null,e._globalUpdateRequested=!1,e.useWebGLForProcessing=!0,e.datumTransformation=null,e._redrawDebounced=h.debounce((t=>e._redrawImage(t)),2e3),e}e._inheritsLoose(i,t);var s=i.prototype;return s.initialize=function(){const e=this.updateFullExtent();this.addResolvingPromise(e)},s.hitTest=function(e,t){if(this.suspended)return h.resolve(null);const i=this.view.toMap(y.createScreenPoint(e,t));return h.resolve(new m({attributes:{},geometry:i}))},s.update=function(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();const{extent:t,resolution:i,scale:r}=e.state,s=this._tileInfoView.getClosestInfoForScale(r);if(this.layer.raster){var n;if(!this.useProgressiveUpdate||this._needBlockCacheUpdate){const e=this._srcResolutions[s.level],r=t.toJSON?t:d.fromJSON(t);w.update(this._blockCacheRegistryUrl,this._blockCacheRegistryId,r,i,e,this.layer.raster.ioConfig.sampling)}this._needBlockCacheUpdate=!1,(null==(n=this._previousLOD)?void 0:n.level)!==s.level&&(this._previousLOD=s,null!=this._symbolizerParams&&this._updateSymbolizerParams())}this.notifyChange("updating")},s.attach=function(){this.layer.increaseRasterJobHandlerUsage(),T().supportsTextureFloat||(this.useWebGLForProcessing=!1),this.layer.raster&&(this.layer.raster.ioConfig.allowPartialFill=!0),this._initializeTileInfo(),this._tileInfoView=new I(this.tileInfo,this.fullExtent),this._fetchQueue=new P({tileInfoView:this._tileInfoView,concurrency:10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new M({cachePolicy:this.useProgressiveUpdate?"keep":"purge",resampling:!1,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:this.useProgressiveUpdate?40:0,tileInfoView:this._tileInfoView}),this._bitmapView=new U.RasterTileContainer(this._tileInfoView),this.container.addChild(this._bitmapView),this.handles.add([_.watch(this,["layer.bandIds","layer.renderer"],(()=>this._redrawDebounced().catch((e=>{h.isAbortError(e)||L.error(e)})))),_.watch(this,["layer.interpolation"],((e,t)=>{"majority"!==e&&"majority"!==t||!this._canUseMajorityInterpolationOnDataSource()?this._redrawDebounced().catch((e=>{h.isAbortError(e)||L.error(e)})):this.refreshDebounced()})),_.watch(this,["layer.multidimensionalDefinition"],this.refreshDebounced)],"attach"),this._updateBlockCacheRegistry()},s.detach=function(){this.handles.remove("attach"),this.layer.decreaseRasterJobHandlerUsage(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,w.unregister(this._blockCacheRegistryUrl,this._blockCacheRegistryId)},s.moveStart=function(){this.requestUpdate()},s.viewChange=function(){this.requestUpdate()},s.moveEnd=function(){!this.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=h.createAbortController(),0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then((()=>{this._globalUpdateRequested=!1,this.requestUpdate()}))),this.requestUpdate()},s.createFetchPopupFeaturesQueryGeometry=function(e,t){return S.createQueryGeometry(e,t,this.view)},s.doRefresh=async function(){this.updateRequested||this.suspended||(this._updateSymbolizerParams(),this._updateBlockCacheRegistry(),this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))),this.notifyChange("updating"))},s.isUpdating=function(){return this._fetchQueue.length>0||this._globalUpdateRequested},s.acquireTile=function(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(j,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.hasTilingEffects||!this.useProgressiveUpdate,t},s.releaseTile=function(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once("detach",(()=>{e.destroy(),this.requestUpdate()})),this.requestUpdate()},s.fetchTile=function(e,t){const i=!r.isNone(t)&&t.signal,s=this._canUseWebGLForProcessing(),n={tileInfo:this.tileInfo,signal:r.unwrap(i),registryId:this._blockCacheRegistryId,requestRawData:s,srcResolution:this._srcResolutions[e.level],datumTransformation:this.datumTransformation,interpolation:s?"nearest":this.layer.interpolation};return this.layer.fetchTile(e.level,e.row,e.col,n)},s._canUseWebGLForProcessing=function(){return this.useWebGLForProcessing&&this.layer.symbolizer.canRenderInWebGL&&!("majority"===this.layer.interpolation&&this._canUseMajorityInterpolationOnDataSource())},s._initializeTileInfo=function(){const e=this.view.spatialReference,t=new p({x:this.fullExtent.xmin,y:this.fullExtent.ymax,spatialReference:e}),{scales:i,srcResolutions:r}=v.computeProjectedScales(this.layer.rasterInfo,e),s=x.create({spatialReference:e,size:512,scales:i});(0===s.origin.x||s.origin.x>t.x)&&(s.origin=t),this._set("tileInfo",s),this._srcResolutions=null!=r?r:[]},s._enqueueTileFetch=async function(e,t){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key),{bandIds:i}=this.layer;let r=!this.useProgressiveUpdate||this.hasTilingEffects&&!this._globalSymbolizerParams;if(this._globalUpdateRequested&&!this.moving&&0===this._fetchQueue.length){r=!1;try{await this._redrawImage(this._abortController&&this._abortController.signal)}catch(e){h.isAbortError(e)&&L.error(e)}this._globalUpdateRequested=!1}const s=this._canUseWebGLForProcessing();if(s&&!this.hasTilingEffects&&null==this._symbolizerParams&&this._updateSymbolizerParams(),t&&t.pixelBlock){if(s)e.bitmap.source=t.pixelBlock,e.bitmap.isRendereredSource=!1;else{const i={extent:t.extent,pixelBlock:t.pixelBlock},r=await this.layer.applyRenderer(i,this.hasTilingEffects&&this._globalSymbolizerParams&&"stretch"===this._globalSymbolizerParams.type?this._globalSymbolizerParams:null);e.bitmap.rawPixelData=i,e.bitmap.source=r,e.bitmap.isRendereredSource=!0}e.bitmap.symbolizerParameters=s?this._globalSymbolizerParams||this._symbolizerParams:null,!e.bitmap.transformGrid&&s?e.bitmap.transformGrid=t.transformGrid:e.bitmap.transformGrid=null}else{const t=this._createEmptyTilePixelBlock();e.bitmap.source=t,e.bitmap.symbolizerParameters=s?this._symbolizerParams:null,e.bitmap.transformGrid=null}e.bitmap.bandIds=i,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.bitmap.interpolation=this._getLayerInterpolation(),e.bitmap.suspended=r,e.bitmap.invalidateTexture(),e.once("attach",(()=>this.requestUpdate())),this._bitmapView.addChild(e)}catch(e){h.isAbortError(e)||L.error(e)}this.requestUpdate()}},s._redrawImage=async function(e){this.layer.updateRenderer(),this.hasTilingEffects?await this._updateGlobalSymbolizerParams(e):(this._updateSymbolizerParams(),this._globalSymbolizerParams=null);const{bandIds:t}=this.layer,i=this._bitmapView.children.map((async e=>{const i=this._canUseWebGLForProcessing();i?e.bitmap.isRendereredSource=!1:(e.bitmap.source=await this.layer.applyRenderer(e.bitmap.rawPixelData,this.hasTilingEffects&&this._globalSymbolizerParams&&"stretch"===this._globalSymbolizerParams.type?this._globalSymbolizerParams:null),e.bitmap.isRendereredSource=!0),e.bitmap.symbolizerParameters=i?this._globalSymbolizerParams||this._symbolizerParams:null,e.bitmap.bandIds=t,e.bitmap.interpolation=this._getLayerInterpolation(),e.bitmap.suspended=!1}));await h.eachAlways(i),this.container.requestRender()},s._createEmptyTilePixelBlock=function(){if(!this._emptyTilePixelBlock){const e=this._tileInfoView.tileInfo.size[0],t=this._tileInfoView.tileInfo.size[1];this._emptyTilePixelBlock=new g({width:e,height:t,pixels:[new Uint8Array(e*t)],mask:new Uint8Array(e*t),pixelType:"u8"})}return this._emptyTilePixelBlock},s._updateGlobalSymbolizerParams=async function(e){const t={srcResolution:this._srcResolutions[this._previousLOD.level],registryId:this._blockCacheRegistryId,signal:e},i=await this.layer.fetchPixels(this.view.extent,this.view.width,this.view.height,t);if(!i||!i.pixelBlock)return;const r=this.layer.symbolizer.generateWebGLParameters({pixelBlock:b.extractBands(i.pixelBlock,this.layer.bandIds),isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds});!this._canUseWebGLForProcessing()&&r&&"stretch"===r.type&&this.layer.renderer&&"raster-stretch"===this.layer.renderer.type&&(r.factor=r.factor.map((e=>255*e)),r.outMin=Math.round(255*r.outMin),r.outMax=Math.round(255*r.outMax)),this._globalSymbolizerParams=r},s._updateSymbolizerParams=function(){this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null,isGCS:this.view.spatialReference.isGeographic,resolution:{x:this._previousLOD.resolution,y:this._previousLOD.resolution},bandIds:this.layer.bandIds})},s._updateBlockCacheRegistry=function(){const{url:e,rasterInfo:t,multidimensionalDefinition:i,raster:r}=this.layer,s=null!=t&&t.multidimensionalInfo?r.getSliceIndex(i):null,n=w.getRasterId(e,s);n!==this._blockCacheRegistryUrl&&(null==this._blockCacheRegistryUrl&&w.unregister(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=w.register(n,this.layer.raster.rasterInfo),this._blockCacheRegistryUrl=n)},s._canUseMajorityInterpolationOnDataSource=function(){const{bandCount:e,attributeTable:t,colormap:i,pixelType:r}=this.layer.rasterInfo;return 1===e&&(null!=t||null!=i||"u8"===r||"s8"===r)},s._getLayerInterpolation=function(){const e=this.layer.renderer.type;return"raster-colormap"===e||"unique-value"===e||"class-breaks"===e?"nearest":this.layer.interpolation},e._createClass(i,[{key:"useProgressiveUpdate",get:function(){return null==this._get("useProgressiveUpdate")||this._get("useProgressiveUpdate")},set:function(e){this._tileStrategy&&this.useProgressiveUpdate!==e&&(this._tileStrategy.destroy(),this._bitmapView.removeAllChildren(),this._tileStrategy=new M({cachePolicy:e?"keep":"purge",resampling:!1,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),cacheSize:e?40:0,tileInfoView:this._tileInfoView}),this._set("useProgressiveUpdate",e),this.requestUpdate())}}]),i}(C.ImageryTileLayerView(R.RefreshableLayerView(z.LayerView2DMixin(k))));return t.__decorate([o.property()],O.prototype,"useProgressiveUpdate",null),O=t.__decorate([a.subclass("esri.views.2d.layers.ImageryTileLayerView2D")],O),O}.apply(t,r))||(e.exports=s)},46351:(e,t,i)=>{var r,s;r=[t,i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(82438),i(24002),i(69788),i(85698),i(45168),i(57042),i(70034),i(96138)],void 0===(s=function(e,i,r,s,n,o,a,l,u,c,h,p,d,f,y,m,_,g,x){"use strict";const b=p.ofType({key:"type",base:y,typeMap:{rect:m,path:x,geometry:g}});t.LayerView2DMixin=e=>{let t=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).clips=new b,t.moving=!1,t.attached=!1,t.lastUpdateId=-1,t.updateRequested=!1,t}i._inheritsLoose(t,e);var r=t.prototype;return r.initialize=function(){var e;this.container||(this.container=new _.Container),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([f.init(this,"suspended",(e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()}),!0),f.init(this,["layer.opacity","container"],(()=>{var e,t;this.container&&(this.container.opacity=null!=(e=null==(t=this.layer)?void 0:t.opacity)?e:1)}),!0),f.init(this,["layer.blendMode"],(e=>{this.container&&(this.container.blendMode=e)}),!0),f.init(this,["layer.effect"],(e=>{this.container&&(this.container.effect=e)}),!0),this.clips.on("change",(()=>{this.container.clips=this.clips,this.notifyChange("clips")}))]),null!=(e=this.view)&&e.whenLayerView?this.view.whenLayerView(this.layer).then((e=>{e!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{})):this.when().then((()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)}),(()=>{}))},r.destroy=function(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1},r.isVisibleAtScale=function(e){let t=!0;const i=this.layer,r=i.minScale,s=i.maxScale;if(null!=r&&null!=s){let i=!r,n=!s;!i&&e<=r&&(i=!0),!n&&e>=s&&(n=!0),t=i&&n}return t},r.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())},r.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},r.isUpdating=function(){return!1},r.isRendering=function(){return!1},r.canResume=function(){return!!e.prototype.canResume.call(this)&&this.isVisibleAtScale(this.view.scale)},i._createClass(t,[{key:"updating",get:function(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}}]),t}(e);return r.__decorate([a.property({type:b,set(e){const t=d.referenceSetter(e,this._get("clips"),b);this._set("clips",t)}})],t.prototype,"clips",void 0),r.__decorate([a.property()],t.prototype,"moving",void 0),r.__decorate([a.property()],t.prototype,"attached",void 0),r.__decorate([a.property()],t.prototype,"container",void 0),r.__decorate([a.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),r.__decorate([a.property({readOnly:!0})],t.prototype,"updateParameters",void 0),r.__decorate([a.property()],t.prototype,"updateRequested",void 0),r.__decorate([a.property({dependsOn:["attached","updateRequested","suspended"]})],t.prototype,"updating",null),r.__decorate([a.property()],t.prototype,"view",void 0),t=r.__decorate([l.subclass("esri.views.2d.layers.LayerView2D")],t),t},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},82252:(e,t,i)=>{var r,s;r=[t,i(58797),i(11285),i(74637),i(3718),i(73462),i(67059),i(26475),i(99752),i(49359),i(4037),i(51916),i(18377),i(9720),i(31099),i(85775),i(28575)],void 0===(s=function(e,i,r,s,n,o,a,l,u,c,h,p,d,f,y,m,_){"use strict";t.ImageryTileLayerView=e=>{let t=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._rasterFieldPrefix="Raster.",t.layer=null,t.view=null,t.fullExtent=null,t.tileInfo=null,t.datumTransformation=null,t}i._inheritsLoose(t,e);var r=t.prototype;return r.fetchPopupFeatures=async function(e,t){const{layer:i}=this;if(!e)return f.reject(new c("imageryTileLayerView:fetchPopupFeatures","Nothing to fetch without area",{layer:i}));const{popupEnabled:r}=i,s=_.getFetchPopupTemplate(i,t);if(!r||!n.isSome(s))throw new c("imageryTileLayerView:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:r,popupTemplate:s});const o=[],{value:a}=await i.identify(e);if(a){var l,u;const e=a.join(", "),t={ObjectId:0},r="Raster.ServicePixelValue";t[r]=this._formatAttributeValue(e,r);const s=null==(l=i.rasterInfo)||null==(u=l.attributeTable)?void 0:u.features;if(s&&s.length>0){const i=s.filter((t=>{const i=t.attributes.value||t.attributes.Value||t.attributes.VALUE;return String(i)===e}));if(i.length>0){const e=i[0];if(e)for(const i in e.attributes)if(e.attributes.hasOwnProperty(i)){const r=this._rasterFieldPrefix+i;t[r]=this._formatAttributeValue(e.attributes[i],r)}}}const n=new y(this.fullExtent.clone(),null,t);n.layer=i,n.sourceLayer=n.layer,o.push(n)}return o},r.updateFullExtent=function(){const e=this.layer.tileInfo;let t;e&&e.spatialReference||(t=new c("layerview:tiling-information-missing","The layer doesn't provide tiling information",{layer:this.layer}));const i=m.projectExtent(this.layer.fullExtent,this.view.spatialReference,this.datumTransformation);return null==i&&(t=new c("layerview:projection-not-supported","The layer extent cannot be projected to the view's spatial reference",{layer:this.layer})),this._set("fullExtent",i),t?f.reject(t):f.resolve()},r._formatAttributeValue=function(e,t){if("string"==typeof e){const i=this.layer.popupTemplate&&this.layer.popupTemplate.fieldInfos,r=this._getFieldInfo(i,t),s=r&&r.format;if(s){let t,i;return e.trim().indexOf(",")>-1?(t=",",i=t+" ",this._formatDelimitedString(e,t,i,s)):e.trim().indexOf(" ")>-1?(t=i=" ",this._formatDelimitedString(e,t,i,s)):this._formatNumberFromString(e,s)}}return e},r._getFieldInfo=function(e,t){if(!e||!e.length||!t)return;const i=t.toLowerCase();let r;return e.some((e=>!(!e.fieldName||e.fieldName.toLowerCase()!==i&&e.fieldName.toLowerCase()!==i.replace(/ /g,"_")||(r=e,0)))),r},r._formatDelimitedString=function(e,t,i,r){return e&&t&&i&&r?e.trim().split(t).map((e=>this._formatNumberFromString(e,r))).join(i):e},r._formatNumberFromString=function(e,t){if(!e||!t)return e;const i=Number(e);return isNaN(i)?e:t.format(i)},i._createClass(t,[{key:"hasTilingEffects",get:function(){return this.layer.renderer&&"dynamicRangeAdjustment"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment}}]),t}(e);return r.__decorate([l.property()],t.prototype,"layer",void 0),r.__decorate([l.property()],t.prototype,"view",void 0),r.__decorate([l.property()],t.prototype,"fullExtent",void 0),r.__decorate([l.property()],t.prototype,"tileInfo",void 0),r.__decorate([l.property({readOnly:!0,dependsOn:["layer.renderer"]})],t.prototype,"hasTilingEffects",null),t=r.__decorate([u.subclass("esri.views.layers.ImageryTileLayerView")],t),t},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},75885:(e,t,i)=>{var r,s;r=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(37862),i(59286),i(52521),i(96349),i(74474)],void 0===(s=function(e,t,i,r,s,n,o,a,l,u,c,h,p,d,f){"use strict";let y=function(t){function i(e){var i;return(i=t.call(this,e)||this).layer=null,i.parent=null,i}e._inheritsLoose(i,t);var s=i.prototype;return s.initialize=function(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",i=this.layer&&this.layer.title||"no title";throw r.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${i}', id: '${t}')`,e),e}}))},s.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},s.getSuspendInfo=function(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e},s.isUpdating=function(){return!1},e._createClass(i,[{key:"fullOpacity",get:function(){const e=e=>null==e?1:e;return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))}},{key:"suspended",get:function(){return!this.canResume()}},{key:"suspendInfo",get:function(){return this.getSuspendInfo()}},{key:"legendEnabled",get:function(){return!this.suspended&&!0===this.layer.legendEnabled}},{key:"updating",get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}},{key:"visible",get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}}]),i}(f.HandleOwnerMixin(p.IdentifiableMixin(d.EsriPromiseMixin(h.EventedMixin(c)))));return t.__decorate([n.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],y.prototype,"fullOpacity",null),t.__decorate([n.property()],y.prototype,"layer",void 0),t.__decorate([n.property()],y.prototype,"parent",void 0),t.__decorate([n.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],y.prototype,"suspended",null),t.__decorate([n.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],y.prototype,"suspendInfo",null),t.__decorate([n.property({readOnly:!0,dependsOn:["suspended","layer.legendEnabled?"]})],y.prototype,"legendEnabled",null),t.__decorate([n.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],y.prototype,"updating",null),t.__decorate([n.property({dependsOn:["layer.visible"]})],y.prototype,"visible",null),y=t.__decorate([o.subclass("esri.views.layers.LayerView")],y),y}.apply(t,r))||(e.exports=s)},85698:(e,t,i)=>{var r,s;r=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(56162)],void 0===(s=function(e,t,i,r,s,n,o,a,l,u,c){"use strict";let h=function(t){function i(){return t.apply(this,arguments)||this}return e._inheritsLoose(i,t),i}(c.JSONSupport);return h=t.__decorate([o.subclass("esri.views.layers.support.ClipArea")],h),h}.apply(t,r))||(e.exports=s)},45168:(e,t,i)=>{var r,s;r=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(85698)],void 0===(s=function(e,t,i,r,s,n,o,a,l,u,c){"use strict";var h;let p=h=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).type="rect",e.left=null,e.right=null,e.top=null,e.bottom=null,e}return e._inheritsLoose(i,t),i.prototype.clone=function(){return new h({left:this.left,right:this.right,top:this.top,bottom:this.bottom})},e._createClass(i,[{key:"version",get:function(){return(this._get("version")||0)+1}}]),i}(c);return t.__decorate([n.property({type:[Number,String],json:{write:!0}})],p.prototype,"left",void 0),t.__decorate([n.property({type:[Number,String],json:{write:!0}})],p.prototype,"right",void 0),t.__decorate([n.property({type:[Number,String],json:{write:!0}})],p.prototype,"top",void 0),t.__decorate([n.property({type:[Number,String],json:{write:!0}})],p.prototype,"bottom",void 0),t.__decorate([n.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],p.prototype,"version",null),p=h=t.__decorate([o.subclass("esri.views.layers.support.ClipRect")],p),p}.apply(t,r))||(e.exports=s)},70034:(e,t,i)=>{var r,s;r=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(27572),i(12997),i(50257),i(57167),i(26016),i(85698)],void 0===(s=function(e,t,i,r,s,n,o,a,l,u,c,h,p,d,f,y){"use strict";var m;const _={base:c,key:"type",typeMap:{extent:h,polygon:p}};let g=m=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).type="geometry",e.geometry=null,e}return e._inheritsLoose(i,t),i.prototype.clone=function(){return new m({geometry:this.geometry.clone()})},e._createClass(i,[{key:"version",get:function(){return(this._get("version")||0)+1}}]),i}(y);return t.__decorate([n.property({types:_,json:{read:d.fromJSON,write:!0}})],g.prototype,"geometry",void 0),t.__decorate([n.property({readOnly:!0,dependsOn:["geometry"]})],g.prototype,"version",null),g=m=t.__decorate([o.subclass("esri.views.layers.support.Geometry")],g),g}.apply(t,r))||(e.exports=s)},96138:(e,t,i)=>{var r,s;r=[i(58797),i(11285),i(74637),i(73462),i(67059),i(26475),i(99752),i(4037),i(51916),i(18377),i(85698)],void 0===(s=function(e,t,i,r,s,n,o,a,l,u,c){"use strict";let h=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).type="path",e.path=[],e}return e._inheritsLoose(i,t),e._createClass(i,[{key:"version",get:function(){return(this._get("version")||0)+1}}]),i}(c);return t.__decorate([n.property({type:[[[Number]]],json:{write:!0}})],h.prototype,"path",void 0),t.__decorate([n.property({readOnly:!0,dependsOn:["path"]})],h.prototype,"version",null),h=t.__decorate([o.subclass("esri.views.layers.support.Path")],h),h}.apply(t,r))||(e.exports=s)},28575:(e,t,i)=>{var r,s;r=[t,i(3718),i(12808)],void 0===(s=function(e,i,r){"use strict";t.getFetchPopupTemplate=function(e,t){return e.popupTemplate?e.popupTemplate:i.isSome(t)&&t.defaultPopupTemplateEnabled&&i.isSome(e.defaultPopupTemplate)?e.defaultPopupTemplate:null},t.getRequiredFields=async function(e,t=e.popupTemplate){if(!i.isSome(t))return[];const s=await t.getRequiredFields(e.fields),{lastEditInfoEnabled:n}=t,{objectIdField:o,typeIdField:a,globalIdField:l,relationships:u}=e;if(s.includes("*"))return["*"];const c=n?await r.getFeatureEditFields(e):[],h=r.fixFields(e.fields,[...s,...c]);return a&&h.push(a),h&&o&&r.hasField(e.fields,o)&&-1===h.indexOf(o)&&h.push(o),h&&l&&r.hasField(e.fields,l)&&-1===h.indexOf(l)&&h.push(l),u&&u.forEach((t=>{const{keyField:i}=t;h&&i&&r.hasField(e.fields,i)&&-1===h.indexOf(i)&&h.push(i)})),h},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)},87515:(e,t,i)=>{var r,s;r=[t,i(3718),i(12997),i(26016),i(35477),i(80498)],void 0===(s=function(e,i,r,s,n,o){"use strict";function a(e,t,s,o=new r){let a;if("2d"===s.type)a=t*s.resolution;else if("3d"===s.type){const r=s.overlayPixelSizeInMapUnits(e),o=s.basemapSpatialReference;a=i.isSome(o)&&!o.equals(s.spatialReference)?n.getMetersPerUnitForSR(o)/n.getMetersPerUnitForSR(s.spatialReference):t*r}const l=e.x-a,u=e.y-a,c=e.x+a,h=e.y+a,{spatialReference:p}=s;return o.xmin=Math.min(l,c),o.ymin=Math.min(u,h),o.xmax=Math.max(l,c),o.ymax=Math.max(u,h),o.spatialReference=p,o}const l=new r;t.createQueryGeometry=a,t.intersectsDrapedGeometry=function(e,t,r){const s=r.toMap(e);return!i.isNone(s)&&a(s,o.calculateTolerance(),r,l).intersects(t)},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,r))||(e.exports=s)}}]);