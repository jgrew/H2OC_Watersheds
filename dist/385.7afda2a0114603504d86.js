(self.webpackChunkh2oc=self.webpackChunkh2oc||[]).push([[385],{20385:(e,t,a)=>{var l,n;l=[t,a(49359),a(9720),a(90920),a(66968),a(5118),a(97654)],void 0===(n=function(e,a,l,n,s,o,i){"use strict";const c="picture-fill",r=120,u=document.createElement("canvas");t.previewSymbol2D=function(e,t){const p=null!=(null==t?void 0:t.size)?n.pt2px(t.size):null,m=null!=(null==t?void 0:t.maxSize)?n.pt2px(t.maxSize):null,h=null!=(null==t?void 0:t.opacity)?t.opacity:null,d=null!=(null==t?void 0:t.rotation)?t.rotation:null,f=s.getStroke(e),v={shape:null,fill:null,stroke:f,offset:[0,0]};null!=f&&f.width&&(f.width=Math.min(f.width,80));const y=(null==f?void 0:f.width)||0;let g=null!=p&&(null==(null==t?void 0:t.scale)||(null==t?void 0:t.scale)),b=0,w=0;switch(e.type){case"simple-marker":{const t=e.style,a=Math.min(null!=p?p:n.pt2px(e.size),m||r);switch(b=a,w=a,t){case"circle":v.shape={type:"circle",cx:0,cy:0,r:.5*a},g||(b+=y,w+=y);break;case"cross":v.shape={type:"path",path:[{command:"M",values:[0,.5*w]},{command:"L",values:[b,.5*w]},{command:"M",values:[.5*b,0]},{command:"L",values:[.5*b,w]}]};break;case"diamond":v.shape={type:"path",path:[{command:"M",values:[0,.5*w]},{command:"L",values:[.5*b,0]},{command:"L",values:[b,.5*w]},{command:"L",values:[.5*b,w]},{command:"Z",values:[]}]},g||(b+=y,w+=y);break;case"square":v.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[b,0]},{command:"L",values:[b,w]},{command:"L",values:[0,w]},{command:"Z",values:[]}]},g||(b+=y,w+=y);break;case"triangle":v.shape={type:"path",path:[{command:"M",values:[.5*b,0]},{command:"L",values:[b,w]},{command:"L",values:[0,w]},{command:"Z",values:[]}]},g||(b+=y,w+=y);break;case"x":v.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[b,w]},{command:"M",values:[b,0]},{command:"L",values:[0,w]}]};break;case"path":v.shape={type:"path",path:e.path||""},g||(b+=y,w+=y),g=!0}break}case"simple-line":{const e=Math.min(null!=p?p:y,m||80),t=e>22?2*e:40;f.width=e,b=t,w=e,v.shape={type:"path",path:[{command:"M",values:[0,w]},{command:"L",values:[b,w]}]};break}case c:case"simple-fill":b=Math.min(null!=p?p:22,m||r)+y,w=b,g=!0,v.shape="object"==typeof(null==t?void 0:t.symbolConfig)&&null!=t&&t.symbolConfig.isSquareFill?o.shapes.squareFill[0]:o.shapes.fill[0];break;case"picture-marker":{let t=n.pt2px(e.width),a=n.pt2px(e.height);const l=Math.max(t,a),s=t/a;t=s<=1?Math.ceil(l*s):l,a=s<=1?l:Math.ceil(l/s),b=Math.min(null!=p?p:t,m||r),w=Math.min(null!=p?p:a,m||r),v.shape={type:"image",x:-Math.round(b/2),y:-Math.round(w/2),width:b,height:w,src:e.url||""};break}case"text":{const t=e,a=t.text||"Aa",l=t.font,s=Math.min(null!=p?p:n.pt2px(l.size),m||r),o=function(e,t){const a=u.getContext("2d"),l=[];return t&&(t.weight&&l.push(t.weight),t.size&&l.push(t.size+"px"),t.family&&l.push(t.family)),a.font=l.join(" "),a.measureText(e).width}(a,{weight:l.weight,size:s,family:l.family}),i=/[\uE600-\uE6FF]/.test(a);b=i?s:o,w=s;let c=.25*function(e){if(0===e.length)return 0;if(e.length>2){const t=n.px2pt(1),a=parseFloat(e);switch(e.slice(-2)){case"px":return a;case"pt":return a*t;case"in":return 72*a*t;case"pc":return 12*a*t;case"mm":return 2.8346456692913384*a*t;case"cm":return 28.346456692913385*a*t}}return parseFloat(e)}((l?s:0).toString());i&&(c+=5),v.shape={type:"text",text:a,x:0,y:c,align:"middle",decoration:l&&l.decoration,rotated:t.rotated,kerning:t.kerning},v.font=l&&{size:s,style:l.style,decoration:l.decoration,weight:l.weight,family:l.family};break}}if(!v.shape)return l.reject(new a("symbolPreview: renderPreviewHTML2D","symbol not supported."));const x=s.getFill(e),M=x,k=e.color;let L=null;return M&&"pattern"===M.type&&k&&e.type!==c?L=s.getPatternUrlWithColor(M.src,k.toCss(!0)).then((e=>(M.src=e,v.fill=M,v))):(v.fill=x,L=l.resolve(v)),L.then((e=>{const a=[[e]];if("object"==typeof(null==t?void 0:t.symbolConfig)&&null!=t&&t.symbolConfig.applyColorModulation){const t=.6*b;a.unshift([{...e,offset:[-t,0],fill:o.adjustColorBrightness(x,-.3)}]),a.push([{...e,offset:[t,0],fill:o.adjustColorBrightness(x,.3)}]),b+=2*t}return i.renderSymbol(a,[b,w],{node:t&&t.node,scale:g,opacity:h,rotation:d})}))},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,l))||(e.exports=n)}}]);