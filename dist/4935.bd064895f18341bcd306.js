(self.webpackChunkh2oc=self.webpackChunkh2oc||[]).push([[4935],{96701:(e,t,i)=>{var n,r;n=[i,t,i(3718),i(86928),i(49359),i(9720),i(56750),i(19328),i(52148),i(81405),i(57167),i(35477),i(2707),i(87547),i(16985),i(38003),i(79043),i(28714)],void 0===(r=function(e,n,r,s,o,a,u,l,c,h,f,d,p,m,y,g,_,I){"use strict";const x=new s.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),b=Object.freeze({}),M=new m,S=new m,v=new m,w={esriGeometryPoint:y.convertToPoint,esriGeometryPolyline:y.convertToPolyline,esriGeometryPolygon:y.convertToPolygon,esriGeometryMultipoint:y.convertToMultipoint};function R(e,t,i,n=e.hasZ,r=e.hasM){const s=e.hasZ&&n,o=e.hasM&&r;if(i){const a=y.quantizeOptimizedGeometry(v,t,e.hasZ,e.hasM,"esriGeometryPoint",i,n,r);return y.convertToPoint(a,s,o)}return y.convertToPoint(t,s,o)}function F(e,t,i,n,r,s,o=t,a=i){const u=t&&o,l=i&&a,c=n?"coords"in n?n:n.geometry:null;if(!c)return null;if(r){let n=y.generalizeOptimizedGeometry(S,c,t,i,e,r,o,a);return s&&(n=y.quantizeOptimizedGeometry(v,n,u,l,e,s)),w[e](n,u,l)}if(s){const n=y.quantizeOptimizedGeometry(v,c,t,i,e,s,o,a);return w[e](n,u,l)}return y.removeZMValues(M,c,t,i,o,a),w[e](M,u,l)}async function T(e,t,i){if(!e)return null;let{where:n}=e;if(e.where=n=n&&n.trim(),(!n||/^1 *= *1$/.test(n)||t&&t===n)&&(e.where=null),!e.geometry)return e;let s=await async function(e){const{geometry:t,distance:i,units:n}=e;if(null==i||"vertexAttributes"in t)return t;const r=t.spatialReference,s=n?x.fromJSON(n):d.getUnitString(r),o=r&&(u.isGeographic(r)||u.isWebMercator(r))?t:await _.checkProjectionSupport(r,u.WGS84).then((()=>_.project(t,u.WGS84)));return(await B())(o.spatialReference,o,i,s)}(e);if(e.distance=0,e.units=null,"esriSpatialRelEnvelopeIntersects"===e.spatialRel){const{spatialReference:t}=e.geometry;s=h.getGeometryExtent(s),s.spatialReference=t}e.geometry=s,await _.checkProjectionSupport(s.spatialReference,i);const o=(await p.normalizeCentralMeridian(f.fromJSON(s)))[0];if(r.isNone(o))throw b;const a=o.toJSON(),l=await _.project(a,a.spatialReference,i);if(!l)throw b;return l.spatialReference=i,e.geometry=l,e}const E="_geVersion",O=(e,t)=>e!==E?t:void 0,G="feature-store:unsupported-query",N={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},P={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},A={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},C={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function j(){return new Promise((function(e,t){Promise.all([i.e(4095),i.e(2215)]).then(function(){var t=[i(32215)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}function B(){return j().then((e=>e.geodesicBuffer))}t.QUERY_ENGINE_EMPTY_RESULT=b,t.canQueryWithRBush=function(e){if(f.isExtent(e))return!0;if(f.isPolygon(e)){for(const t of e.rings){if(5!==t.length)return!1;if(t[0][0]!==t[1][0]||t[0][0]!==t[4][0]||t[2][0]!==t[3][0]||t[0][1]!==t[3][1]||t[0][1]!==t[4][1]||t[1][1]!==t[2][1])return!1}return!0}return!1},t.checkSpatialQuerySupport=async function(e,t,i){const{spatialRel:n,geometry:r}=e;if(r){if(!0!==P[n])throw new o(G,"Unsupported query spatial relationship",{query:e});if(u.isValid(r.spatialReference)&&u.isValid(i)){if(!function(e){return!0===A[f.getJsonType(e)]}(r))throw new o(G,"Unsupported query geometry type",{query:e});if(!function(e){return!0===C[e]}(t))throw new o(G,"Unsupported layer geometry type",{query:e});if(e.outSR)return _.checkProjectionSupport(e.geometry&&e.geometry.spatialReference,e.outSR)}}},t.cleanFromGeometryEngine=function(e){return e&&E in e?JSON.parse(JSON.stringify(e,O)):e},t.getCentroid=function(e,t,i){return"esriGeometryPolygon"===e.geometryType&&t&&(t.centroid||t.geometry)?(t.centroid||(t.centroid=g.getCentroidOptimizedGeometry(new m,t.geometry,e.hasZ,e.hasM)),R(e,t.centroid,i)):null},t.getGeodesicBufferOperator=B,t.getGeometry=F,t.getSpatialQueryOperator=function(e,t,i,n,r){if(f.isPolygon(t)&&"esriGeometryPoint"===i&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e)){const e=y.convertFromPolygon(new m,t,!1,!1);return a.resolve((t=>I.polygonContainsPoint(e,!1,!1,t)))}if(f.isPolygon(t)&&"esriGeometryMultipoint"===i){const i=y.convertFromPolygon(new m,t,!1,!1);if("esriSpatialRelContains"===e)return a.resolve((e=>I.polygonContainsMultipoint(i,!1,!1,e,n,r)))}if(f.isExtent(t)&&"esriGeometryPoint"===i&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e))return a.resolve((e=>l.extentContainsPoint(t,F(i,n,r,e))));if(f.isExtent(t)&&"esriGeometryMultipoint"===i&&"esriSpatialRelContains"===e)return a.resolve((e=>l.extentContainsMultipoint(t,F(i,n,r,e))));if(f.isExtent(t)&&"esriSpatialRelIntersects"===e){const e=c.getExtentIntersector(i);return a.resolve((s=>e(t,F(i,n,r,s))))}return j().then((s=>{const o=s[N[e]].bind(null,t.spatialReference,t);return e=>o(F(i,n,r,e))}))},t.importGeometryEngine=j,t.normalizeFilter=async function(e,t,i){return T(e,t,i)},t.normalizeQuery=async function(e,t,i){const{outFields:n,orderByFields:r,groupByFieldsForStatistics:s,outStatistics:o}=e;if(n)for(let e=0;e<n.length;e++)n[e]=n[e].trim();if(r)for(let e=0;e<r.length;e++)r[e]=r[e].trim();if(s)for(let e=0;e<s.length;e++)s[e]=s[e].trim();if(o)for(let e=0;e<o.length;e++)o[e].onStatisticField&&(o[e].onStatisticField=o[e].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),T(e,t,i)},t.normalizeQueryLike=T,t.transformCentroid=R}.apply(t,n))||(e.exports=r)},24088:(e,t,i)=>{var n,r;n=[t,i(3718),i(12997),i(18167)],void 0===(r=function(e,i,n,r){"use strict";function s(e=p){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function o(e,t,i,n,r,o,a=s()){return a[0]=e,a[1]=t,a[2]=i,a[3]=n,a[4]=r,a[5]=o,a}function a(e){return e[0]>=e[3]?0:e[3]-e[0]}function u(e){return e[1]>=e[4]?0:e[4]-e[1]}function l(e){return e[2]>=e[5]?0:e[5]-e[2]}function c(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function h(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function f(e){return 6===e.length}const d=[1/0,1/0,1/0,-1/0,-1/0,-1/0],p=[0,0,0,0,0,0],m=s();t.NEGATIVE_INFINITY=d,t.POSITIVE_INFINITY=[-1/0,-1/0,-1/0,1/0,1/0,1/0],t.ZERO=p,t.allFinite=function(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0},t.center=function(e,t=[0,0,0]){return t[0]=e[0]+a(e)/2,t[1]=e[1]+u(e)/2,t[2]=e[2]+l(e)/2,t},t.contains=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]},t.containsPoint=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]},t.containsPointWithMargin=function(e,t,i){return t[0]>=e[0]-i&&t[1]>=e[1]-i&&t[2]>=e[2]-i&&t[0]<=e[3]+i&&t[1]<=e[4]+i&&t[2]<=e[5]+i},t.create=s,t.depth=u,t.diameter=function(e){const t=a(e),i=l(e),n=u(e);return Math.sqrt(t*t+i*i+n*n)},t.empty=function(e){return e?h(e,d):s(d)},t.equals=function(e,t,n){if(i.isNone(e)||i.isNone(t))return e===t;if(!f(e)||!f(t))return!1;if(n){for(let i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},t.expandWithAABB=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])},t.expandWithBuffer=function(e,t,i=0,n=t.length/3){let r=e[0],s=e[1],o=e[2],a=e[3],u=e[4],l=e[5];for(let e=0;e<n;e++)r=Math.min(r,t[i+3*e]),s=Math.min(s,t[i+3*e+1]),o=Math.min(o,t[i+3*e+2]),a=Math.max(a,t[i+3*e]),u=Math.max(u,t[i+3*e+1]),l=Math.max(l,t[i+3*e+2]);e[0]=r,e[1]=s,e[2]=o,e[3]=a,e[4]=u,e[5]=l},t.expandWithNestedArray=function(e,t,i){const n=t.length;let r=e[0],s=e[1],o=e[2],a=e[3],u=e[4],l=e[5];if(i)for(let e=0;e<n;e++){const i=t[e];r=Math.min(r,i[0]),s=Math.min(s,i[1]),o=Math.min(o,i[2]),a=Math.max(a,i[0]),u=Math.max(u,i[1]),l=Math.max(l,i[2])}else for(let e=0;e<n;e++){const i=t[e];r=Math.min(r,i[0]),s=Math.min(s,i[1]),a=Math.max(a,i[0]),u=Math.max(u,i[1])}e[0]=r,e[1]=s,e[2]=o,e[3]=a,e[4]=u,e[5]=l},t.expandWithOffset=function(e,t,i,n){e[0]=Math.min(e[0],e[0]+t),e[3]=Math.max(e[3],e[3]+t),e[1]=Math.min(e[1],e[1]+i),e[4]=Math.max(e[4],e[4]+i),e[2]=Math.min(e[2],e[2]+n),e[5]=Math.max(e[5],e[5]+n)},t.expandWithRect=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])},t.expandWithVec3=function(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])},t.fromExtent=function(e,t=s()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.zmin,t[3]=e.xmax,t[4]=e.ymax,t[5]=e.zmax,t},t.fromMinMax=function(e,t,i=s()){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=t[0],i[4]=t[1],i[5]=t[2],i},t.fromRect=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e},t.fromValues=o,t.getMax=function(e,t){return t[0]=e[3],t[1]=e[4],t[2]=e[5],t},t.getMin=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.height=l,t.intersects=c,t.intersectsClippingArea=function(e,t){return!!i.isNone(t)||c(e,t)},t.is=f,t.isPoint=function(e){return 0===a(e)&&0===u(e)&&0===l(e)},t.maximumDimension=function(e){return Math.max(a(e),l(e),u(e))},t.offset=function(e,t,i,n,r=e){return r[0]=e[0]+t,r[1]=e[1]+i,r[2]=e[2]+n,r[3]=e[3]+t,r[4]=e[4]+i,r[5]=e[5]+n,r},t.scale=function(e,t,i=e){const n=e[0]+a(e)/2,r=e[1]+u(e)/2,s=e[2]+l(e)/2;return i[0]=n+(e[0]-n)*t,i[1]=r+(e[1]-r)*t,i[2]=s+(e[2]-s)*t,i[3]=n+(e[3]-n)*t,i[4]=r+(e[4]-r)*t,i[5]=s+(e[5]-s)*t,i},t.set=h,t.setMax=function(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e},t.setMin=function(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i},t.size=function(e,t=[0,0,0]){return t[0]=a(e),t[1]=u(e),t[2]=l(e),t},t.toExtent=function(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new n(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})},t.toRect=function(e,t){return t||(t=r.create()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t},t.width=a,t.wrap=function(e,t,i,n,r,s){return o(e,t,i,n,r,s,m)},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,n))||(e.exports=r)},28714:(e,t)=>{var i;void 0===(i=function(e){"use strict";function i(e,t){return e?t?4:3:t?3:2}function n(e,t,n,s,o){if(!e)return!1;const a=i(t,n),{coords:u,lengths:l}=e;let c=!1,h=0;for(const e of l)c=r(c,u,a,h,e,s,o),h+=e*a;return c}function r(e,t,i,n,r,s,o){let a=e,u=n;for(let e=n,l=n+r*i;e<l;e+=i){u=e+i,u===l&&(u=n);const r=t[e],c=t[e+1],h=t[u],f=t[u+1];(c<o&&f>=o||f<o&&c>=o)&&r+(o-c)/(f-c)*(h-r)<s&&(a=!a)}return a}t.polygonContainsCoords=n,t.polygonContainsMultipoint=function(e,t,r,s,o,a){const u=i(o,a),{coords:l,lengths:c}=s;if(!c)return!1;for(let i=0,s=0;i<c.length;i++,s+=u)if(!n(e,t,r,l[s],l[s+1]))return!1;return!0},t.polygonContainsPoint=function(e,t,i,r){return n(e,t,i,r.coords[0],r.coords[1])},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,[t]))||(e.exports=i)},74935:(e,t,i)=>{var n,r;n=[i(58797),i(3718),i(73462),i(49359),i(9720),i(63629),i(18167),i(909),i(96701),i(85504),i(30347),i(66167)],void 0===(r=function(e,t,i,n,r,s,o,a,u,l,c,h){"use strict";const f=i.getLogger("esri.views.2d.layers.features.controllers.FeatureFilter");return function(){function i(e){this._geometryBounds=o.create(),this._idToVisibility=new Map,this._serviceInfo=e}var d=i.prototype;return d.check=function(e){return this._applyFilter(e)},d.clear=function(){const e=this._resetAllHiddenIds();return this.update(),{show:e,hide:[]}},d.invalidate=function(){this._idToVisibility.forEach(((e,t)=>{this._idToVisibility.set(t,0)}))},d.setKnownIds=function(e){for(const t of e)this._idToVisibility.set(t,1)},d.setTrue=function(e){const t=[],i=[],n=new Set(e);return this._idToVisibility.forEach(((e,r)=>{const s=!!(1&this._idToVisibility.get(r)),o=n.has(r);!s&&o?t.push(r):s&&!o&&i.push(r),this._idToVisibility.set(r,o?3:0)})),{show:t,hide:i}},d.createQuery=function(){const{geometry:e,spatialRel:t,where:i,timeExtent:n,objectIds:r}=this;return a.fromJSON({geometry:e,spatialRel:t,where:i,timeExtent:n,objectIds:r})},d.update=async function(e,t){this._hash=JSON.stringify(e);const i=await u.normalizeQueryLike(e,null,t);await r.all([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)])},d._setAttributeFilter=async function(e){if(!e||!e.where)return this._clause=null,void(this.where=null);this._clause=await h.createWhereClause(e.where,this._serviceInfo.fieldsIndex),this.where=e.where},d._setIdFilter=function(e){this._idsToShow=e&&e.objectIds&&new Set(e.objectIds),this._idsToHide=e&&e.hiddenIds&&new Set(e.hiddenIds),this.objectIds=e&&e.objectIds},d._setGeometryFilter=async function(e){if(!e||!e.geometry)return this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null);const t=e.geometry,i=e.spatialRel||"esriSpatialRelIntersects",n=await u.getSpatialQueryOperator(i,t,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);s.getBoundsXY(this._geometryBounds,t),this._spatialQueryOperator=n,this.geometry=t,this.spatialRel=i},d._setTimeFilter=function(e){if(this.timeExtent=this._timeOperator=null,e&&e.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=e.timeExtent,this._timeOperator=l.getTimeOperator(this._serviceInfo.timeInfo,e.timeExtent,c.featureAdapter);else{const t=new n("feature-layer-view:time-filter-not-available","Unable to apply time filter, as layer doesn't have time metadata.",e.timeExtent);f.error(t)}},d._applyFilter=function(e){return this._filterByGeometry(e)&&this._filterById(e)&&this._filterByTime(e)&&this._filterByExpression(e)},d._filterByExpression=function(e){return!this.where||this._clause(e)},d._filterById=function(e){return(!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(e.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(e.getObjectId()))},d._filterByGeometry=function(e){if(!this.geometry)return!0;const t=e.readHydratedGeometry();return!!t&&this._spatialQueryOperator(t)},d._filterByTime=function(e){return!t.isSome(this._timeOperator)||this._timeOperator(e)},d._resetAllHiddenIds=function(){const e=[];return this._idToVisibility.forEach(((t,i)=>{1&t||(this._idToVisibility.set(i,1),e.push(i))})),e},e._createClass(i,[{key:"hash",get:function(){return this._hash}}]),i}()}.apply(t,n))||(e.exports=r)},85504:(e,t)=>{var i;void 0===(i=function(e){"use strict";t.getTimeExtent=function(e,t){if(!e)return null;const i=t.featureAdapter,{startTimeField:n,endTimeField:r}=e;let s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;if(n&&r)t.forEach((e=>{const t=i.getAttribute(e,n),a=i.getAttribute(e,r);null==t||isNaN(t)||(s=Math.min(s,t)),null==a||isNaN(a)||(o=Math.max(o,a))}));else{const e=n||r;t.forEach((t=>{const n=i.getAttribute(t,e);null==n||isNaN(n)||(s=Math.min(s,n),o=Math.max(o,n))}))}return{start:s,end:o}},t.getTimeOperator=function(e,t,i){if(!t||!e)return null;const{startTimeField:n,endTimeField:r}=e;if(!n&&!r)return null;const{start:s,end:o}=t;return null===s&&null===o?null:void 0===s&&void 0===o?()=>!1:n&&r?function(e,t,i,n,r){return null!=n&&null!=r?s=>{const o=e.getAttribute(s,t),a=e.getAttribute(s,i);return(null==o||o<=r)&&(null==a||a>=n)}:null!=n?t=>{const r=e.getAttribute(t,i);return null==r||r>=n}:null!=r?i=>{const n=e.getAttribute(i,t);return null==n||n<=r}:void 0}(i,n,r,s,o):function(e,t,i,n){return null!=i&&null!=n&&i===n?n=>e.getAttribute(n,t)===i:null!=i&&null!=n?r=>{const s=e.getAttribute(r,t);return s>=i&&s<=n}:null!=i?n=>e.getAttribute(n,t)>=i:null!=n?i=>e.getAttribute(i,t)<=n:void 0}(i,n||r,s,o)},Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,[t]))||(e.exports=i)},30682:(e,t,i)=>{var n,r;n=[i(73462)],void 0===(r=function(e){"use strict";return function(t,i,n){t.referencesGeometry();const r=i.readArcadeFeature();try{return t.evaluate({...n,$feature:r})}catch(t){return e.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",t),null}}}.apply(t,n))||(e.exports=r)},30347:(e,t,i)=>{var n,r;n=[t,i(58797),i(3718),i(59286),i(24088),i(32782),i(45552)],void 0===(r=function(e,i,n,r,s,o,a){"use strict";function u(e){return(4294901760&e)>>>16}function l(e){return 65535&e}const c={getObjectId:e=>e.getObjectId(),getAttributes:e=>e.readAttributes(),getAttribute:(e,t)=>e.readAttribute(t),cloneWithGeometry:(e,t)=>e,getGeometry:e=>e.readHydratedGeometry(),getCentroid:(e,t)=>e.readCentroid()};let h=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).featureAdapter=c,n.events=new r,n._featureSetsByInstance=new Map,n._objectIdToDisplayId=new Map,n._spatialIndexInvalid=!0,n._index=o.rbush(9,(e=>({minX:n._storage.getXMin(e),minY:n._storage.getYMin(e),maxX:n._storage.getXMax(e),maxY:n._storage.getYMax(e)}))),n}i._inheritsLoose(t,e);var a=t.prototype;return a.onTileData=function(e,t,i){if(n.isNone(t.addOrUpdate))return t;this._featureSetsByInstance.set(t.addOrUpdate.instance,t.addOrUpdate),this._storage=i,t.addOrUpdate._storage=i;const r=t.addOrUpdate.getCursor();for(;r.next();){const t=r.getObjectId(),n=r.instance<<16|r.getIndex();let s=this._objectIdToDisplayId.get(t);s||(s=i.createDisplayId(),this._objectIdToDisplayId.set(t,s),this._spatialIndexInvalid=!0),r.setDisplayId(s),i.setInstanceId(s,n),this.setComputedAttributes(i,r,s,e.scale)}return"update"===t.type&&(this._spatialIndexInvalid=!0),this.events.emit("changed"),t},a.forEach=function(e){this._objectIdToDisplayId.forEach((t=>{const i=this._storage.getInstanceId(t),n=this._lookupFeature(i);e(n)}))},a.forEachUnsafe=function(e){this._objectIdToDisplayId.forEach((t=>{const i=this._storage.getInstanceId(t),n=u(i),r=l(i),s=this._getFeatureSet(n);s.setIndex(r),e(s)}))},a.forEachInBounds=function(e,t){const i=this._searchIndex(e);for(const e of i){const i=this.lookupFeatureByDisplayId(e,this._storage);t(n.unwrap(i))}},a.forEachBounds=function(e,t,i){this._rebuildIndex();const n=[0,0,0,0];for(const r of e){if(!r.readGeometry())continue;const e=r.getDisplayId();n[0]=this._storage.getXMin(e),n[1]=this._storage.getYMin(e),n[2]=this._storage.getXMax(e),n[3]=this._storage.getYMax(e),t(s.fromRect(i,n))}},a.sweepFeatures=function(e,t,i){this._objectIdToDisplayId.forEach(((n,r)=>{e.has(n)||(t.releaseDisplayId(n),i.unsetAttributeData(n),this._objectIdToDisplayId.delete(r))})),this.events.emit("changed")},a.sweepFeatureSets=function(e){this._featureSetsByInstance.forEach(((t,i)=>{e.has(i)||this._featureSetsByInstance.delete(i)}))},a.lookupObjectId=function(e,t){const i=this.lookupFeatureByDisplayId(e,t);return n.isNone(i)?null:i.getObjectId()},a.lookupDisplayId=function(e){return this._objectIdToDisplayId.get(e)},a.lookupFeatureByDisplayId=function(e,t){const i=t.getInstanceId(e);return this._lookupFeature(i)},a.lookupByDisplayIdUnsafe=function(e){const t=this._storage.getInstanceId(e),i=u(t),n=l(t),r=this._getFeatureSet(i);return r?(r.setIndex(n),r):null},a.hasInstance=function(e){return this._featureSetsByInstance.has(e)},a._rebuildIndex=function(){if(!this._spatialIndexInvalid)return;this._index.clear();const e=[];this._objectIdToDisplayId.forEach((t=>{const i=this._storage.getInstanceId(t);this._storage.setBounds(t,this._lookupFeature(i))&&e.push(t)})),this._index.load(e),this._spatialIndexInvalid=!1},a._lookupFeature=function(e){const t=u(e),i=l(e),n=this._getFeatureSet(t);if(!n)return null;const r=n.getCursor();return r.setIndex(i),r},a._getFeatureSet=function(e){return this._featureSetsByInstance.get(e)},a._searchIndex=function(e){this._rebuildIndex();const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this._index.search(t)},i._createClass(t,[{key:"storeStatistics",get:function(){return{featureCount:0,vertexCount:0}}}]),t}(a.Store2D);t.FeatureStore2D=h,t.featureAdapter=c,Object.defineProperty(e,"__esModule",{value:!0})}.apply(t,n))||(e.exports=r)},45552:(e,t,i)=>{var n,r;n=[i,t,i(74637),i(3718),i(9720),i(27006),i(63940),i(30682)],void 0===(r=function(e,n,r,s,o,a,u,l){"use strict";const c=new Promise((function(e,t){i.e(9144).then(function(){var t=[i(29144)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}));let h=function(){function e(e,t){this._canCacheExpressionValue=!1,this._sourceInfo=e,this._bitsets={computed:t.getBitset(t.createBitset())}}var t=e.prototype;return t.updateSchema=async function(e,t){const i=u.diff(this._schema,t);if(this._schema=t,!t||s.isNone(i)||!u.hasDiff(i,"attributes"))return;r("esri-2d-update-debug")&&console.debug("Applying Update - Store:",i),this._bitsets.computed.clear(),e.targets[t.name]=!0;const n=t.attributes,a=[],l=[];for(const e in n){const t=n[e];switch(t.type){case"field":break;case"expression":a.push(this._createArcadeComputedField(t));break;case"label-expression":a.push(this._createLabelArcadeComputedField(t));break;case"statistic":l.push(t)}}this._computedFields=await o.all(a),this._canCacheExpressionValue=!this._computedFields.some((e=>"expression"===e.type&&e.expression.referencesScale())),this._statisticFields=l},t.setComputedAttributes=function(e,t,i,n){const r=this._bitsets.computed;if(!this._canCacheExpressionValue||!r.has(i)){r.set(i);for(const r of this._computedFields){const s=this._evaluateField(t,r,n);switch(r.resultType){case"numeric":e.setComputedNumericAtIndex(i,r.fieldIndex,s);break;case"string":e.setComputedStringAtIndex(i,r.fieldIndex,s)}}}},t._createArcadeComputedField=async function(e){const t=this._sourceInfo.spatialReference,i=this._sourceInfo.fieldsIndex;return{...e,expression:await a.createRendererExpression(e.valueExpression,t,i)}},t._createLabelArcadeComputedField=async function(e){const t=this._sourceInfo.spatialReference,i=this._sourceInfo.fields,{createLabelFunction:n}=await c,r=await n(e.label,i,t);return{...e,builder:r}},t._evaluateField=function(e,t,i){switch(t.type){case"label-expression":{const i=e.readArcadeFeature();return t.builder.evaluate(i)||""}case"expression":{const{expression:n}=t;return l(n,e,{$view:{scale:i}})}}},e}();t.Store2D=h,Object.defineProperty(n,"__esModule",{value:!0})}.apply(t,n))||(e.exports=r)},66167:(e,t,i)=>{var n,r;n=[i,t,i(73462),i(49359)],void 0===(r=function(e,n,r,s){"use strict";const o=r.getLogger("esri.views.2d.layers.features.support.whereUtils"),a={getAttribute:(e,t)=>e.field(t)};t.createWhereClause=async function(e,t){const n=await new Promise((function(e,t){i.e(9269).then(function(){var t=[i(69269)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}));try{const i=n.WhereClause.create(e,t);if(!i.isStandardized){const e=new s("mapview - bad input","Unable to apply filter's definition expression, as expression is not standardized.",i);o.error(e)}return e=>{const t=e.readArcadeFeature();return i.testFeature(t,a)}}catch(t){return o.warn("mapview-bad-where-clause","Encountered an error when evaluating where clause",e),e=>!0}},Object.defineProperty(n,"__esModule",{value:!0})}.apply(t,n))||(e.exports=r)}}]);